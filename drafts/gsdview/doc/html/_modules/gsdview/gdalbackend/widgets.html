
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>gsdview.gdalbackend.widgets &mdash; GSDView Open Edition Home Page</title>
    <link rel="stylesheet" href="../../../_static/sourceforge.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../../',
        VERSION:     '0.6.5',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../_static/doctools.js"></script>
    <link rel="shortcut icon" href="../../../_static/logo.ico"/>
    <link rel="top" title="GSDView Open Edition Home Page" href="../../../index.html" />
    <link rel="up" title="gsdview.gdalbackend" href="../gdalbackend.html" /> 
  </head>
  <body>
    
        
    
    
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../py-modindex.html" title="Python Module Index"
             >modules</a></li>
        <li><a href="../../../index.html">GSDView</a> &raquo;</li>
          <li><a href="../../index.html" >Module code</a> &raquo;</li>
          <li><a href="../../gsdview.html" >gsdview</a> &raquo;</li>
          <li><a href="../gdalbackend.html" accesskey="U">gsdview.gdalbackend</a> &raquo;</li> 
      </ul>
    </div>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <h1>Source code for gsdview.gdalbackend.widgets</h1><div class="highlight"><pre>
<span class="c"># -*- coding: utf-8 -*-</span>

<span class="c">### Copyright (C) 2008-2011 Antonio Valentino &lt;a_valentino@users.sf.net&gt;</span>

<span class="c">### This file is part of GSDView.</span>

<span class="c">### GSDView is free software; you can redistribute it and/or modify</span>
<span class="c">### it under the terms of the GNU General Public License as published by</span>
<span class="c">### the Free Software Foundation; either version 2 of the License, or</span>
<span class="c">### (at your option) any later version.</span>

<span class="c">### GSDView is distributed in the hope that it will be useful,</span>
<span class="c">### but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="c">### MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<span class="c">### GNU General Public License for more details.</span>

<span class="c">### You should have received a copy of the GNU General Public License</span>
<span class="c">### along with GSDView; if not, write to the Free Software</span>
<span class="c">### Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA  02110-1301  USA.</span>


<span class="sd">&#39;&#39;&#39;Widgets and dialogs for GSDView.&#39;&#39;&#39;</span>


<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">logging</span>
<span class="kn">import</span> <span class="nn">ConfigParser</span>

<span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">osgeo</span> <span class="kn">import</span> <span class="n">gdal</span>

<span class="kn">from</span> <span class="nn">qt</span> <span class="kn">import</span> <span class="n">QtCore</span><span class="p">,</span> <span class="n">QtGui</span>

<span class="kn">from</span> <span class="nn">..</span> <span class="kn">import</span> <span class="n">utils</span>
<span class="kn">from</span> <span class="nn">..</span> <span class="kn">import</span> <span class="n">qt4support</span>
<span class="kn">from</span> <span class="nn">..widgets</span> <span class="kn">import</span> <span class="n">get_filedialog</span><span class="p">,</span> <span class="n">FileEntryWidget</span>

<span class="kn">from</span> <span class="nn">.</span> <span class="kn">import</span> <span class="n">gdalsupport</span>


<span class="n">__author__</span> <span class="o">=</span> <span class="s">&#39;$Author: a_valentino $&#39;</span>
<span class="n">__date__</span> <span class="o">=</span> <span class="s">&#39;$Date: 2011-08-02 17:32:07 +0200 (mar, 02 ago 2011) $&#39;</span>
<span class="n">__revision__</span> <span class="o">=</span> <span class="s">&#39;$Revision: 1001 $&#39;</span>


<span class="n">GDALInfoWidgetBase</span> <span class="o">=</span> <span class="n">qt4support</span><span class="o">.</span><span class="n">getuiform</span><span class="p">(</span><span class="s">&#39;gdalinfo&#39;</span><span class="p">,</span> <span class="n">__name__</span><span class="p">)</span>


<div class="viewcode-block" id="GDALInfoWidget"><a class="viewcode-back" href="../../../api/gsdview.gdalbackend.widgets.html#gsdview.gdalbackend.widgets.GDALInfoWidget">[docs]</a><span class="k">class</span> <span class="nc">GDALInfoWidget</span><span class="p">(</span><span class="n">QtGui</span><span class="o">.</span><span class="n">QWidget</span><span class="p">,</span> <span class="n">GDALInfoWidgetBase</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">flags</span><span class="o">=</span><span class="n">QtCore</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">WindowFlags</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">GDALInfoWidget</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">flags</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setupUi</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

        <span class="c"># Context menu actions</span>
        <span class="n">qt4support</span><span class="o">.</span><span class="n">setViewContextActions</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gdalDriversTableWidget</span><span class="p">)</span>

        <span class="c"># @TODO: check for available info in gdal 1.5 and above</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">gdalReleaseNameValue</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">gdal</span><span class="o">.</span><span class="n">VersionInfo</span><span class="p">(</span><span class="s">&#39;RELEASE_NAME&#39;</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">gdalReleaseDateValue</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">gdal</span><span class="o">.</span><span class="n">VersionInfo</span><span class="p">(</span><span class="s">&#39;RELEASE_DATE&#39;</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">gdalVersionGroupBox</span><span class="o">.</span><span class="n">hide</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">updateCacheInfo</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setGdalDriversTab</span><span class="p">()</span>

<div class="viewcode-block" id="GDALInfoWidget.setGdalDriversTab"><a class="viewcode-back" href="../../../api/gsdview.gdalbackend.widgets.html#gsdview.gdalbackend.widgets.GDALInfoWidget.setGdalDriversTab">[docs]</a>    <span class="k">def</span> <span class="nf">setGdalDriversTab</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gdalDriversNumValue</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">gdal</span><span class="o">.</span><span class="n">GetDriverCount</span><span class="p">()))</span>

        <span class="n">tablewidget</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gdalDriversTableWidget</span>
        <span class="n">tablewidget</span><span class="o">.</span><span class="n">verticalHeader</span><span class="p">()</span><span class="o">.</span><span class="n">hide</span><span class="p">()</span>

        <span class="n">hheader</span> <span class="o">=</span> <span class="n">tablewidget</span><span class="o">.</span><span class="n">horizontalHeader</span><span class="p">()</span>
        <span class="c">#hheader.resizeSections(QtGui.QHeaderView.ResizeToContents)</span>
        <span class="n">fontinfo</span> <span class="o">=</span> <span class="n">QtGui</span><span class="o">.</span><span class="n">QFontInfo</span><span class="p">(</span><span class="n">tablewidget</span><span class="o">.</span><span class="n">font</span><span class="p">())</span>
        <span class="n">hheader</span><span class="o">.</span><span class="n">setDefaultSectionSize</span><span class="p">(</span><span class="mi">10</span> <span class="o">*</span> <span class="n">fontinfo</span><span class="o">.</span><span class="n">pixelSize</span><span class="p">())</span>

        <span class="n">sortingenabled</span> <span class="o">=</span> <span class="n">tablewidget</span><span class="o">.</span><span class="n">isSortingEnabled</span><span class="p">()</span>
        <span class="n">tablewidget</span><span class="o">.</span><span class="n">setSortingEnabled</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>
        <span class="n">tablewidget</span><span class="o">.</span><span class="n">setRowCount</span><span class="p">(</span><span class="n">gdal</span><span class="o">.</span><span class="n">GetDriverCount</span><span class="p">())</span>

        <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">gdal</span><span class="o">.</span><span class="n">GetDriverCount</span><span class="p">()):</span>
            <span class="n">driver</span> <span class="o">=</span> <span class="n">gdal</span><span class="o">.</span><span class="n">GetDriver</span><span class="p">(</span><span class="n">row</span><span class="p">)</span>
            <span class="c"># @TODO: check for available ingo in gdal 1.5 and above</span>
            <span class="n">tablewidget</span><span class="o">.</span><span class="n">setItem</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
                <span class="n">QtGui</span><span class="o">.</span><span class="n">QTableWidgetItem</span><span class="p">(</span><span class="n">driver</span><span class="o">.</span><span class="n">ShortName</span><span class="p">))</span>
            <span class="n">tablewidget</span><span class="o">.</span><span class="n">setItem</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span>
                <span class="n">QtGui</span><span class="o">.</span><span class="n">QTableWidgetItem</span><span class="p">(</span><span class="n">driver</span><span class="o">.</span><span class="n">LongName</span><span class="p">))</span>
            <span class="n">tablewidget</span><span class="o">.</span><span class="n">setItem</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span>
                <span class="n">QtGui</span><span class="o">.</span><span class="n">QTableWidgetItem</span><span class="p">(</span><span class="n">driver</span><span class="o">.</span><span class="n">GetDescription</span><span class="p">()))</span>
            <span class="n">tablewidget</span><span class="o">.</span><span class="n">setItem</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span>
                <span class="n">QtGui</span><span class="o">.</span><span class="n">QTableWidgetItem</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">driver</span><span class="o">.</span><span class="n">HelpTopic</span><span class="p">)))</span>

            <span class="n">metadata</span> <span class="o">=</span> <span class="n">driver</span><span class="o">.</span><span class="n">GetMetadata</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">metadata</span><span class="p">:</span>
                <span class="n">tablewidget</span><span class="o">.</span><span class="n">setItem</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="n">QtGui</span><span class="o">.</span><span class="n">QTableWidgetItem</span><span class="p">(</span>
                    <span class="nb">str</span><span class="p">(</span><span class="n">metadata</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">gdal</span><span class="o">.</span><span class="n">DMD_EXTENSION</span><span class="p">,</span> <span class="s">&#39;&#39;</span><span class="p">))))</span>
                <span class="n">tablewidget</span><span class="o">.</span><span class="n">setItem</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="n">QtGui</span><span class="o">.</span><span class="n">QTableWidgetItem</span><span class="p">(</span>
                    <span class="nb">str</span><span class="p">(</span><span class="n">metadata</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">gdal</span><span class="o">.</span><span class="n">DMD_MIMETYPE</span><span class="p">,</span> <span class="s">&#39;&#39;</span><span class="p">))))</span>
                <span class="n">tablewidget</span><span class="o">.</span><span class="n">setItem</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="n">QtGui</span><span class="o">.</span><span class="n">QTableWidgetItem</span><span class="p">(</span>
                    <span class="nb">str</span><span class="p">(</span><span class="n">metadata</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">gdal</span><span class="o">.</span><span class="n">DMD_CREATIONDATATYPES</span><span class="p">,</span> <span class="s">&#39;&#39;</span><span class="p">))))</span>

                <span class="n">data</span> <span class="o">=</span> <span class="n">metadata</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">gdal</span><span class="o">.</span><span class="n">DMD_CREATIONOPTIONLIST</span><span class="p">,</span> <span class="s">&#39;&#39;</span><span class="p">)</span>
                <span class="c"># @TODO: parse xml</span>
                <span class="n">tableitem</span> <span class="o">=</span> <span class="n">QtGui</span><span class="o">.</span><span class="n">QTableWidgetItem</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
                <span class="n">tableitem</span><span class="o">.</span><span class="n">setToolTip</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
                <span class="n">tablewidget</span><span class="o">.</span><span class="n">setItem</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="n">tableitem</span><span class="p">)</span>

                <span class="n">metadata</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">gdal</span><span class="o">.</span><span class="n">DMD_HELPTOPIC</span><span class="p">,</span> <span class="s">&#39;&#39;</span><span class="p">)</span>
                <span class="n">metadata</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">gdal</span><span class="o">.</span><span class="n">DMD_LONGNAME</span><span class="p">,</span> <span class="s">&#39;&#39;</span><span class="p">)</span>

                <span class="n">metadatalist</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;</span><span class="si">%s</span><span class="s">=</span><span class="si">%s</span><span class="s">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="n">v</span><span class="p">)</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">metadata</span><span class="o">.</span><span class="n">items</span><span class="p">()]</span>
                <span class="n">tableitem</span> <span class="o">=</span> <span class="n">QtGui</span><span class="o">.</span><span class="n">QTableWidgetItem</span><span class="p">(</span><span class="s">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">metadatalist</span><span class="p">))</span>
                <span class="n">tableitem</span><span class="o">.</span><span class="n">setToolTip</span><span class="p">(</span><span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">metadatalist</span><span class="p">))</span>
                <span class="n">tablewidget</span><span class="o">.</span><span class="n">setItem</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="n">tableitem</span><span class="p">)</span>

        <span class="n">tablewidget</span><span class="o">.</span><span class="n">setSortingEnabled</span><span class="p">(</span><span class="n">sortingenabled</span><span class="p">)</span>
        <span class="n">tablewidget</span><span class="o">.</span><span class="n">sortItems</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">QtCore</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">AscendingOrder</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="GDALInfoWidget.updateCacheInfo"><a class="viewcode-back" href="../../../api/gsdview.gdalbackend.widgets.html#gsdview.gdalbackend.widgets.GDALInfoWidget.updateCacheInfo">[docs]</a>    <span class="k">def</span> <span class="nf">updateCacheInfo</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gdalCacheMaxValue</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s">&#39;</span><span class="si">%.3f</span><span class="s"> MB&#39;</span> <span class="o">%</span> <span class="p">(</span>
                                            <span class="n">gdal</span><span class="o">.</span><span class="n">GetCacheMax</span><span class="p">()</span> <span class="o">/</span> <span class="mf">1024.</span> <span class="o">**</span> <span class="mi">2</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gdalCacheUsedValue</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s">&#39;</span><span class="si">%.3f</span><span class="s"> MB&#39;</span> <span class="o">%</span> <span class="p">(</span>
                                            <span class="n">gdal</span><span class="o">.</span><span class="n">GetCacheUsed</span><span class="p">()</span> <span class="o">/</span> <span class="mf">1024.</span> <span class="o">**</span> <span class="mi">2</span><span class="p">))</span>
</div>
<div class="viewcode-block" id="GDALInfoWidget.showEvent"><a class="viewcode-back" href="../../../api/gsdview.gdalbackend.widgets.html#gsdview.gdalbackend.widgets.GDALInfoWidget.showEvent">[docs]</a>    <span class="k">def</span> <span class="nf">showEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">updateCacheInfo</span><span class="p">()</span>
        <span class="n">QtGui</span><span class="o">.</span><span class="n">QWidget</span><span class="o">.</span><span class="n">showEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">)</span>

</div></div>
<span class="n">GDALPreferencesPageBase</span> <span class="o">=</span> <span class="n">qt4support</span><span class="o">.</span><span class="n">getuiform</span><span class="p">(</span><span class="s">&#39;gdalpage&#39;</span><span class="p">,</span> <span class="n">__name__</span><span class="p">)</span>


<div class="viewcode-block" id="GDALPreferencesPage"><a class="viewcode-back" href="../../../api/gsdview.gdalbackend.widgets.html#gsdview.gdalbackend.widgets.GDALPreferencesPage">[docs]</a><span class="k">class</span> <span class="nc">GDALPreferencesPage</span><span class="p">(</span><span class="n">QtGui</span><span class="o">.</span><span class="n">QWidget</span><span class="p">,</span> <span class="n">GDALPreferencesPageBase</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">flags</span><span class="o">=</span><span class="n">QtCore</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">WindowFlags</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">GDALPreferencesPage</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">flags</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setupUi</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">infoButton</span><span class="o">.</span><span class="n">setIcon</span><span class="p">(</span><span class="n">qt4support</span><span class="o">.</span><span class="n">geticon</span><span class="p">(</span><span class="s">&#39;info.svg&#39;</span><span class="p">,</span> <span class="s">&#39;gsdview&#39;</span><span class="p">))</span>

        <span class="c"># Avoid promoted widgets</span>
        <span class="n">DirectoryOnly</span> <span class="o">=</span> <span class="n">QtGui</span><span class="o">.</span><span class="n">QFileDialog</span><span class="o">.</span><span class="n">DirectoryOnly</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gdalDataDirEntryWidget</span> <span class="o">=</span> <span class="n">FileEntryWidget</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="n">DirectoryOnly</span><span class="p">,</span>
                                                      <span class="n">enabled</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">optionsGridLayout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gdalDataDirEntryWidget</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gdalDataCheckBox</span><span class="o">.</span><span class="n">toggled</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span>
                                    <span class="bp">self</span><span class="o">.</span><span class="n">gdalDataDirEntryWidget</span><span class="o">.</span><span class="n">setEnabled</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">gdalDriverPathEntryWidget</span> <span class="o">=</span> <span class="n">FileEntryWidget</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="n">DirectoryOnly</span><span class="p">,</span>
                                                         <span class="n">enabled</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">optionsGridLayout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gdalDriverPathEntryWidget</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gdalDriverPathCheckBox</span><span class="o">.</span><span class="n">toggled</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span>
                                    <span class="bp">self</span><span class="o">.</span><span class="n">gdalDriverPathEntryWidget</span><span class="o">.</span><span class="n">setEnabled</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">ogrDriverPathEntryWidget</span> <span class="o">=</span> <span class="n">FileEntryWidget</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="n">DirectoryOnly</span><span class="p">,</span>
                                                        <span class="n">enabled</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">optionsGridLayout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ogrDriverPathEntryWidget</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ogrDriverPathCheckBox</span><span class="o">.</span><span class="n">toggled</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span>
                                    <span class="bp">self</span><span class="o">.</span><span class="n">ogrDriverPathEntryWidget</span><span class="o">.</span><span class="n">setEnabled</span><span class="p">)</span>

        <span class="c"># info button</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">infoButton</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">showinfo</span><span class="p">)</span>

        <span class="c"># Context menu actions</span>
        <span class="n">qt4support</span><span class="o">.</span><span class="n">setViewContextActions</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">extraOptTableWidget</span><span class="p">)</span>

        <span class="c"># standard options</span>
        <span class="n">cachesize</span> <span class="o">=</span> <span class="n">gdal</span><span class="o">.</span><span class="n">GetCacheMax</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cacheSpinBox</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="n">cachesize</span> <span class="o">/</span> <span class="mi">1024</span> <span class="o">**</span> <span class="mi">2</span><span class="p">)</span>
        <span class="n">dialog</span> <span class="o">=</span> <span class="n">get_filedialog</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="p">(</span><span class="s">&#39;gdalDataDir&#39;</span><span class="p">,</span> <span class="s">&#39;gdalDriverPath&#39;</span><span class="p">,</span> <span class="s">&#39;ogrDriverPath&#39;</span><span class="p">):</span>
            <span class="n">widget</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span> <span class="o">+</span> <span class="s">&#39;EntryWidget&#39;</span><span class="p">)</span>
            <span class="n">widget</span><span class="o">.</span><span class="n">dialog</span> <span class="o">=</span> <span class="n">dialog</span>
            <span class="n">widget</span><span class="o">.</span><span class="n">mode</span> <span class="o">=</span> <span class="n">QtGui</span><span class="o">.</span><span class="n">QFileDialog</span><span class="o">.</span><span class="n">Directory</span>

        <span class="c"># extra options</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_extraoptions</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">stdoptions</span> <span class="o">=</span> <span class="nb">set</span><span class="p">((</span><span class="s">&#39;GDAL_DATA&#39;</span><span class="p">,</span> <span class="s">&#39;GDAL_SKIP&#39;</span><span class="p">,</span> <span class="s">&#39;GDAL_DRIVER_PATH&#39;</span><span class="p">,</span>
                          <span class="s">&#39;OGR_DRIVER_PATH&#39;</span><span class="p">,</span> <span class="s">&#39;GDAL_CACHEMAX&#39;</span><span class="p">,</span> <span class="s">&#39;&#39;</span><span class="p">))</span>

        <span class="n">extraoptions</span> <span class="o">=</span> <span class="n">gdalsupport</span><span class="o">.</span><span class="n">GDAL_CONFIG_OPTIONS</span><span class="o">.</span><span class="n">splitlines</span><span class="p">()</span>
        <span class="n">extraoptions</span> <span class="o">=</span> <span class="p">[</span><span class="n">opt</span> <span class="k">for</span> <span class="n">opt</span> <span class="ow">in</span> <span class="n">extraoptions</span> <span class="k">if</span> <span class="n">opt</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">stdoptions</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">extraOptTableWidget</span><span class="o">.</span><span class="n">setRowCount</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">extraoptions</span><span class="p">))</span>

        <span class="k">for</span> <span class="n">row</span><span class="p">,</span> <span class="n">key</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">extraoptions</span><span class="p">):</span>
            <span class="n">item</span> <span class="o">=</span> <span class="n">QtGui</span><span class="o">.</span><span class="n">QTableWidgetItem</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
            <span class="n">item</span><span class="o">.</span><span class="n">setFlags</span><span class="p">(</span><span class="n">item</span><span class="o">.</span><span class="n">flags</span><span class="p">()</span> <span class="o">^</span> <span class="n">QtCore</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">ItemIsEditable</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">extraOptTableWidget</span><span class="o">.</span><span class="n">setItem</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">item</span><span class="p">)</span>
            <span class="n">value</span> <span class="o">=</span> <span class="n">gdal</span><span class="o">.</span><span class="n">GetConfigOption</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="s">&#39;&#39;</span><span class="p">)</span>
            <span class="n">item</span> <span class="o">=</span> <span class="n">QtGui</span><span class="o">.</span><span class="n">QTableWidgetItem</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">extraOptTableWidget</span><span class="o">.</span><span class="n">setItem</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">item</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">value</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_extraoptions</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>

        <span class="n">hheader</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">extraOptTableWidget</span><span class="o">.</span><span class="n">horizontalHeader</span><span class="p">()</span>
        <span class="n">hheader</span><span class="o">.</span><span class="n">resizeSections</span><span class="p">(</span><span class="n">QtGui</span><span class="o">.</span><span class="n">QHeaderView</span><span class="o">.</span><span class="n">ResizeToContents</span><span class="p">)</span>

    <span class="nd">@QtCore.Slot</span><span class="p">()</span>
<div class="viewcode-block" id="GDALPreferencesPage.showinfo"><a class="viewcode-back" href="../../../api/gsdview.gdalbackend.widgets.html#gsdview.gdalbackend.widgets.GDALPreferencesPage.showinfo">[docs]</a>    <span class="k">def</span> <span class="nf">showinfo</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">dialog</span> <span class="o">=</span> <span class="n">QtGui</span><span class="o">.</span><span class="n">QDialog</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="n">dialog</span><span class="o">.</span><span class="n">setWindowTitle</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tr</span><span class="p">(</span><span class="s">&#39;GDAL info&#39;</span><span class="p">))</span>
        <span class="n">layout</span> <span class="o">=</span> <span class="n">QtGui</span><span class="o">.</span><span class="n">QVBoxLayout</span><span class="p">()</span>
        <span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">GDALInfoWidget</span><span class="p">())</span>

        <span class="n">buttonbox</span> <span class="o">=</span> <span class="n">QtGui</span><span class="o">.</span><span class="n">QDialogButtonBox</span><span class="p">(</span><span class="n">QtGui</span><span class="o">.</span><span class="n">QDialogButtonBox</span><span class="o">.</span><span class="n">Close</span><span class="p">,</span>
                                           <span class="n">accepted</span><span class="o">=</span><span class="n">dialog</span><span class="o">.</span><span class="n">accept</span><span class="p">,</span>
                                           <span class="n">rejected</span><span class="o">=</span><span class="n">dialog</span><span class="o">.</span><span class="n">reject</span><span class="p">)</span>
        <span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">buttonbox</span><span class="p">)</span>

        <span class="n">dialog</span><span class="o">.</span><span class="n">setLayout</span><span class="p">(</span><span class="n">layout</span><span class="p">)</span>
        <span class="n">buttonbox</span><span class="o">.</span><span class="n">setFocus</span><span class="p">()</span>
        <span class="n">dialog</span><span class="o">.</span><span class="n">exec_</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="GDALPreferencesPage.load"><a class="viewcode-back" href="../../../api/gsdview.gdalbackend.widgets.html#gsdview.gdalbackend.widgets.GDALPreferencesPage.load">[docs]</a>    <span class="k">def</span> <span class="nf">load</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">settings</span><span class="p">):</span>
        <span class="n">settings</span><span class="o">.</span><span class="n">beginGroup</span><span class="p">(</span><span class="s">&#39;gdal&#39;</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>

            <span class="c"># cache size</span>
            <span class="n">cachesize</span> <span class="o">=</span> <span class="n">settings</span><span class="o">.</span><span class="n">value</span><span class="p">(</span><span class="s">&#39;GDAL_CACHEMAX&#39;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">cachesize</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">cacheCheckBox</span><span class="o">.</span><span class="n">setChecked</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">cacheSpinBox</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">cachesize</span><span class="p">)</span> <span class="o">/</span> <span class="mi">1024</span> <span class="o">**</span> <span class="mi">2</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c"># show the current value and disable the control</span>
                <span class="n">cachesize</span> <span class="o">=</span> <span class="n">gdal</span><span class="o">.</span><span class="n">GetCacheMax</span><span class="p">()</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">cacheSpinBox</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="n">cachesize</span> <span class="o">/</span> <span class="mi">1024</span> <span class="o">**</span> <span class="mi">2</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">cacheCheckBox</span><span class="o">.</span><span class="n">setChecked</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>

            <span class="c"># GDAL data dir</span>
            <span class="n">datadir</span> <span class="o">=</span> <span class="n">settings</span><span class="o">.</span><span class="n">value</span><span class="p">(</span><span class="s">&#39;GDAL_DATA&#39;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">datadir</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">gdalDataCheckBox</span><span class="o">.</span><span class="n">setChecked</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">gdalDataDirEntryWidget</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">datadir</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c"># show the current value and disable the control</span>
                <span class="n">datadir</span> <span class="o">=</span> <span class="n">gdal</span><span class="o">.</span><span class="n">GetConfigOption</span><span class="p">(</span><span class="s">&#39;GDAL_DATA&#39;</span><span class="p">,</span> <span class="s">&#39;&#39;</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">gdalDataDirEntryWidget</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">datadir</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">gdalDataCheckBox</span><span class="o">.</span><span class="n">setChecked</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>

            <span class="c"># GDAL_SKIP</span>
            <span class="n">gdalskip</span> <span class="o">=</span> <span class="n">settings</span><span class="o">.</span><span class="n">value</span><span class="p">(</span><span class="s">&#39;GDAL_SKIP&#39;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">gdalskip</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">skipCheckBox</span><span class="o">.</span><span class="n">setChecked</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">skipLineEdit</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">gdalskip</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c"># show the current value and disable the control</span>
                <span class="n">gdalskip</span> <span class="o">=</span> <span class="n">gdal</span><span class="o">.</span><span class="n">GetConfigOption</span><span class="p">(</span><span class="s">&#39;GDAL_SKIP&#39;</span><span class="p">,</span> <span class="s">&#39;&#39;</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">skipLineEdit</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">gdalskip</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">skipCheckBox</span><span class="o">.</span><span class="n">setChecked</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>

            <span class="c"># GDAL driver path</span>
            <span class="n">gdaldriverpath</span> <span class="o">=</span> <span class="n">settings</span><span class="o">.</span><span class="n">value</span><span class="p">(</span><span class="s">&#39;GDAL_DRIVER_PATH&#39;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">gdaldriverpath</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">gdalDriverPathCheckBox</span><span class="o">.</span><span class="n">setChecked</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">gdalDriverPathEntryWidget</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">gdaldriverpath</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c"># show the current value and disable the control</span>
                <span class="n">gdaldriverpath</span> <span class="o">=</span> <span class="n">gdal</span><span class="o">.</span><span class="n">GetConfigOption</span><span class="p">(</span><span class="s">&#39;GDAL_DRIVER_PATH&#39;</span><span class="p">,</span> <span class="s">&#39;&#39;</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">gdalDriverPathEntryWidget</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">gdaldriverpath</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">gdalDriverPathCheckBox</span><span class="o">.</span><span class="n">setChecked</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>

            <span class="c"># OGR driver path</span>
            <span class="n">ogrdriverpath</span> <span class="o">=</span> <span class="n">settings</span><span class="o">.</span><span class="n">value</span><span class="p">(</span><span class="s">&#39;OGR_DRIVER_PATH&#39;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">ogrdriverpath</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">ogrDriverPathCheckBox</span><span class="o">.</span><span class="n">setChecked</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">ogrDriverPathEntryWidget</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">ogrdriverpath</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c"># show the current value and disable the control</span>
                <span class="n">ogrdriverpath</span> <span class="o">=</span> <span class="n">gdal</span><span class="o">.</span><span class="n">GetConfigOption</span><span class="p">(</span><span class="s">&#39;OGR_DRIVER_PATH&#39;</span><span class="p">,</span> <span class="s">&#39;&#39;</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">ogrDriverPathEntryWidget</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">ogrdriverpath</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">ogrDriverPathCheckBox</span><span class="o">.</span><span class="n">setChecked</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>

            <span class="c"># @TODO: complete</span>
            <span class="c">#~ gdal.GetConfigOption(&#39;CPL_DEBUG&#39;, &#39;OFF&#39;)</span>
            <span class="c">#~ gdal.GetConfigOption(&#39;GDAL_PAM_ENABLED&#39;, &quot;NULL&quot;)</span>

            <span class="c"># extra options</span>
            <span class="c"># @TODO</span>

        <span class="k">finally</span><span class="p">:</span>
            <span class="n">settings</span><span class="o">.</span><span class="n">endGroup</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="GDALPreferencesPage.save"><a class="viewcode-back" href="../../../api/gsdview.gdalbackend.widgets.html#gsdview.gdalbackend.widgets.GDALPreferencesPage.save">[docs]</a>    <span class="k">def</span> <span class="nf">save</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">settings</span><span class="p">):</span>
        <span class="n">settings</span><span class="o">.</span><span class="n">beginGroup</span><span class="p">(</span><span class="s">&#39;gdal&#39;</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>

            <span class="c"># cache</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">cacheCheckBox</span><span class="o">.</span><span class="n">isChecked</span><span class="p">():</span>
                <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cacheSpinBox</span><span class="o">.</span><span class="n">value</span><span class="p">()</span> <span class="o">*</span> <span class="mi">1024</span> <span class="o">**</span> <span class="mi">2</span>
                <span class="n">settings</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="s">&#39;GDAL_CACHEMAX&#39;</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">settings</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="s">&#39;GDAL_CACHEMAX&#39;</span><span class="p">)</span>

            <span class="c"># GDAL data dir</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gdalDataCheckBox</span><span class="o">.</span><span class="n">isChecked</span><span class="p">():</span>
                <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gdalDataDirEntryWidget</span><span class="o">.</span><span class="n">text</span><span class="p">()</span>
                <span class="n">settings</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="s">&#39;GDAL_DATA&#39;</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">settings</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="s">&#39;GDAL_DATA&#39;</span><span class="p">)</span>

            <span class="c"># GDAL_SKIP</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">skipCheckBox</span><span class="o">.</span><span class="n">isChecked</span><span class="p">():</span>
                <span class="n">settings</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="s">&#39;GDAL_SKIP&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">skipLineEdit</span><span class="o">.</span><span class="n">text</span><span class="p">())</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">settings</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="s">&#39;GDAL_SKIP&#39;</span><span class="p">)</span>

            <span class="c"># GDAL driver path</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gdalDriverPathCheckBox</span><span class="o">.</span><span class="n">isChecked</span><span class="p">():</span>
                <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gdalDriverPathEntryWidget</span><span class="o">.</span><span class="n">text</span><span class="p">()</span>
                <span class="n">settings</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="s">&#39;GDAL_DRIVER_PATH&#39;</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">settings</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="s">&#39;GDAL_DRIVER_PATH&#39;</span><span class="p">)</span>

            <span class="c"># OGR driver path</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">ogrDriverPathCheckBox</span><span class="o">.</span><span class="n">isChecked</span><span class="p">():</span>
                <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ogrDriverPathEntryWidget</span><span class="o">.</span><span class="n">text</span><span class="p">()</span>
                <span class="n">settings</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="s">&#39;OGR_DRIVER_PATH&#39;</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">settings</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="s">&#39;OGR_DRIVER_PATH&#39;</span><span class="p">)</span>

            <span class="c"># @TODO: complete</span>
            <span class="c">#~ gdal.GetConfigOption(&#39;CPL_DEBUG&#39;, &#39;OFF&#39;)</span>
            <span class="c">#~ gdal.GetConfigOption(&#39;GDAL_PAM_ENABLED&#39;, &quot;NULL&quot;)</span>

            <span class="c"># extra options</span>
            <span class="c"># @TODO</span>
        <span class="k">finally</span><span class="p">:</span>
            <span class="n">settings</span><span class="o">.</span><span class="n">endGroup</span><span class="p">()</span>

</div></div>
<div class="viewcode-block" id="BackendPreferencesPage"><a class="viewcode-back" href="../../../api/gsdview.gdalbackend.widgets.html#gsdview.gdalbackend.widgets.BackendPreferencesPage">[docs]</a><span class="k">class</span> <span class="nc">BackendPreferencesPage</span><span class="p">(</span><span class="n">GDALPreferencesPage</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">flags</span><span class="o">=</span><span class="n">QtCore</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">WindowFlags</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">BackendPreferencesPage</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">flags</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="c">#self.setupUi(self)</span>

        <span class="c"># GDAL backend</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="s">&#39;Show overview items in the tree view.&#39;</span>
        <span class="n">tip</span> <span class="o">=</span> <span class="n">msg</span> <span class="o">+</span> <span class="s">&quot;</span><span class="se">\n</span><span class="s">NOTE: this setting doesn&#39;t affects items already open.&quot;</span>
        <span class="n">checkbox</span> <span class="o">=</span> <span class="n">QtGui</span><span class="o">.</span><span class="n">QCheckBox</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tr</span><span class="p">(</span><span class="n">msg</span><span class="p">),</span> <span class="n">toolTip</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">tr</span><span class="p">(</span><span class="n">tip</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">showOverviewCheckbox</span> <span class="o">=</span> <span class="n">checkbox</span>

        <span class="n">layout</span> <span class="o">=</span> <span class="n">QtGui</span><span class="o">.</span><span class="n">QVBoxLayout</span><span class="p">()</span>
        <span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">checkbox</span><span class="p">)</span>
        <span class="c">#~ layout.addSpacerItem(QtGui.QSpacerItem(0, 20))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">groupbox</span> <span class="o">=</span> <span class="n">QtGui</span><span class="o">.</span><span class="n">QGroupBox</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tr</span><span class="p">(</span><span class="s">&#39;GDAL Backend Preferences&#39;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">groupbox</span><span class="o">.</span><span class="n">setLayout</span><span class="p">(</span><span class="n">layout</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">verticalLayout</span><span class="o">.</span><span class="n">insertWidget</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">groupbox</span><span class="p">)</span>

<div class="viewcode-block" id="BackendPreferencesPage.load"><a class="viewcode-back" href="../../../api/gsdview.gdalbackend.widgets.html#gsdview.gdalbackend.widgets.BackendPreferencesPage.load">[docs]</a>    <span class="k">def</span> <span class="nf">load</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">settings</span><span class="p">):</span>
        <span class="n">settings</span><span class="o">.</span><span class="n">beginGroup</span><span class="p">(</span><span class="s">&#39;gdalbackend&#39;</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="c"># show overviews in the treeview</span>
            <span class="n">value</span> <span class="o">=</span> <span class="n">settings</span><span class="o">.</span><span class="n">value</span><span class="p">(</span><span class="s">&#39;visible_overview_items&#39;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
                <span class="c"># @COMPATIBILITY: presumably a bug in PyQt4 (4.7.2)</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">basestring</span><span class="p">):</span>
                    <span class="n">value</span> <span class="o">=</span> <span class="bp">True</span> <span class="k">if</span> <span class="n">value</span> <span class="ow">in</span> <span class="p">(</span><span class="s">&#39;true&#39;</span><span class="p">,</span> <span class="s">&#39;True&#39;</span><span class="p">)</span> <span class="k">else</span> <span class="bp">False</span>

                <span class="bp">self</span><span class="o">.</span><span class="n">showOverviewCheckbox</span><span class="o">.</span><span class="n">setChecked</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
        <span class="k">finally</span><span class="p">:</span>
            <span class="n">settings</span><span class="o">.</span><span class="n">endGroup</span><span class="p">()</span>

        <span class="nb">super</span><span class="p">(</span><span class="n">BackendPreferencesPage</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">settings</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="BackendPreferencesPage.save"><a class="viewcode-back" href="../../../api/gsdview.gdalbackend.widgets.html#gsdview.gdalbackend.widgets.BackendPreferencesPage.save">[docs]</a>    <span class="k">def</span> <span class="nf">save</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">settings</span><span class="p">):</span>
        <span class="n">settings</span><span class="o">.</span><span class="n">beginGroup</span><span class="p">(</span><span class="s">&#39;gdalbackend&#39;</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="c"># show overviews in the treeview</span>
            <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">showOverviewCheckbox</span><span class="o">.</span><span class="n">isChecked</span><span class="p">()</span>
            <span class="n">settings</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="s">&#39;visible_overview_items&#39;</span><span class="p">,</span> <span class="nb">bool</span><span class="p">(</span><span class="n">value</span><span class="p">))</span>
        <span class="k">finally</span><span class="p">:</span>
            <span class="n">settings</span><span class="o">.</span><span class="n">endGroup</span><span class="p">()</span>

        <span class="nb">super</span><span class="p">(</span><span class="n">BackendPreferencesPage</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">settings</span><span class="p">)</span>

</div></div>
<div class="viewcode-block" id="KeyPressEater"><a class="viewcode-back" href="../../../api/gsdview.gdalbackend.widgets.html#gsdview.gdalbackend.widgets.KeyPressEater">[docs]</a><span class="k">class</span> <span class="nc">KeyPressEater</span><span class="p">(</span><span class="n">QtCore</span><span class="o">.</span><span class="n">QObject</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">keys</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">KeyPressEater</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="n">parent</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">keys</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">keys</span> <span class="o">=</span> <span class="n">keys</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">keys</span> <span class="o">=</span> <span class="p">[</span><span class="n">QtCore</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">Key_Enter</span><span class="p">,</span> <span class="n">QtCore</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">Key_Return</span><span class="p">]</span>

<div class="viewcode-block" id="KeyPressEater.eventFilter"><a class="viewcode-back" href="../../../api/gsdview.gdalbackend.widgets.html#gsdview.gdalbackend.widgets.KeyPressEater.eventFilter">[docs]</a>    <span class="k">def</span> <span class="nf">eventFilter</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">type</span><span class="p">()</span> <span class="o">==</span> <span class="n">QtCore</span><span class="o">.</span><span class="n">QEvent</span><span class="o">.</span><span class="n">KeyPress</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">key</span><span class="p">()</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">keys</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">True</span>

        <span class="c"># standard event processing</span>
        <span class="k">return</span> <span class="nb">super</span><span class="p">(</span><span class="n">KeyPressEater</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">eventFilter</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">event</span><span class="p">)</span>

</div></div>
<span class="n">MetadataWidgetBase</span> <span class="o">=</span> <span class="n">qt4support</span><span class="o">.</span><span class="n">getuiform</span><span class="p">(</span><span class="s">&#39;metadata&#39;</span><span class="p">,</span> <span class="n">__name__</span><span class="p">)</span>


<div class="viewcode-block" id="MetadataWidget"><a class="viewcode-back" href="../../../api/gsdview.gdalbackend.widgets.html#gsdview.gdalbackend.widgets.MetadataWidget">[docs]</a><span class="k">class</span> <span class="nc">MetadataWidget</span><span class="p">(</span><span class="n">QtGui</span><span class="o">.</span><span class="n">QWidget</span><span class="p">,</span> <span class="n">MetadataWidgetBase</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;Widget for matadata display.</span>

<span class="sd">    :SIGNALS:</span>

<span class="sd">        * :attr:`domainChanged`</span>

<span class="sd">    &#39;&#39;&#39;</span>

    <span class="c">#: SIGNAL: it is emitted when metadata domain changes</span>
    <span class="c">#:</span>
    <span class="c">#: :C++ signature: `void domainChanged(str)`</span>
    <span class="n">domainChanged</span> <span class="o">=</span> <span class="n">QtCore</span><span class="o">.</span><span class="n">Signal</span><span class="p">(</span><span class="nb">str</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">flags</span><span class="o">=</span><span class="n">QtCore</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">WindowFlags</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">MetadataWidget</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">flags</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setupUi</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

        <span class="c"># signals</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">domainComboBox</span><span class="o">.</span><span class="n">currentIndexChanged</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span>
                                                            <span class="bp">self</span><span class="o">.</span><span class="n">domainChanged</span><span class="p">)</span>

        <span class="c"># icons</span>
        <span class="n">icon</span> <span class="o">=</span> <span class="n">QtGui</span><span class="o">.</span><span class="n">QIcon</span><span class="p">(</span>
                <span class="s">&#39;:/trolltech/dialogs/qprintpreviewdialog/images/print-24.png&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">printButton</span><span class="o">.</span><span class="n">setIcon</span><span class="p">(</span><span class="n">icon</span><span class="p">)</span>
        <span class="n">icon</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">style</span><span class="p">()</span><span class="o">.</span><span class="n">standardIcon</span><span class="p">(</span><span class="n">QtGui</span><span class="o">.</span><span class="n">QStyle</span><span class="o">.</span><span class="n">SP_DialogSaveButton</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">exportButton</span><span class="o">.</span><span class="n">setIcon</span><span class="p">(</span><span class="n">icon</span><span class="p">)</span>

        <span class="c"># contect menu</span>
        <span class="n">qt4support</span><span class="o">.</span><span class="n">setViewContextActions</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tableWidget</span><span class="p">)</span>

        <span class="c"># buttons</span>
        <span class="n">printAction</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">findChild</span><span class="p">(</span><span class="n">QtGui</span><span class="o">.</span><span class="n">QAction</span><span class="p">,</span> <span class="s">&#39;printAction&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">printButton</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">printAction</span><span class="o">.</span><span class="n">triggered</span><span class="p">)</span>

        <span class="n">saveAction</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">findChild</span><span class="p">(</span><span class="n">QtGui</span><span class="o">.</span><span class="n">QAction</span><span class="p">,</span> <span class="s">&#39;saveAsAction&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">exportButton</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">saveAction</span><span class="o">.</span><span class="n">triggered</span><span class="p">)</span>

        <span class="c"># @TODO:check</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_keyeater</span> <span class="o">=</span> <span class="n">KeyPressEater</span><span class="p">(</span><span class="n">parent</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">installEventFilter</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_keyeater</span><span class="p">)</span>
        <span class="c">#self.domainComboBox.lineEdit().installEventFilter(self._keyeater)</span>

<div class="viewcode-block" id="MetadataWidget.domainsEnabled"><a class="viewcode-back" href="../../../api/gsdview.gdalbackend.widgets.html#gsdview.gdalbackend.widgets.MetadataWidget.domainsEnabled">[docs]</a>    <span class="k">def</span> <span class="nf">domainsEnabled</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">domainLabel</span><span class="o">.</span><span class="n">isVisible</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="MetadataWidget.enableDomains"><a class="viewcode-back" href="../../../api/gsdview.gdalbackend.widgets.html#gsdview.gdalbackend.widgets.MetadataWidget.enableDomains">[docs]</a>    <span class="k">def</span> <span class="nf">enableDomains</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">enabled</span><span class="o">=</span><span class="bp">True</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">domainLabel</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="n">enabled</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">domainComboBox</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="n">enabled</span><span class="p">)</span>

        <span class="n">layout</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">metadataHorizontalLayout</span>
        <span class="k">if</span> <span class="n">enabled</span><span class="p">:</span>
            <span class="n">spacer</span> <span class="o">=</span> <span class="n">layout</span><span class="o">.</span><span class="n">itemAt</span><span class="p">(</span><span class="n">layout</span><span class="o">.</span><span class="n">count</span><span class="p">()</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">spacer</span><span class="p">,</span> <span class="n">QtGui</span><span class="o">.</span><span class="n">QSpacerItem</span><span class="p">):</span>
                <span class="n">layout</span><span class="o">.</span><span class="n">removeItem</span><span class="p">(</span><span class="n">spacer</span><span class="p">)</span>
                <span class="k">assert</span> <span class="n">layout</span><span class="o">.</span><span class="n">count</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">2</span>
                <span class="n">layout</span><span class="o">.</span><span class="n">insertItem</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">spacer</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">spacer</span> <span class="o">=</span> <span class="n">layout</span><span class="o">.</span><span class="n">itemAt</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">spacer</span><span class="p">,</span> <span class="n">QtGui</span><span class="o">.</span><span class="n">QSpacerItem</span><span class="p">):</span>
                <span class="n">layout</span><span class="o">.</span><span class="n">removeItem</span><span class="p">(</span><span class="n">spacer</span><span class="p">)</span>
                <span class="n">layout</span><span class="o">.</span><span class="n">addItem</span><span class="p">(</span><span class="n">spacer</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="MetadataWidget.buttonsEnabled"><a class="viewcode-back" href="../../../api/gsdview.gdalbackend.widgets.html#gsdview.gdalbackend.widgets.MetadataWidget.buttonsEnabled">[docs]</a>    <span class="k">def</span> <span class="nf">buttonsEnabled</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">exportButton</span><span class="o">.</span><span class="n">isVisible</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="MetadataWidget.enableButtons"><a class="viewcode-back" href="../../../api/gsdview.gdalbackend.widgets.html#gsdview.gdalbackend.widgets.MetadataWidget.enableButtons">[docs]</a>    <span class="k">def</span> <span class="nf">enableButtons</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">enabed</span><span class="o">=</span><span class="bp">True</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">exportButton</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="n">enabed</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">printButton</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="n">enabed</span><span class="p">)</span>
        <span class="n">margins</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">verticalLayout</span><span class="o">.</span><span class="n">contentsMargins</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">enabed</span><span class="p">:</span>
            <span class="n">margins</span><span class="o">.</span><span class="n">setBottom</span><span class="p">(</span><span class="mi">9</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">margins</span><span class="o">.</span><span class="n">setBottom</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">verticalLayout</span><span class="o">.</span><span class="n">setContentsMargins</span><span class="p">(</span><span class="n">margins</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="MetadataWidget.domain"><a class="viewcode-back" href="../../../api/gsdview.gdalbackend.widgets.html#gsdview.gdalbackend.widgets.MetadataWidget.domain">[docs]</a>    <span class="k">def</span> <span class="nf">domain</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">domainComboBox</span><span class="o">.</span><span class="n">currentText</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="MetadataWidget.setDomain"><a class="viewcode-back" href="../../../api/gsdview.gdalbackend.widgets.html#gsdview.gdalbackend.widgets.MetadataWidget.setDomain">[docs]</a>    <span class="k">def</span> <span class="nf">setDomain</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">domain</span><span class="p">):</span>
        <span class="n">index</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">domainComboBox</span><span class="o">.</span><span class="n">findText</span><span class="p">(</span><span class="n">domain</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">index</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">False</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">domainComboBox</span><span class="o">.</span><span class="n">setCurrentIndex</span><span class="p">(</span><span class="n">index</span><span class="p">)</span>
            <span class="k">return</span> <span class="bp">True</span>
</div>
<div class="viewcode-block" id="MetadataWidget.setMetadata"><a class="viewcode-back" href="../../../api/gsdview.gdalbackend.widgets.html#gsdview.gdalbackend.widgets.MetadataWidget.setMetadata">[docs]</a>    <span class="k">def</span> <span class="nf">setMetadata</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">metadatalist</span><span class="p">):</span>
        <span class="n">tablewidget</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tableWidget</span>

        <span class="n">qt4support</span><span class="o">.</span><span class="n">clearTable</span><span class="p">(</span><span class="n">tablewidget</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">metadatalist</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">metadataNumValue</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
            <span class="k">return</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">metadataNumValue</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">metadatalist</span><span class="p">)))</span>
        <span class="n">tablewidget</span><span class="o">.</span><span class="n">setRowCount</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">metadatalist</span><span class="p">))</span>
        <span class="n">sortingenabled</span> <span class="o">=</span> <span class="n">tablewidget</span><span class="o">.</span><span class="n">isSortingEnabled</span><span class="p">()</span>
        <span class="n">tablewidget</span><span class="o">.</span><span class="n">setSortingEnabled</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">row</span><span class="p">,</span> <span class="n">data</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">metadatalist</span><span class="p">):</span>
            <span class="n">name</span><span class="p">,</span> <span class="n">value</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">&#39;=&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
            <span class="n">tablewidget</span><span class="o">.</span><span class="n">setItem</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">QtGui</span><span class="o">.</span><span class="n">QTableWidgetItem</span><span class="p">(</span><span class="n">name</span><span class="p">))</span>
            <span class="n">tablewidget</span><span class="o">.</span><span class="n">setItem</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">QtGui</span><span class="o">.</span><span class="n">QTableWidgetItem</span><span class="p">(</span><span class="n">value</span><span class="p">))</span>

        <span class="c"># Fix table header behaviour</span>
        <span class="n">tablewidget</span><span class="o">.</span><span class="n">setSortingEnabled</span><span class="p">(</span><span class="n">sortingenabled</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="MetadataWidget.resetMetadata"><a class="viewcode-back" href="../../../api/gsdview.gdalbackend.widgets.html#gsdview.gdalbackend.widgets.MetadataWidget.resetMetadata">[docs]</a>    <span class="k">def</span> <span class="nf">resetMetadata</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">metadataNumValue</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s">&#39;0&#39;</span><span class="p">)</span>
        <span class="n">qt4support</span><span class="o">.</span><span class="n">clearTable</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tableWidget</span><span class="p">)</span>

</div></div>
<span class="n">OverviewWidgetBase</span> <span class="o">=</span> <span class="n">qt4support</span><span class="o">.</span><span class="n">getuiform</span><span class="p">(</span><span class="s">&#39;overview&#39;</span><span class="p">,</span> <span class="n">__name__</span><span class="p">)</span>


<div class="viewcode-block" id="OverviewWidget"><a class="viewcode-back" href="../../../api/gsdview.gdalbackend.widgets.html#gsdview.gdalbackend.widgets.OverviewWidget">[docs]</a><span class="k">class</span> <span class="nc">OverviewWidget</span><span class="p">(</span><span class="n">QtGui</span><span class="o">.</span><span class="n">QWidget</span><span class="p">,</span> <span class="n">OverviewWidgetBase</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;Widget for overview management.</span>

<span class="sd">    Display existing overview levels and allow to to sibmit overview</span>
<span class="sd">    compitation requests.</span>

<span class="sd">    :SIGNALS:</span>

<span class="sd">        * :attr:`overviewComputationRequest`</span>

<span class="sd">    &#39;&#39;&#39;</span>

    <span class="c">#: SIGNAL: it is emitted when a time expensive computation of overviews</span>
    <span class="c">#: is required</span>
    <span class="c">#:</span>
    <span class="c">#: :C++ signature: `void overviewComputationRequest()`</span>
    <span class="n">overviewComputationRequest</span> <span class="o">=</span> <span class="n">QtCore</span><span class="o">.</span><span class="n">Signal</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">flags</span><span class="o">=</span><span class="n">QtCore</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">WindowFlags</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
                 <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">OverviewWidget</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">flags</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setupUi</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

        <span class="c"># @COMPATIBILITY: GDAL &gt;= 1.7.0</span>
        <span class="k">if</span> <span class="n">gdal</span><span class="o">.</span><span class="n">VersionInfo</span><span class="p">()</span> <span class="o">&lt;</span> <span class="s">&#39;1700&#39;</span><span class="p">:</span>
            <span class="n">index</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">resamplingMethodComboBox</span><span class="o">.</span><span class="n">findText</span><span class="p">(</span><span class="s">&#39;cubic&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">resamplingMethodComboBox</span><span class="o">.</span><span class="n">removeItem</span><span class="p">(</span><span class="n">index</span><span class="p">)</span>

        <span class="c"># @COMPATIBILITY: GDAL &gt;= 1.7.0</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">gdal</span><span class="o">.</span><span class="n">Band</span><span class="p">,</span> <span class="s">&#39;HasArbitraryOverviews&#39;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">hasArbitraryOverviewsLabel</span><span class="o">.</span><span class="n">hide</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">hasArbitraryOverviewsValue</span><span class="o">.</span><span class="n">hide</span><span class="p">()</span>

        <span class="n">model</span> <span class="o">=</span> <span class="n">QtGui</span><span class="o">.</span><span class="n">QStandardItemModel</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="n">model</span><span class="o">.</span><span class="n">setColumnCount</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
        <span class="n">model</span><span class="o">.</span><span class="n">itemChanged</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_updateStartButton</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ovrTreeView</span><span class="o">.</span><span class="n">setModel</span><span class="p">(</span><span class="n">model</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_readonly</span> <span class="o">=</span> <span class="bp">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_item</span> <span class="o">=</span> <span class="bp">None</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">recomputeCheckBox</span><span class="o">.</span><span class="n">toggled</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_updateStartButton</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">startButton</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">overviewComputationRequest</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">item</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">setItem</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">reset</span><span class="p">()</span>

<div class="viewcode-block" id="OverviewWidget.readOnly"><a class="viewcode-back" href="../../../api/gsdview.gdalbackend.widgets.html#gsdview.gdalbackend.widgets.OverviewWidget.readOnly">[docs]</a>    <span class="k">def</span> <span class="nf">readOnly</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_readonly</span>
</div>
<div class="viewcode-block" id="OverviewWidget.setReadOnly"><a class="viewcode-back" href="../../../api/gsdview.gdalbackend.widgets.html#gsdview.gdalbackend.widgets.OverviewWidget.setReadOnly">[docs]</a>    <span class="k">def</span> <span class="nf">setReadOnly</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">readonly</span><span class="o">=</span><span class="bp">True</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_readonly</span> <span class="o">=</span> <span class="n">readonly</span>
        <span class="n">visible</span> <span class="o">=</span> <span class="nb">bool</span><span class="p">(</span><span class="ow">not</span> <span class="n">readonly</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">optionsGroupBox</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="n">visible</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">addLevelButton</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="n">visible</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">addLevelSpinBox</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="n">visible</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ovrTreeView</span><span class="o">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="n">visible</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="OverviewWidget.reset"><a class="viewcode-back" href="../../../api/gsdview.gdalbackend.widgets.html#gsdview.gdalbackend.widgets.OverviewWidget.reset">[docs]</a>    <span class="k">def</span> <span class="nf">reset</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ovrTreeView</span><span class="o">.</span><span class="n">model</span><span class="p">()</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">overviewCountValue</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s">&#39;0&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">hasArbitraryOverviewsValue</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fullSizeValue</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">resamplingMethodComboBox</span><span class="o">.</span><span class="n">setCurrentIndex</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">compressionComboBox</span><span class="o">.</span><span class="n">setCurrentIndex</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">photointComboBox</span><span class="o">.</span><span class="n">setCurrentIndex</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">interleavingComboBox</span><span class="o">.</span><span class="n">setCurrentIndex</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">bigtiffComboBox</span><span class="o">.</span><span class="n">setCurrentIndex</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">readonlyCheckBox</span><span class="o">.</span><span class="n">setChecked</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rrdCheckBox</span><span class="o">.</span><span class="n">setChecked</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">recomputeCheckBox</span><span class="o">.</span><span class="n">setChecked</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">startButton</span><span class="o">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">addLevelSpinBox</span><span class="o">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">addLevelButton</span><span class="o">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_item</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">addLevelButton</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">disconnect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">addLevel</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_item</span> <span class="o">=</span> <span class="bp">None</span>
</div>
    <span class="k">def</span> <span class="nf">_addLevel</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">level</span><span class="p">,</span> <span class="n">xsize</span><span class="p">,</span> <span class="n">ysize</span><span class="p">,</span> <span class="n">checked</span><span class="o">=</span><span class="n">QtCore</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">Unchecked</span><span class="p">,</span>
                  <span class="n">locked</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
        <span class="n">model</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ovrTreeView</span><span class="o">.</span><span class="n">model</span><span class="p">()</span>

        <span class="n">check</span> <span class="o">=</span> <span class="n">QtGui</span><span class="o">.</span><span class="n">QStandardItem</span><span class="p">()</span>
        <span class="n">check</span><span class="o">.</span><span class="n">setCheckable</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>
        <span class="n">check</span><span class="o">.</span><span class="n">setCheckState</span><span class="p">(</span><span class="n">checked</span><span class="p">)</span>

        <span class="n">ovrfact</span> <span class="o">=</span> <span class="n">QtGui</span><span class="o">.</span><span class="n">QStandardItem</span><span class="p">()</span>
        <span class="n">ovrfact</span><span class="o">.</span><span class="n">setData</span><span class="p">(</span><span class="n">level</span><span class="p">,</span> <span class="n">QtCore</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">DisplayRole</span><span class="p">)</span>

        <span class="n">size</span> <span class="o">=</span> <span class="n">QtGui</span><span class="o">.</span><span class="n">QStandardItem</span><span class="p">(</span><span class="s">&#39;</span><span class="si">%d</span><span class="s">x</span><span class="si">%d</span><span class="s">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">ysize</span><span class="p">,</span> <span class="n">xsize</span><span class="p">))</span>

        <span class="n">model</span><span class="o">.</span><span class="n">appendRow</span><span class="p">([</span><span class="n">check</span><span class="p">,</span> <span class="n">ovrfact</span><span class="p">,</span> <span class="n">size</span><span class="p">])</span>

        <span class="k">if</span> <span class="n">locked</span><span class="p">:</span>
            <span class="c">#model.item(row, 0).setEnabled(False)</span>
            <span class="c">#model.item(row, 0).setEditable(False) # doesn&#39;t work</span>
            <span class="n">check</span><span class="o">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>
            <span class="n">font</span> <span class="o">=</span> <span class="n">ovrfact</span><span class="o">.</span><span class="n">font</span><span class="p">()</span>
            <span class="n">font</span><span class="o">.</span><span class="n">setBold</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>
            <span class="n">check</span><span class="o">.</span><span class="n">setFont</span><span class="p">(</span><span class="n">font</span><span class="p">)</span>
            <span class="n">ovrfact</span><span class="o">.</span><span class="n">setFont</span><span class="p">(</span><span class="n">font</span><span class="p">)</span>
            <span class="n">size</span><span class="o">.</span><span class="n">setFont</span><span class="p">(</span><span class="n">font</span><span class="p">)</span>

<div class="viewcode-block" id="OverviewWidget.setItem"><a class="viewcode-back" href="../../../api/gsdview.gdalbackend.widgets.html#gsdview.gdalbackend.widgets.OverviewWidget.setItem">[docs]</a>    <span class="k">def</span> <span class="nf">setItem</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">reset</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">item</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="k">return</span>

        <span class="k">assert</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="s">&#39;GetOverviewCount&#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">gdal</span><span class="o">.</span><span class="n">DataTypeIsComplex</span><span class="p">(</span><span class="n">item</span><span class="o">.</span><span class="n">DataType</span><span class="p">):</span>
            <span class="n">index</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">resamplingMethodComboBox</span><span class="o">.</span><span class="n">findText</span><span class="p">(</span><span class="s">&#39;average_magphase&#39;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">index</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">resamplingMethodComboBox</span><span class="o">.</span><span class="n">setCurrentIndex</span><span class="p">(</span><span class="n">index</span><span class="p">)</span>

        <span class="n">ovrcount</span> <span class="o">=</span> <span class="n">item</span><span class="o">.</span><span class="n">GetOverviewCount</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">overviewCountValue</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">ovrcount</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fullSizeValue</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s">&#39;</span><span class="si">%d</span><span class="s">x</span><span class="si">%d</span><span class="s">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">item</span><span class="o">.</span><span class="n">YSize</span><span class="p">,</span> <span class="n">item</span><span class="o">.</span><span class="n">XSize</span><span class="p">))</span>
        <span class="c"># @COMPATIBILITY: GDAL &gt;= 1.7.0</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">gdal</span><span class="o">.</span><span class="n">Band</span><span class="p">,</span> <span class="s">&#39;HasArbitraryOverviews&#39;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">hasArbitraryOverviewsValue</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span>
                                            <span class="nb">str</span><span class="p">(</span><span class="n">item</span><span class="o">.</span><span class="n">HasArbitraryOverviews</span><span class="p">()))</span>

        <span class="n">view</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ovrTreeView</span>

        <span class="c"># Add existing overviews</span>
        <span class="n">levels</span> <span class="o">=</span> <span class="n">gdalsupport</span><span class="o">.</span><span class="n">ovrLevels</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">index</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">ovrcount</span><span class="p">):</span>
            <span class="n">ovr</span> <span class="o">=</span> <span class="n">item</span><span class="o">.</span><span class="n">GetOverview</span><span class="p">(</span><span class="n">index</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_addLevel</span><span class="p">(</span><span class="n">levels</span><span class="p">[</span><span class="n">index</span><span class="p">],</span> <span class="n">ovr</span><span class="o">.</span><span class="n">XSize</span><span class="p">,</span> <span class="n">ovr</span><span class="o">.</span><span class="n">YSize</span><span class="p">,</span>
                           <span class="n">QtCore</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">Checked</span><span class="p">,</span> <span class="bp">True</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_readonly</span><span class="p">:</span>
            <span class="c"># Add powers of two</span>
            <span class="n">xexp</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">log2</span><span class="p">(</span><span class="n">item</span><span class="o">.</span><span class="n">XSize</span><span class="p">))</span>
            <span class="n">yexp</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">log2</span><span class="p">(</span><span class="n">item</span><span class="o">.</span><span class="n">YSize</span><span class="p">))</span>
            <span class="n">mexexp</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">xexp</span><span class="p">,</span> <span class="n">yexp</span><span class="p">)</span>
            <span class="n">mexexp</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">mexexp</span> <span class="o">-</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">exp_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">mexexp</span><span class="p">):</span>
                <span class="n">level</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">**</span> <span class="n">exp_</span>
                <span class="k">if</span> <span class="n">level</span> <span class="ow">in</span> <span class="n">levels</span><span class="p">:</span>
                    <span class="k">continue</span>

                <span class="n">xsize</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">item</span><span class="o">.</span><span class="n">XSize</span> <span class="o">+</span> <span class="n">level</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">//</span> <span class="n">level</span>
                <span class="n">ysize</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">item</span><span class="o">.</span><span class="n">YSize</span> <span class="o">+</span> <span class="n">level</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">//</span> <span class="n">level</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_addLevel</span><span class="p">(</span><span class="n">level</span><span class="p">,</span> <span class="n">xsize</span><span class="p">,</span> <span class="n">ysize</span><span class="p">)</span>

        <span class="n">view</span><span class="o">.</span><span class="n">header</span><span class="p">()</span><span class="o">.</span><span class="n">resizeSections</span><span class="p">(</span><span class="n">QtGui</span><span class="o">.</span><span class="n">QHeaderView</span><span class="o">.</span><span class="n">ResizeToContents</span><span class="p">)</span>
        <span class="n">view</span><span class="o">.</span><span class="n">sortByColumn</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">QtCore</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">AscendingOrder</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">addLevelSpinBox</span><span class="o">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">addLevelButton</span><span class="o">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">addLevelButton</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">addLevel</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_item</span> <span class="o">=</span> <span class="n">item</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_updateStartButton</span><span class="p">()</span>
</div>
    <span class="k">def</span> <span class="nf">_listedLevels</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">model</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ovrTreeView</span><span class="o">.</span><span class="n">model</span><span class="p">()</span>
        <span class="n">levels</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">index</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">rowCount</span><span class="p">()):</span>
            <span class="n">item</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">item</span><span class="p">(</span><span class="n">index</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
            <span class="n">levels</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">item</span><span class="o">.</span><span class="n">text</span><span class="p">()))</span>

        <span class="k">return</span> <span class="n">levels</span>

    <span class="k">def</span> <span class="nf">_checkedLevels</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">model</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ovrTreeView</span><span class="o">.</span><span class="n">model</span><span class="p">()</span>
        <span class="n">levels</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">index</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">rowCount</span><span class="p">()):</span>
            <span class="n">checkitem</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">item</span><span class="p">(</span><span class="n">index</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">checkitem</span><span class="o">.</span><span class="n">checkState</span><span class="p">()</span> <span class="o">==</span> <span class="n">QtCore</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">Checked</span><span class="p">:</span>
                <span class="n">item</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">item</span><span class="p">(</span><span class="n">index</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
                <span class="n">levels</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">item</span><span class="o">.</span><span class="n">text</span><span class="p">()))</span>

        <span class="k">return</span> <span class="n">levels</span>

    <span class="k">def</span> <span class="nf">_newLevels</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">model</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ovrTreeView</span><span class="o">.</span><span class="n">model</span><span class="p">()</span>
        <span class="n">levels</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">index</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">rowCount</span><span class="p">()):</span>
            <span class="n">checkitem</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">item</span><span class="p">(</span><span class="n">index</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">checkitem</span><span class="o">.</span><span class="n">checkState</span><span class="p">()</span> <span class="o">==</span> <span class="n">QtCore</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">Checked</span> <span class="ow">and</span>
                                                        <span class="n">checkitem</span><span class="o">.</span><span class="n">isEnabled</span><span class="p">()):</span>
                <span class="n">item</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">item</span><span class="p">(</span><span class="n">index</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
                <span class="n">levels</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">item</span><span class="o">.</span><span class="n">text</span><span class="p">()))</span>

        <span class="k">return</span> <span class="n">levels</span>

    <span class="nd">@QtCore.Slot</span><span class="p">()</span>
    <span class="nd">@QtCore.Slot</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>
<div class="viewcode-block" id="OverviewWidget.addLevel"><a class="viewcode-back" href="../../../api/gsdview.gdalbackend.widgets.html#gsdview.gdalbackend.widgets.OverviewWidget.addLevel">[docs]</a>    <span class="k">def</span> <span class="nf">addLevel</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">level</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">xsize</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">ysize</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">checked</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">level</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">level</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">addLevelSpinBox</span><span class="o">.</span><span class="n">value</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">level</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_listedLevels</span><span class="p">():</span>
            <span class="k">return</span>

        <span class="k">if</span> <span class="n">xsize</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_item</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s">&#39;no reference band is set: &#39;</span>
                                 <span class="s">&#39;xsize and ysize have to be provided.&#39;</span><span class="p">)</span>
            <span class="n">xsize</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_item</span><span class="o">.</span><span class="n">XSize</span> <span class="o">+</span> <span class="n">level</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">//</span> <span class="n">level</span>

        <span class="k">if</span> <span class="n">ysize</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_item</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s">&#39;no reference band is set: &#39;</span>
                                 <span class="s">&#39;xsize and ysize have to be provided.&#39;</span><span class="p">)</span>
            <span class="n">ysize</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_item</span><span class="o">.</span><span class="n">YSize</span> <span class="o">+</span> <span class="n">level</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">//</span> <span class="n">level</span>

        <span class="k">if</span> <span class="n">checked</span><span class="p">:</span>
            <span class="n">checked</span> <span class="o">=</span> <span class="n">QtCore</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">Checked</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">checked</span> <span class="o">=</span> <span class="n">QtCore</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">Unchecked</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_addLevel</span><span class="p">(</span><span class="n">level</span><span class="p">,</span> <span class="n">xsize</span><span class="p">,</span> <span class="n">ysize</span><span class="p">,</span> <span class="n">checked</span><span class="p">)</span>

        <span class="n">view</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ovrTreeView</span>
        <span class="n">view</span><span class="o">.</span><span class="n">header</span><span class="p">()</span><span class="o">.</span><span class="n">resizeSections</span><span class="p">(</span><span class="n">QtGui</span><span class="o">.</span><span class="n">QHeaderView</span><span class="o">.</span><span class="n">ResizeToContents</span><span class="p">)</span>
        <span class="n">view</span><span class="o">.</span><span class="n">sortByColumn</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">QtCore</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">AscendingOrder</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_updateStartButton</span><span class="p">()</span>
</div>
    <span class="nd">@QtCore.Slot</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">_updateStartButton</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">recomputeCheckBox</span><span class="o">.</span><span class="n">isChecked</span><span class="p">()</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">_newLevels</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">startButton</span><span class="o">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">startButton</span><span class="o">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>

<div class="viewcode-block" id="OverviewWidget.optionlist"><a class="viewcode-back" href="../../../api/gsdview.gdalbackend.widgets.html#gsdview.gdalbackend.widgets.OverviewWidget.optionlist">[docs]</a>    <span class="k">def</span> <span class="nf">optionlist</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">args</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">rrdCheckBox</span><span class="o">.</span><span class="n">isChecked</span><span class="p">():</span>
            <span class="n">args</span><span class="o">.</span><span class="n">extend</span><span class="p">((</span><span class="s">&#39;--config&#39;</span><span class="p">,</span> <span class="s">&#39;USE_RRD&#39;</span><span class="p">,</span> <span class="s">&#39;YES&#39;</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">compressionComboBox</span><span class="o">.</span><span class="n">currentText</span><span class="p">()</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">(</span><span class="s">&#39;DEFAULT&#39;</span><span class="p">,</span>
                                                              <span class="s">&#39;None&#39;</span><span class="p">):</span>
                <span class="n">args</span><span class="o">.</span><span class="n">extend</span><span class="p">((</span><span class="s">&#39;--config&#39;</span><span class="p">,</span> <span class="s">&#39;COMPRESS_OVERVIEW&#39;</span><span class="p">,</span>
                             <span class="bp">self</span><span class="o">.</span><span class="n">compressionComboBox</span><span class="o">.</span><span class="n">currentText</span><span class="p">()))</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">photointComboBox</span><span class="o">.</span><span class="n">currentText</span><span class="p">()</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">(</span><span class="s">&#39;DEFAULT&#39;</span><span class="p">,</span> <span class="s">&#39;&#39;</span><span class="p">):</span>
                <span class="n">args</span><span class="o">.</span><span class="n">extend</span><span class="p">((</span><span class="s">&#39;--config&#39;</span><span class="p">,</span> <span class="s">&#39;PHOTOMETRIC_OVERVIEW&#39;</span><span class="p">,</span>
                             <span class="bp">self</span><span class="o">.</span><span class="n">photointComboBox</span><span class="o">.</span><span class="n">currentText</span><span class="p">()))</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">interleavingComboBox</span><span class="o">.</span><span class="n">currentText</span><span class="p">()</span> <span class="o">!=</span> <span class="s">&#39;DEFAULT&#39;</span><span class="p">:</span>
                <span class="n">args</span><span class="o">.</span><span class="n">extend</span><span class="p">((</span><span class="s">&#39;--config&#39;</span><span class="p">,</span> <span class="s">&#39;INTERLEAVE_OVERVIEW&#39;</span><span class="p">,</span>
                             <span class="bp">self</span><span class="o">.</span><span class="n">interleavingComboBox</span><span class="o">.</span><span class="n">currentText</span><span class="p">()))</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">bigtiffComboBox</span><span class="o">.</span><span class="n">currentText</span><span class="p">()</span> <span class="o">!=</span> <span class="s">&#39;DEFAULT&#39;</span><span class="p">:</span>
                <span class="n">args</span><span class="o">.</span><span class="n">extend</span><span class="p">((</span><span class="s">&#39;--config&#39;</span><span class="p">,</span> <span class="s">&#39;BIGTIFF_OVERVIEW&#39;</span><span class="p">,</span>
                             <span class="bp">self</span><span class="o">.</span><span class="n">bigtiffComboBox</span><span class="o">.</span><span class="n">currentText</span><span class="p">()))</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">readonlyCheckBox</span><span class="o">.</span><span class="n">isChecked</span><span class="p">():</span>
            <span class="n">args</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">&#39;-ro&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">resamplingMethodComboBox</span><span class="o">.</span><span class="n">currentText</span><span class="p">()</span> <span class="o">!=</span> <span class="s">&#39;DEFAULT&#39;</span><span class="p">:</span>
            <span class="n">args</span><span class="o">.</span><span class="n">extend</span><span class="p">((</span><span class="s">&#39;-r&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">resamplingMethodComboBox</span><span class="o">.</span><span class="n">currentText</span><span class="p">()))</span>

        <span class="n">args</span> <span class="o">=</span> <span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="n">args</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">args</span>
</div>
<div class="viewcode-block" id="OverviewWidget.levels"><a class="viewcode-back" href="../../../api/gsdview.gdalbackend.widgets.html#gsdview.gdalbackend.widgets.OverviewWidget.levels">[docs]</a>    <span class="k">def</span> <span class="nf">levels</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">recomputeCheckBox</span><span class="o">.</span><span class="n">isChecked</span><span class="p">():</span>
            <span class="n">levels</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_checkedLevels</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">levels</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_newLevels</span><span class="p">()</span>

        <span class="k">return</span> <span class="n">levels</span>

</div></div>
<div class="viewcode-block" id="SpecialOverviewWidget"><a class="viewcode-back" href="../../../api/gsdview.gdalbackend.widgets.html#gsdview.gdalbackend.widgets.SpecialOverviewWidget">[docs]</a><span class="k">class</span> <span class="nc">SpecialOverviewWidget</span><span class="p">(</span><span class="n">OverviewWidget</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;An overview widget that always performs overview recomputation.</span>

<span class="sd">    .. seealso:: :class:`OverviewWidget`</span>

<span class="sd">    &#39;&#39;&#39;</span>

<div class="viewcode-block" id="SpecialOverviewWidget.reset"><a class="viewcode-back" href="../../../api/gsdview.gdalbackend.widgets.html#gsdview.gdalbackend.widgets.SpecialOverviewWidget.reset">[docs]</a>    <span class="k">def</span> <span class="nf">reset</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">SpecialOverviewWidget</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">reset</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">recomputeCheckBox</span><span class="o">.</span><span class="n">setChecked</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">recomputeCheckBox</span><span class="o">.</span><span class="n">hide</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">recomputeLabel</span><span class="o">.</span><span class="n">hide</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="SpecialOverviewWidget.levels"><a class="viewcode-back" href="../../../api/gsdview.gdalbackend.widgets.html#gsdview.gdalbackend.widgets.SpecialOverviewWidget.levels">[docs]</a>    <span class="k">def</span> <span class="nf">levels</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_newLevels</span><span class="p">():</span>
            <span class="n">levels</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_checkedLevels</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">levels</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="k">return</span> <span class="n">levels</span>
</div>
    <span class="nd">@QtCore.Slot</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">_updateStartButton</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_newLevels</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">startButton</span><span class="o">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">startButton</span><span class="o">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>

</div>
<div class="viewcode-block" id="OverviewDialog"><a class="viewcode-back" href="../../../api/gsdview.gdalbackend.widgets.html#gsdview.gdalbackend.widgets.OverviewDialog">[docs]</a><span class="k">class</span> <span class="nc">OverviewDialog</span><span class="p">(</span><span class="n">QtGui</span><span class="o">.</span><span class="n">QDialog</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;Dialog for overview management.</span>

<span class="sd">    Display existing overview levels and allow to to sibmit overview</span>
<span class="sd">    compitation requests.</span>

<span class="sd">    :SIGNALS:</span>

<span class="sd">        * :attr:`overviewComputationRequest`</span>

<span class="sd">    &#39;&#39;&#39;</span>

    <span class="c">#: SIGNAL: it is emitted when a time expensive computation of overviews</span>
    <span class="c">#: is required</span>
    <span class="c">#:</span>
    <span class="c">#: :C++ signature: `void overviewComputationRequest(QtGui.QStandardItem)`</span>
    <span class="n">overviewComputationRequest</span> <span class="o">=</span> <span class="n">QtCore</span><span class="o">.</span><span class="n">Signal</span><span class="p">(</span><span class="n">QtGui</span><span class="o">.</span><span class="n">QStandardItem</span><span class="p">)</span>  <span class="c"># @TODO: check backward compatibility</span>
    <span class="c">#overviewComputationRequest = QtCore.Signal(object)</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">flags</span><span class="o">=</span><span class="n">QtCore</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">WindowFlags</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
                 <span class="o">**</span><span class="n">kargs</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">OverviewDialog</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">flags</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setWindowTitle</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tr</span><span class="p">(</span><span class="s">&#39;Overview computation&#39;</span><span class="p">))</span>

        <span class="n">label</span> <span class="o">=</span> <span class="n">QtGui</span><span class="o">.</span><span class="n">QLabel</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tr</span><span class="p">(</span><span class="s">&#39;Dataset:&#39;</span><span class="p">))</span>

        <span class="c">#: dataset label</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">description</span> <span class="o">=</span> <span class="n">QtGui</span><span class="o">.</span><span class="n">QLineEdit</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">description</span><span class="o">.</span><span class="n">setReadOnly</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>

        <span class="n">hlayout</span> <span class="o">=</span> <span class="n">QtGui</span><span class="o">.</span><span class="n">QHBoxLayout</span><span class="p">()</span>
        <span class="n">hlayout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">label</span><span class="p">)</span>
        <span class="n">hlayout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">description</span><span class="p">)</span>

        <span class="c">#: overview widget</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">overviewWidget</span> <span class="o">=</span> <span class="n">SpecialOverviewWidget</span><span class="p">()</span>

        <span class="n">buttonbox</span> <span class="o">=</span> <span class="n">QtGui</span><span class="o">.</span><span class="n">QDialogButtonBox</span><span class="p">(</span><span class="n">QtGui</span><span class="o">.</span><span class="n">QDialogButtonBox</span><span class="o">.</span><span class="n">Close</span><span class="p">)</span>
        <span class="n">buttonbox</span><span class="o">.</span><span class="n">rejected</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">reject</span><span class="p">)</span>

        <span class="n">layout</span> <span class="o">=</span> <span class="n">QtGui</span><span class="o">.</span><span class="n">QVBoxLayout</span><span class="p">()</span>
        <span class="n">layout</span><span class="o">.</span><span class="n">addLayout</span><span class="p">(</span><span class="n">hlayout</span><span class="p">)</span>
        <span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">overviewWidget</span><span class="p">)</span>
        <span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">buttonbox</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">setLayout</span><span class="p">(</span><span class="n">layout</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_item</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="k">if</span> <span class="n">item</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">setItem</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">reset</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">_emitComputationRequest</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">_item</span><span class="p">,</span> <span class="s">&#39;item not set&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">overviewComputationRequest</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_item</span><span class="p">)</span>

<div class="viewcode-block" id="OverviewDialog.reset"><a class="viewcode-back" href="../../../api/gsdview.gdalbackend.widgets.html#gsdview.gdalbackend.widgets.OverviewDialog.reset">[docs]</a>    <span class="k">def</span> <span class="nf">reset</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">overviewWidget</span><span class="o">.</span><span class="n">reset</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">description</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_item</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">overviewWidget</span><span class="o">.</span><span class="n">overviewComputationRequest</span><span class="o">.</span><span class="n">disconnect</span><span class="p">(</span>
                                                <span class="bp">self</span><span class="o">.</span><span class="n">_emitComputationRequest</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_item</span> <span class="o">=</span> <span class="bp">None</span>
</div>
<div class="viewcode-block" id="OverviewDialog.setItem"><a class="viewcode-back" href="../../../api/gsdview.gdalbackend.widgets.html#gsdview.gdalbackend.widgets.OverviewDialog.setItem">[docs]</a>    <span class="k">def</span> <span class="nf">setItem</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">item</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="s">&#39;GetRasterBand&#39;</span><span class="p">):</span>
                <span class="n">band</span> <span class="o">=</span> <span class="n">item</span>
                <span class="k">while</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="s">&#39;GetRasterBand&#39;</span><span class="p">):</span>
                    <span class="n">band</span> <span class="o">=</span> <span class="n">item</span>
                    <span class="n">item</span> <span class="o">=</span> <span class="n">item</span><span class="o">.</span><span class="n">parent</span><span class="p">()</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">band</span> <span class="o">=</span> <span class="n">item</span><span class="o">.</span><span class="n">GetRasterBand</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">overviewWidget</span><span class="o">.</span><span class="n">setItem</span><span class="p">(</span><span class="n">band</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_item</span> <span class="o">=</span> <span class="n">item</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">description</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_item</span><span class="o">.</span><span class="n">GetDescription</span><span class="p">())</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">description</span><span class="o">.</span><span class="n">setCursorPosition</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">overviewWidget</span><span class="o">.</span><span class="n">overviewComputationRequest</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span>
                                                <span class="bp">self</span><span class="o">.</span><span class="n">_emitComputationRequest</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">reset</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="OverviewDialog.updateOverviewInfo"><a class="viewcode-back" href="../../../api/gsdview.gdalbackend.widgets.html#gsdview.gdalbackend.widgets.OverviewDialog.updateOverviewInfo">[docs]</a>    <span class="k">def</span> <span class="nf">updateOverviewInfo</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_item</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">setItem</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_item</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">reset</span><span class="p">()</span>

</div></div>
<div class="viewcode-block" id="MajorObjectInfoDialog"><a class="viewcode-back" href="../../../api/gsdview.gdalbackend.widgets.html#gsdview.gdalbackend.widgets.MajorObjectInfoDialog">[docs]</a><span class="k">class</span> <span class="nc">MajorObjectInfoDialog</span><span class="p">(</span><span class="n">QtGui</span><span class="o">.</span><span class="n">QDialog</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">gdalobj</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">flags</span><span class="o">=</span><span class="n">QtCore</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">WindowFlags</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
                 <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">MajorObjectInfoDialog</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">flags</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s">&#39;setupUi&#39;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">setupUi</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_obj</span> <span class="o">=</span> <span class="n">gdalobj</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">metadataWidget</span> <span class="o">=</span> <span class="n">MetadataWidget</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

        <span class="n">layout</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tabWidget</span><span class="o">.</span><span class="n">widget</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">layout</span><span class="p">()</span>
        <span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">metadataWidget</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">metadataWidget</span><span class="o">.</span><span class="n">domainChanged</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">updateMetadata</span><span class="p">)</span>

        <span class="n">action</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">metadataWidget</span><span class="o">.</span><span class="n">findChild</span><span class="p">(</span><span class="n">QtGui</span><span class="o">.</span><span class="n">QAction</span><span class="p">,</span> <span class="s">&#39;saveAsAction&#39;</span><span class="p">)</span>
        <span class="n">action</span><span class="o">.</span><span class="n">triggered</span><span class="o">.</span><span class="n">disconnect</span><span class="p">()</span>
        <span class="n">action</span><span class="o">.</span><span class="n">triggered</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">saveMetadata</span><span class="p">)</span>

        <span class="n">action</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">metadataWidget</span><span class="o">.</span><span class="n">findChild</span><span class="p">(</span><span class="n">QtGui</span><span class="o">.</span><span class="n">QAction</span><span class="p">,</span> <span class="s">&#39;printAction&#39;</span><span class="p">)</span>
        <span class="n">action</span><span class="o">.</span><span class="n">triggered</span><span class="o">.</span><span class="n">disconnect</span><span class="p">()</span>
        <span class="n">action</span><span class="o">.</span><span class="n">triggered</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">printMetadata</span><span class="p">)</span>

        <span class="c"># Init tabs</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">updateMetadata</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">_checkgdalobj</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_obj</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s">&#39;no GDAL object attached (self._obj is None).&#39;</span><span class="p">)</span>

<div class="viewcode-block" id="MajorObjectInfoDialog.resetMetadata"><a class="viewcode-back" href="../../../api/gsdview.gdalbackend.widgets.html#gsdview.gdalbackend.widgets.MajorObjectInfoDialog.resetMetadata">[docs]</a>    <span class="k">def</span> <span class="nf">resetMetadata</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">metadataWidget</span><span class="o">.</span><span class="n">resetMetadata</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="MajorObjectInfoDialog.setMetadata"><a class="viewcode-back" href="../../../api/gsdview.gdalbackend.widgets.html#gsdview.gdalbackend.widgets.MajorObjectInfoDialog.setMetadata">[docs]</a>    <span class="k">def</span> <span class="nf">setMetadata</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">metadatalist</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">metadataWidget</span><span class="o">.</span><span class="n">setMetadata</span><span class="p">(</span><span class="n">metadatalist</span><span class="p">)</span>
</div>
    <span class="nd">@QtCore.Slot</span><span class="p">(</span><span class="nb">str</span><span class="p">)</span>
<div class="viewcode-block" id="MajorObjectInfoDialog.updateMetadata"><a class="viewcode-back" href="../../../api/gsdview.gdalbackend.widgets.html#gsdview.gdalbackend.widgets.MajorObjectInfoDialog.updateMetadata">[docs]</a>    <span class="k">def</span> <span class="nf">updateMetadata</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">domain</span><span class="o">=</span><span class="s">&#39;&#39;</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_obj</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="c"># @COMPATIBILITY: presumably a bug in PyQt4 4.7.2</span>
            <span class="n">domain</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">domain</span><span class="p">)</span>    <span class="c"># it could be a &quot;char const *&quot;</span>
            <span class="n">metadatalist</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_obj</span><span class="o">.</span><span class="n">GetMetadata_List</span><span class="p">(</span><span class="n">domain</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">metadatalist</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">setMetadata</span><span class="p">(</span><span class="n">metadatalist</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">resetMetadata</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="MajorObjectInfoDialog.reset"><a class="viewcode-back" href="../../../api/gsdview.gdalbackend.widgets.html#gsdview.gdalbackend.widgets.MajorObjectInfoDialog.reset">[docs]</a>    <span class="k">def</span> <span class="nf">reset</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">resetMetadata</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="MajorObjectInfoDialog.update"><a class="viewcode-back" href="../../../api/gsdview.gdalbackend.widgets.html#gsdview.gdalbackend.widgets.MajorObjectInfoDialog.update">[docs]</a>    <span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_obj</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">updateMetadata</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">reset</span><span class="p">()</span>
</div>
    <span class="k">def</span> <span class="nf">_metadataToCfg</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cfg</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">cfg</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="c"># @TODO: use ordered dict if available</span>
            <span class="n">cfg</span> <span class="o">=</span> <span class="n">ConfigParser</span><span class="o">.</span><span class="n">ConfigParser</span><span class="p">()</span>

        <span class="n">combobox</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">metadataWidget</span><span class="o">.</span><span class="n">domainComboBox</span>
        <span class="n">domains</span> <span class="o">=</span> <span class="p">[</span><span class="n">combobox</span><span class="o">.</span><span class="n">itemText</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">combobox</span><span class="o">.</span><span class="n">count</span><span class="p">())]</span>

        <span class="k">for</span> <span class="n">domain</span> <span class="ow">in</span> <span class="n">domains</span><span class="p">:</span>
            <span class="c"># @NOTE: preserve order</span>
            <span class="n">metadatalist</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_obj</span><span class="o">.</span><span class="n">GetMetadata_List</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">domain</span><span class="p">))</span>
            <span class="k">if</span> <span class="n">metadatalist</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">domain</span><span class="p">:</span>
                    <span class="n">section</span> <span class="o">=</span> <span class="s">&#39;_&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">domain</span><span class="p">,</span> <span class="s">&#39;DOMAIN&#39;</span><span class="p">])</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">section</span> <span class="o">=</span> <span class="s">&#39;DEFAULT_DOMAIN&#39;</span>
                <span class="n">cfg</span><span class="o">.</span><span class="n">add_section</span><span class="p">(</span><span class="n">section</span><span class="p">)</span>
                <span class="n">metadata</span> <span class="o">=</span> <span class="p">[</span><span class="n">line</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">&#39;=&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span> <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">metadatalist</span><span class="p">]</span>
                <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">metadata</span><span class="p">:</span>
                    <span class="n">cfg</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">section</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">cfg</span>

    <span class="c"># @TODO: move to metadata widget</span>
    <span class="nd">@QtCore.Slot</span><span class="p">()</span>
<div class="viewcode-block" id="MajorObjectInfoDialog.saveMetadata"><a class="viewcode-back" href="../../../api/gsdview.gdalbackend.widgets.html#gsdview.gdalbackend.widgets.MajorObjectInfoDialog.saveMetadata">[docs]</a>    <span class="k">def</span> <span class="nf">saveMetadata</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_obj</span><span class="p">:</span>
            <span class="n">QtGui</span><span class="o">.</span><span class="n">QMessageBox</span><span class="o">.</span><span class="n">information</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tr</span><span class="p">(</span><span class="s">&#39;Information&#39;</span><span class="p">),</span>
                                          <span class="bp">self</span><span class="o">.</span><span class="n">tr</span><span class="p">(</span><span class="s">&#39;Nothing to save.&#39;</span><span class="p">))</span>
            <span class="k">return</span>

        <span class="n">filters</span> <span class="o">=</span> <span class="p">[</span>
            <span class="s">&#39;INI file firmat (*.ini)&#39;</span>
            <span class="s">&#39;Text file (*.txt)&#39;</span><span class="p">,</span>
            <span class="s">&#39;HTML file (*.html)&#39;</span><span class="p">,</span>
            <span class="s">&#39;All files (*)&#39;</span><span class="p">,</span>
        <span class="p">]</span>

        <span class="c"># @TODO: use common dialaog</span>
        <span class="n">target</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">utils</span><span class="o">.</span><span class="n">default_workdir</span><span class="p">(),</span> <span class="s">&#39;metadata.ini&#39;</span><span class="p">)</span>
        <span class="n">filename</span><span class="p">,</span> <span class="n">filter_</span> <span class="o">=</span> <span class="n">QtGui</span><span class="o">.</span><span class="n">QFileDialog</span><span class="o">.</span><span class="n">getSaveFileNameAndFilter</span><span class="p">(</span>
                                            <span class="bp">self</span><span class="p">,</span>
                                            <span class="bp">self</span><span class="o">.</span><span class="n">tr</span><span class="p">(</span><span class="s">&#39;Save&#39;</span><span class="p">),</span>
                                            <span class="n">target</span><span class="p">,</span>
                                            <span class="s">&#39;;;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">filters</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">filename</span><span class="p">:</span>
            <span class="n">cfg</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_metadataToCfg</span><span class="p">()</span>
            <span class="n">ext</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="n">filename</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">ext</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s">&#39;.html&#39;</span><span class="p">:</span>
                <span class="n">doc</span> <span class="o">=</span> <span class="n">qt4support</span><span class="o">.</span><span class="n">cfgToTextDocument</span><span class="p">(</span><span class="n">cfg</span><span class="p">)</span>
                <span class="n">data</span> <span class="o">=</span> <span class="n">doc</span><span class="o">.</span><span class="n">toHtml</span><span class="p">()</span>
                <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="s">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">fd</span><span class="p">:</span>
                    <span class="n">fd</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="s">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">fd</span><span class="p">:</span>
                    <span class="n">cfg</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">fd</span><span class="p">)</span>
</div>
    <span class="nd">@QtCore.Slot</span><span class="p">()</span>
<div class="viewcode-block" id="MajorObjectInfoDialog.printMetadata"><a class="viewcode-back" href="../../../api/gsdview.gdalbackend.widgets.html#gsdview.gdalbackend.widgets.MajorObjectInfoDialog.printMetadata">[docs]</a>    <span class="k">def</span> <span class="nf">printMetadata</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">cfg</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_metadataToCfg</span><span class="p">()</span>
        <span class="n">doc</span> <span class="o">=</span> <span class="n">qt4support</span><span class="o">.</span><span class="n">cfgToTextDocument</span><span class="p">(</span><span class="n">cfg</span><span class="p">)</span>
        <span class="n">qt4support</span><span class="o">.</span><span class="n">printObject</span><span class="p">(</span><span class="n">doc</span><span class="p">)</span>

</div></div>
<span class="k">def</span> <span class="nf">_setupImageStructureInfo</span><span class="p">(</span><span class="n">widget</span><span class="p">,</span> <span class="n">metadata</span><span class="p">):</span>
    <span class="n">widget</span><span class="o">.</span><span class="n">compressionValue</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">metadata</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;COMPRESSION&#39;</span><span class="p">,</span> <span class="s">&#39;&#39;</span><span class="p">))</span>
    <span class="n">widget</span><span class="o">.</span><span class="n">nbitsValue</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">metadata</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;NBITS&#39;</span><span class="p">,</span> <span class="s">&#39;&#39;</span><span class="p">))</span>
    <span class="n">widget</span><span class="o">.</span><span class="n">interleaveValue</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">metadata</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;INTERLEAVE&#39;</span><span class="p">,</span> <span class="s">&#39;&#39;</span><span class="p">))</span>
    <span class="n">widget</span><span class="o">.</span><span class="n">pixelTypeValue</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">metadata</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;PIXELTYPE&#39;</span><span class="p">,</span> <span class="s">&#39;&#39;</span><span class="p">))</span>


<span class="n">HistogramConfigDialogBase</span> <span class="o">=</span> <span class="n">qt4support</span><span class="o">.</span><span class="n">getuiform</span><span class="p">(</span><span class="s">&#39;histoconfig&#39;</span><span class="p">,</span> <span class="n">__name__</span><span class="p">)</span>


<div class="viewcode-block" id="HistogramConfigDialog"><a class="viewcode-back" href="../../../api/gsdview.gdalbackend.widgets.html#gsdview.gdalbackend.widgets.HistogramConfigDialog">[docs]</a><span class="k">class</span> <span class="nc">HistogramConfigDialog</span><span class="p">(</span><span class="n">QtGui</span><span class="o">.</span><span class="n">QDialog</span><span class="p">,</span> <span class="n">HistogramConfigDialogBase</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">flags</span><span class="o">=</span><span class="n">QtCore</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">WindowFlags</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">HistogramConfigDialog</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">flags</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setupUi</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

        <span class="c"># Make it not resizable</span>
        <span class="n">w</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">maximumSize</span><span class="p">()</span><span class="o">.</span><span class="n">width</span><span class="p">()</span>
        <span class="n">h</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">size</span><span class="p">()</span><span class="o">.</span><span class="n">height</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setMaximumSize</span><span class="p">(</span><span class="n">w</span><span class="p">,</span> <span class="n">h</span><span class="p">)</span>

        <span class="c"># Colors</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_default_palette</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">minSpinBox</span><span class="o">.</span><span class="n">palette</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_error_palette</span> <span class="o">=</span> <span class="n">QtGui</span><span class="o">.</span><span class="n">QPalette</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_default_palette</span><span class="p">)</span>

        <span class="n">color</span> <span class="o">=</span> <span class="n">QtGui</span><span class="o">.</span><span class="n">QColor</span><span class="p">(</span><span class="n">QtCore</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">red</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_error_palette</span><span class="o">.</span><span class="n">setColor</span><span class="p">(</span><span class="n">QtGui</span><span class="o">.</span><span class="n">QPalette</span><span class="o">.</span><span class="n">Text</span><span class="p">,</span> <span class="n">color</span><span class="p">)</span>
        <span class="n">color</span><span class="o">.</span><span class="n">setAlpha</span><span class="p">(</span><span class="mi">50</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_error_palette</span><span class="o">.</span><span class="n">setColor</span><span class="p">(</span><span class="n">QtGui</span><span class="o">.</span><span class="n">QPalette</span><span class="o">.</span><span class="n">Base</span><span class="p">,</span> <span class="n">color</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">minSpinBox</span><span class="o">.</span><span class="n">editingFinished</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">validate</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">maxSpinBox</span><span class="o">.</span><span class="n">editingFinished</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">validate</span><span class="p">)</span>

    <span class="nd">@QtCore.Slot</span><span class="p">()</span>
<div class="viewcode-block" id="HistogramConfigDialog.validate"><a class="viewcode-back" href="../../../api/gsdview.gdalbackend.widgets.html#gsdview.gdalbackend.widgets.HistogramConfigDialog.validate">[docs]</a>    <span class="k">def</span> <span class="nf">validate</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">minSpinBox</span><span class="o">.</span><span class="n">value</span><span class="p">()</span> <span class="o">&gt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">maxSpinBox</span><span class="o">.</span><span class="n">value</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">minSpinBox</span><span class="o">.</span><span class="n">lineEdit</span><span class="p">()</span><span class="o">.</span><span class="n">setPalette</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_error_palette</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">maxSpinBox</span><span class="o">.</span><span class="n">lineEdit</span><span class="p">()</span><span class="o">.</span><span class="n">setPalette</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_error_palette</span><span class="p">)</span>
            <span class="k">return</span> <span class="bp">False</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">minSpinBox</span><span class="o">.</span><span class="n">lineEdit</span><span class="p">()</span><span class="o">.</span><span class="n">setPalette</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_default_palette</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">maxSpinBox</span><span class="o">.</span><span class="n">lineEdit</span><span class="p">()</span><span class="o">.</span><span class="n">setPalette</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_default_palette</span><span class="p">)</span>

        <span class="k">return</span> <span class="bp">True</span>
</div>
<div class="viewcode-block" id="HistogramConfigDialog.setLimits"><a class="viewcode-back" href="../../../api/gsdview.gdalbackend.widgets.html#gsdview.gdalbackend.widgets.HistogramConfigDialog.setLimits">[docs]</a>    <span class="k">def</span> <span class="nf">setLimits</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dtype</span><span class="p">):</span>
        <span class="n">vmin</span> <span class="o">=</span> <span class="o">-</span><span class="mi">2</span> <span class="o">**</span> <span class="mi">15</span> <span class="o">-</span> <span class="mf">0.5</span>
        <span class="n">vmax</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">**</span> <span class="mi">16</span> <span class="o">-</span> <span class="mf">0.5</span>
        <span class="k">if</span> <span class="n">dtype</span> <span class="ow">in</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">uint8</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">uint16</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">uint32</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">uint64</span><span class="p">):</span>
            <span class="c"># Unsigned</span>
            <span class="n">vmin</span> <span class="o">=</span> <span class="o">-</span><span class="mf">0.5</span>
            <span class="k">if</span> <span class="n">dtype</span> <span class="o">==</span> <span class="n">np</span><span class="o">.</span><span class="n">uint8</span><span class="p">:</span>
                <span class="n">vmax</span> <span class="o">=</span> <span class="mf">255.5</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">vmax</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">**</span> <span class="mi">16</span> <span class="o">-</span> <span class="mf">0.5</span>
        <span class="k">elif</span> <span class="n">dtype</span> <span class="o">==</span> <span class="n">np</span><span class="o">.</span><span class="n">int8</span><span class="p">:</span>
            <span class="n">vmin</span> <span class="o">=</span> <span class="o">-</span><span class="mf">128.5</span>
            <span class="n">vmax</span> <span class="o">=</span> <span class="mf">127.5</span>
        <span class="k">elif</span> <span class="n">dtype</span> <span class="o">==</span> <span class="n">np</span><span class="o">.</span><span class="n">int16</span><span class="p">:</span>
            <span class="n">vmax</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">**</span> <span class="mi">15</span> <span class="o">+</span> <span class="mf">0.5</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">minSpinBox</span><span class="o">.</span><span class="n">setMinimum</span><span class="p">(</span><span class="n">vmin</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">minSpinBox</span><span class="o">.</span><span class="n">setMaximum</span><span class="p">(</span><span class="n">vmax</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">maxSpinBox</span><span class="o">.</span><span class="n">setMinimum</span><span class="p">(</span><span class="n">vmin</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">maxSpinBox</span><span class="o">.</span><span class="n">setMaximum</span><span class="p">(</span><span class="n">vmax</span><span class="p">)</span>

</div></div>
<span class="n">BandInfoDialogBase</span> <span class="o">=</span> <span class="n">qt4support</span><span class="o">.</span><span class="n">getuiform</span><span class="p">(</span><span class="s">&#39;banddialog&#39;</span><span class="p">,</span> <span class="n">__name__</span><span class="p">)</span>


<div class="viewcode-block" id="BandInfoDialog"><a class="viewcode-back" href="../../../api/gsdview.gdalbackend.widgets.html#gsdview.gdalbackend.widgets.BandInfoDialog">[docs]</a><span class="k">class</span> <span class="nc">BandInfoDialog</span><span class="p">(</span><span class="n">MajorObjectInfoDialog</span><span class="p">,</span> <span class="n">BandInfoDialogBase</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;Info dialog for GDAL raster bands.</span>

<span class="sd">    :SIGNALS:</span>

<span class="sd">        * :attr:`statsComputationRequest`</span>
<span class="sd">        * :attr:`histogramComputationRequest`</span>
<span class="sd">        * :attr:`overviewComputationRequest`</span>

<span class="sd">    &#39;&#39;&#39;</span>

    <span class="c">#: SIGNAL: it is emitted when a time expensive computation of statistics</span>
    <span class="c">#: is required</span>
    <span class="c">#:</span>
    <span class="c">#: :C++ signature: `void statsComputationRequest(QtGui.QStandardItem)`</span>
    <span class="n">statsComputationRequest</span> <span class="o">=</span> <span class="n">QtCore</span><span class="o">.</span><span class="n">Signal</span><span class="p">(</span><span class="n">QtGui</span><span class="o">.</span><span class="n">QStandardItem</span><span class="p">)</span>  <span class="c"># @TODO: check backward compatibility</span>

    <span class="c">#: SIGNAL: it is emitted when a time expensive computation of an histogram</span>
    <span class="c">#: is required</span>
    <span class="c">#:</span>
    <span class="c">#: :C++ signature: `void histogramComputationRequest(QtGui.QStandardItem)`</span>
    <span class="n">histogramComputationRequest</span> <span class="o">=</span> <span class="n">QtCore</span><span class="o">.</span><span class="n">Signal</span><span class="p">(</span><span class="n">QtGui</span><span class="o">.</span><span class="n">QStandardItem</span><span class="p">)</span>  <span class="c"># @TODO: check backward compatibility</span>

    <span class="c"># @TODO: check</span>
    <span class="c">#self.emit(QtCore.SIGNAL(</span>
    <span class="c">#   &#39;histogramComputationRequest(QtGui.QStandardItem, int, int, int)&#39;),</span>
    <span class="c">#   band, hmin, nmax, nbuckets)</span>

    <span class="c">#: SIGNAL: it is emitted when overview computation is required</span>
    <span class="c">#:</span>
    <span class="c">#: :C++ signature: `void overviewComputationRequest()`</span>
    <span class="n">overviewComputationRequest</span> <span class="o">=</span> <span class="n">QtCore</span><span class="o">.</span><span class="n">Signal</span><span class="p">(</span><span class="n">QtGui</span><span class="o">.</span><span class="n">QStandardItem</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">band</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">flags</span><span class="o">=</span><span class="n">QtCore</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">WindowFlags</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
                 <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">BandInfoDialog</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="n">band</span><span class="p">,</span> <span class="n">parent</span><span class="p">,</span> <span class="n">flags</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

        <span class="c"># Set tab icons</span>
        <span class="n">geticon</span> <span class="o">=</span> <span class="n">qt4support</span><span class="o">.</span><span class="n">geticon</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tabWidget</span><span class="o">.</span><span class="n">setTabIcon</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">geticon</span><span class="p">(</span><span class="s">&#39;info.svg&#39;</span><span class="p">,</span> <span class="s">&#39;gsdview&#39;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tabWidget</span><span class="o">.</span><span class="n">setTabIcon</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">geticon</span><span class="p">(</span><span class="s">&#39;metadata.svg&#39;</span><span class="p">,</span> <span class="n">__name__</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tabWidget</span><span class="o">.</span><span class="n">setTabIcon</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">geticon</span><span class="p">(</span><span class="s">&#39;statistics.svg&#39;</span><span class="p">,</span> <span class="n">__name__</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tabWidget</span><span class="o">.</span><span class="n">setTabIcon</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="n">geticon</span><span class="p">(</span><span class="s">&#39;color.svg&#39;</span><span class="p">,</span> <span class="n">__name__</span><span class="p">))</span>

        <span class="c"># Overview page</span>

        <span class="c">#: overview widget</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">overviewWidget</span> <span class="o">=</span> <span class="n">SpecialOverviewWidget</span><span class="p">(</span><span class="n">parent</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">overviewWidget</span><span class="o">.</span><span class="n">addLevelButton</span><span class="o">.</span><span class="n">setIcon</span><span class="p">(</span><span class="n">geticon</span><span class="p">(</span><span class="s">&#39;add.svg&#39;</span><span class="p">,</span>
                                                           <span class="s">&#39;gsdview&#39;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tabWidget</span><span class="o">.</span><span class="n">addTab</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">overviewWidget</span><span class="p">,</span>
                              <span class="n">geticon</span><span class="p">(</span><span class="s">&#39;overview.svg&#39;</span><span class="p">,</span> <span class="n">__name__</span><span class="p">),</span>
                              <span class="bp">self</span><span class="o">.</span><span class="n">tr</span><span class="p">(</span><span class="s">&#39;Overviews&#39;</span><span class="p">))</span>

        <span class="c"># Context menu actions</span>
        <span class="n">qt4support</span><span class="o">.</span><span class="n">setViewContextActions</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">histogramTableWidget</span><span class="p">)</span>
        <span class="n">qt4support</span><span class="o">.</span><span class="n">setViewContextActions</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">colorTableWidget</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">gdal</span><span class="o">.</span><span class="n">Band</span><span class="p">,</span> <span class="s">&#39;GetDefaultHistogram&#39;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">histogramGroupBox</span><span class="o">.</span><span class="n">hide</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">statisticsVerticalLayout</span><span class="o">.</span><span class="n">addStretch</span><span class="p">()</span>

        <span class="c"># @TODO: remove.</span>
        <span class="c"># Tempoorary disable the button for custom histogram configuration</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">customHistogramCheckBox</span><span class="o">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>

        <span class="c"># Tabs</span>
        <span class="k">if</span> <span class="n">band</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_connect_signals</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">_connect_signals</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># @TODO: check</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">computeStatsButton</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_computeStats</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">approxStatsCheckBox</span><span class="o">.</span><span class="n">toggled</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span>
                                        <span class="bp">self</span><span class="o">.</span><span class="n">computeStatsButton</span><span class="o">.</span><span class="n">setEnabled</span><span class="p">)</span>
        <span class="c"># @TODO: check</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">computeHistogramButton</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_computeHistogram</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">customHistogramCheckBox</span><span class="o">.</span><span class="n">toggled</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span>
                                        <span class="bp">self</span><span class="o">.</span><span class="n">computeHistogramButton</span><span class="o">.</span><span class="n">setEnabled</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">overviewWidget</span><span class="o">.</span><span class="n">overviewComputationRequest</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span>
                                                        <span class="bp">self</span><span class="o">.</span><span class="n">_computeOverviews</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_disconnect_signals</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># @TODO: check</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">computeStatsButton</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">disconnect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_computeStats</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">approxStatsCheckBox</span><span class="o">.</span><span class="n">toggled</span><span class="o">.</span><span class="n">disconnect</span><span class="p">(</span>
                                        <span class="bp">self</span><span class="o">.</span><span class="n">computeStatsButton</span><span class="o">.</span><span class="n">setEnabled</span><span class="p">)</span>
        <span class="c"># @TODO: check</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">computeHistogramButton</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">dosconnect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_computeHistogram</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">customHistogramCheckBox</span><span class="o">.</span><span class="n">toggled</span><span class="o">.</span><span class="n">disconnect</span><span class="p">(</span>
                                        <span class="bp">self</span><span class="o">.</span><span class="n">computeHistogramButton</span><span class="o">.</span><span class="n">setEnabled</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">overviewWidget</span><span class="o">.</span><span class="n">overviewComputationRequest</span><span class="o">.</span><span class="n">disconnect</span><span class="p">(</span>
                                                        <span class="bp">self</span><span class="o">.</span><span class="n">_computeOverviews</span><span class="p">)</span>

    <span class="nd">@property</span>
<div class="viewcode-block" id="BandInfoDialog.band"><a class="viewcode-back" href="../../../api/gsdview.gdalbackend.widgets.html#gsdview.gdalbackend.widgets.BandInfoDialog.band">[docs]</a>    <span class="k">def</span> <span class="nf">band</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_obj</span>
</div>
<div class="viewcode-block" id="BandInfoDialog.setBand"><a class="viewcode-back" href="../../../api/gsdview.gdalbackend.widgets.html#gsdview.gdalbackend.widgets.BandInfoDialog.setBand">[docs]</a>    <span class="k">def</span> <span class="nf">setBand</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">band</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_obj</span> <span class="o">=</span> <span class="n">band</span>
        <span class="k">if</span> <span class="n">band</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="c"># @TODO: check type</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_connect_signals</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_disconnect_signals</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">reset</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="BandInfoDialog.reset"><a class="viewcode-back" href="../../../api/gsdview.gdalbackend.widgets.html#gsdview.gdalbackend.widgets.BandInfoDialog.reset">[docs]</a>    <span class="k">def</span> <span class="nf">reset</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">BandInfoDialog</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">reset</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">resetInfoTab</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">resetStatistics</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">resetHistogram</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">resetColorTable</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">overviewWidget</span><span class="o">.</span><span class="n">reset</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="BandInfoDialog.update"><a class="viewcode-back" href="../../../api/gsdview.gdalbackend.widgets.html#gsdview.gdalbackend.widgets.BandInfoDialog.update">[docs]</a>    <span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">BandInfoDialog</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">updateInfoTab</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">updateStatistics</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">updateHistogram</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">updateColorTable</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">updateOverviewInfo</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="BandInfoDialog.resetImageStructure"><a class="viewcode-back" href="../../../api/gsdview.gdalbackend.widgets.html#gsdview.gdalbackend.widgets.BandInfoDialog.resetImageStructure">[docs]</a>    <span class="k">def</span> <span class="nf">resetImageStructure</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">_setupImageStructureInfo</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="p">{})</span>
</div>
<div class="viewcode-block" id="BandInfoDialog.setImageStructure"><a class="viewcode-back" href="../../../api/gsdview.gdalbackend.widgets.html#gsdview.gdalbackend.widgets.BandInfoDialog.setImageStructure">[docs]</a>    <span class="k">def</span> <span class="nf">setImageStructure</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">metadata</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">metadata</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">resetImageStructure</span><span class="p">()</span>

        <span class="n">_setupImageStructureInfo</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">metadata</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="BandInfoDialog.updateImageStructure"><a class="viewcode-back" href="../../../api/gsdview.gdalbackend.widgets.html#gsdview.gdalbackend.widgets.BandInfoDialog.updateImageStructure">[docs]</a>    <span class="k">def</span> <span class="nf">updateImageStructure</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">band</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">metadata</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">band</span><span class="o">.</span><span class="n">GetMetadata</span><span class="p">(</span><span class="s">&#39;IMAGE_STRUCTURE&#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">metadata</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">setImageStructure</span><span class="p">(</span><span class="n">metadata</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="BandInfoDialog.resetInfoTab"><a class="viewcode-back" href="../../../api/gsdview.gdalbackend.widgets.html#gsdview.gdalbackend.widgets.BandInfoDialog.resetInfoTab">[docs]</a>    <span class="k">def</span> <span class="nf">resetInfoTab</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># Info</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">descriptionValue</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">bandNumberValue</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">colorInterpretationValue</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">overviewCountValue</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s">&#39;0&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">hasArbitraryOverviewsValue</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">)</span>

        <span class="c"># @TODO: checksum</span>
        <span class="c">#~ band.Checksum                   ??</span>

        <span class="c"># Data</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">xSizeValue</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s">&#39;0&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ySizeValue</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s">&#39;0&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">blockSizeValue</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s">&#39;0&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">noDataValue</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">dataTypeValue</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unitTypeValue</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">offsetValue</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s">&#39;0&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">scaleValue</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s">&#39;1&#39;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">resetImageStructure</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="BandInfoDialog.updateInfoTab"><a class="viewcode-back" href="../../../api/gsdview.gdalbackend.widgets.html#gsdview.gdalbackend.widgets.BandInfoDialog.updateInfoTab">[docs]</a>    <span class="k">def</span> <span class="nf">updateInfoTab</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">band</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">resetInfoTab</span><span class="p">()</span>
            <span class="k">return</span>

        <span class="n">band</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">band</span>

        <span class="c"># Color interpretaion</span>
        <span class="n">colorint</span> <span class="o">=</span> <span class="n">band</span><span class="o">.</span><span class="n">GetRasterColorInterpretation</span><span class="p">()</span>
        <span class="n">colorint</span> <span class="o">=</span> <span class="n">gdal</span><span class="o">.</span><span class="n">GetColorInterpretationName</span><span class="p">(</span><span class="n">colorint</span><span class="p">)</span>

        <span class="c"># Info</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">descriptionValue</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">band</span><span class="o">.</span><span class="n">GetDescription</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">())</span>

        <span class="c"># @COMPATIBILITY: GetBand requires GDAL &gt;= 1.7</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">bandno</span> <span class="o">=</span> <span class="n">band</span><span class="o">.</span><span class="n">GetBand</span><span class="p">()</span>
        <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
            <span class="n">bandno</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tr</span><span class="p">(</span><span class="s">&#39;Unknown&#39;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">bandNumberValue</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">bandno</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">colorInterpretationValue</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">colorint</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">overviewCountValue</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">band</span><span class="o">.</span><span class="n">GetOverviewCount</span><span class="p">()))</span>

        <span class="c"># @COMPATIBILITY: HasArbitraryOverviews requires GDAL &gt;= 1.7</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">gdal</span><span class="o">.</span><span class="n">Band</span><span class="p">,</span> <span class="s">&#39;HasArbitraryOverviews&#39;</span><span class="p">):</span>
            <span class="n">hasArbitaryOvr</span> <span class="o">=</span> <span class="n">band</span><span class="o">.</span><span class="n">HasArbitraryOverviews</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">hasArbitraryOverviewsValue</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">hasArbitaryOvr</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">hasArbitraryOverviewsValue</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">)</span>

        <span class="c"># @TODO: checksum</span>
        <span class="c">#~ band.Checksum                   ??</span>

        <span class="c"># Data</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">xSizeValue</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">band</span><span class="o">.</span><span class="n">XSize</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ySizeValue</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">band</span><span class="o">.</span><span class="n">YSize</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">blockSizeValue</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">band</span><span class="o">.</span><span class="n">GetBlockSize</span><span class="p">()))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">noDataValue</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">band</span><span class="o">.</span><span class="n">GetNoDataValue</span><span class="p">()))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">dataTypeValue</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">gdal</span><span class="o">.</span><span class="n">GetDataTypeName</span><span class="p">(</span><span class="n">band</span><span class="o">.</span><span class="n">DataType</span><span class="p">))</span>

        <span class="c"># @COMPATIBILITY: GetUnitType requires GDAL &gt;= 1.7</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">gdal</span><span class="o">.</span><span class="n">Band</span><span class="p">,</span> <span class="s">&#39;GetUnitType&#39;</span><span class="p">):</span>
            <span class="n">unitType</span> <span class="o">=</span> <span class="n">band</span><span class="o">.</span><span class="n">GetUnitType</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">unitTypeValue</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">unitType</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">unitTypeValue</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">offsetValue</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">band</span><span class="o">.</span><span class="n">GetOffset</span><span class="p">()))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">scaleValue</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">band</span><span class="o">.</span><span class="n">GetScale</span><span class="p">()))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">updateImageStructure</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="BandInfoDialog.resetStatistics"><a class="viewcode-back" href="../../../api/gsdview.gdalbackend.widgets.html#gsdview.gdalbackend.widgets.BandInfoDialog.resetStatistics">[docs]</a>    <span class="k">def</span> <span class="nf">resetStatistics</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Reset statistics.&#39;&#39;&#39;</span>

        <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tr</span><span class="p">(</span><span class="s">&#39;Not computed&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">minimumValue</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">maximumValue</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">meanValue</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stdValue</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="BandInfoDialog.setStatistics"><a class="viewcode-back" href="../../../api/gsdview.gdalbackend.widgets.html#gsdview.gdalbackend.widgets.BandInfoDialog.setStatistics">[docs]</a>    <span class="k">def</span> <span class="nf">setStatistics</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">vmin</span><span class="p">,</span> <span class="n">vmax</span><span class="p">,</span> <span class="n">mean</span><span class="p">,</span> <span class="n">stddev</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">minimumValue</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">vmin</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">maximumValue</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">vmax</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">meanValue</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">mean</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stdValue</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">stddev</span><span class="p">))</span>
</div>
    <span class="nd">@QtCore.Slot</span><span class="p">()</span>
    <span class="nd">@qt4support.overrideCursor</span>
<div class="viewcode-block" id="BandInfoDialog.updateStatistics"><a class="viewcode-back" href="../../../api/gsdview.gdalbackend.widgets.html#gsdview.gdalbackend.widgets.BandInfoDialog.updateStatistics">[docs]</a>    <span class="k">def</span> <span class="nf">updateStatistics</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">band</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">resetStatistics</span><span class="p">()</span>
            <span class="k">return</span>

        <span class="c"># @NOTE: the band.GetStatistics method called with the second argument</span>
        <span class="c">#        set to False (no image rescanning) has been fixed in</span>
        <span class="c">#        r19666_ (1.6 branch) and r19665_ (1.7 branch)</span>
        <span class="c">#        see `ticket #3572` on `GDAL Trac`_.</span>
        <span class="c">#</span>
        <span class="c"># .. _r19666: http://trac.osgeo.org/gdal/changeset/19666</span>
        <span class="c"># .. _r19665: http://trac.osgeo.org/gdal/changeset/19665</span>
        <span class="c"># .. _`ticket #3572`: http://trac.osgeo.org/gdal/ticket/3572</span>
        <span class="c"># .. _`GDAL Trac`: http://trac.osgeo.org/gdal</span>

        <span class="k">if</span> <span class="n">gdalsupport</span><span class="o">.</span><span class="n">hasFastStats</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">band</span><span class="p">):</span>
            <span class="n">vmin</span><span class="p">,</span> <span class="n">vmax</span><span class="p">,</span> <span class="n">mean</span><span class="p">,</span> <span class="n">stddev</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">band</span><span class="o">.</span><span class="n">GetStatistics</span><span class="p">(</span><span class="bp">True</span><span class="p">,</span> <span class="bp">True</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">setStatistics</span><span class="p">(</span><span class="n">vmin</span><span class="p">,</span> <span class="n">vmax</span><span class="p">,</span> <span class="n">mean</span><span class="p">,</span> <span class="n">stddev</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">computeStatsButton</span><span class="o">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">resetStatistics</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="BandInfoDialog.resetHistogram"><a class="viewcode-back" href="../../../api/gsdview.gdalbackend.widgets.html#gsdview.gdalbackend.widgets.BandInfoDialog.resetHistogram">[docs]</a>    <span class="k">def</span> <span class="nf">resetHistogram</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">tablewidget</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">histogramTableWidget</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">numberOfClassesValue</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s">&#39;0&#39;</span><span class="p">)</span>
        <span class="n">qt4support</span><span class="o">.</span><span class="n">clearTable</span><span class="p">(</span><span class="n">tablewidget</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="BandInfoDialog.setHistogram"><a class="viewcode-back" href="../../../api/gsdview.gdalbackend.widgets.html#gsdview.gdalbackend.widgets.BandInfoDialog.setHistogram">[docs]</a>    <span class="k">def</span> <span class="nf">setHistogram</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">vmin</span><span class="p">,</span> <span class="n">vmax</span><span class="p">,</span> <span class="n">nbuckets</span><span class="p">,</span> <span class="n">hist</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">numberOfClassesValue</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">nbuckets</span><span class="p">))</span>

        <span class="n">w</span> <span class="o">=</span> <span class="p">(</span><span class="n">vmax</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">)</span> <span class="o">/</span> <span class="n">nbuckets</span>

        <span class="n">tablewidget</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">histogramTableWidget</span>
        <span class="n">tablewidget</span><span class="o">.</span><span class="n">setRowCount</span><span class="p">(</span><span class="n">nbuckets</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nbuckets</span><span class="p">):</span>
            <span class="n">start</span> <span class="o">=</span> <span class="n">vmin</span> <span class="o">+</span> <span class="n">row</span> <span class="o">*</span> <span class="n">w</span>
            <span class="n">stop</span> <span class="o">=</span> <span class="n">start</span> <span class="o">+</span> <span class="n">w</span>
            <span class="n">tablewidget</span><span class="o">.</span><span class="n">setItem</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
                                <span class="n">QtGui</span><span class="o">.</span><span class="n">QTableWidgetItem</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">start</span><span class="p">)))</span>
            <span class="n">tablewidget</span><span class="o">.</span><span class="n">setItem</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span>
                                <span class="n">QtGui</span><span class="o">.</span><span class="n">QTableWidgetItem</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">stop</span><span class="p">)))</span>
            <span class="n">tablewidget</span><span class="o">.</span><span class="n">setItem</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span>
                                <span class="n">QtGui</span><span class="o">.</span><span class="n">QTableWidgetItem</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">hist</span><span class="p">[</span><span class="n">row</span><span class="p">])))</span>

        <span class="c"># @TODO: plotting</span>
</div>
<div class="viewcode-block" id="BandInfoDialog.updateHistogram"><a class="viewcode-back" href="../../../api/gsdview.gdalbackend.widgets.html#gsdview.gdalbackend.widgets.BandInfoDialog.updateHistogram">[docs]</a>    <span class="k">def</span> <span class="nf">updateHistogram</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">band</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">resetHistogram</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">gdal</span><span class="o">.</span><span class="n">DataTypeIsComplex</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">band</span><span class="o">.</span><span class="n">DataType</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">computeHistogramButton</span><span class="o">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>
            <span class="k">return</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">computeHistogramButton</span><span class="o">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">gdal</span><span class="o">.</span><span class="n">VersionInfo</span><span class="p">()</span> <span class="o">&lt;</span> <span class="s">&#39;1700&#39;</span><span class="p">:</span>
            <span class="c"># @TODO: check</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">computeHistogramButton</span><span class="o">.</span><span class="n">isEnabled</span><span class="p">()</span> <span class="o">==</span> <span class="bp">False</span><span class="p">:</span>
                <span class="c"># Histogram already computed</span>
                <span class="n">hist</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">band</span><span class="o">.</span><span class="n">GetDefaultHistogram</span><span class="p">()</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">hist</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c"># @WARNING: causes a crash in GDAL &lt; 1.7.0 (r18405)</span>
            <span class="c"># @SEEALSO: http://trac.osgeo.org/gdal/ticket/3304</span>
            <span class="n">hist</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">band</span><span class="o">.</span><span class="n">GetDefaultHistogram</span><span class="p">(</span><span class="n">force</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">hist</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">setHistogram</span><span class="p">(</span><span class="o">*</span><span class="n">hist</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">computeHistogramButton</span><span class="o">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">resetHistogram</span><span class="p">()</span>
</div>
    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">_rgb2qcolor</span><span class="p">(</span><span class="n">red</span><span class="p">,</span> <span class="n">green</span><span class="p">,</span> <span class="n">blue</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mi">255</span><span class="p">):</span>
        <span class="n">qcolor</span> <span class="o">=</span> <span class="n">QtGui</span><span class="o">.</span><span class="n">QColor</span><span class="p">()</span>
        <span class="n">qcolor</span><span class="o">.</span><span class="n">setRgb</span><span class="p">(</span><span class="n">red</span><span class="p">,</span> <span class="n">green</span><span class="p">,</span> <span class="n">blue</span><span class="p">,</span> <span class="n">alpha</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">qcolor</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">_gray2qcolor</span><span class="p">(</span><span class="n">gray</span><span class="p">):</span>
        <span class="n">qcolor</span> <span class="o">=</span> <span class="n">QtGui</span><span class="o">.</span><span class="n">QColor</span><span class="p">()</span>
        <span class="n">qcolor</span><span class="o">.</span><span class="n">setRgb</span><span class="p">(</span><span class="n">gray</span><span class="p">,</span> <span class="n">gray</span><span class="p">,</span> <span class="n">gray</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">qcolor</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">_cmyk2qcolor</span><span class="p">(</span><span class="n">cyan</span><span class="p">,</span> <span class="n">magenta</span><span class="p">,</span> <span class="n">yellow</span><span class="p">,</span> <span class="n">black</span><span class="o">=</span><span class="mi">255</span><span class="p">):</span>
        <span class="n">qcolor</span> <span class="o">=</span> <span class="n">QtGui</span><span class="o">.</span><span class="n">QColor</span><span class="p">()</span>
        <span class="n">qcolor</span><span class="o">.</span><span class="n">setCmyk</span><span class="p">(</span><span class="n">cyan</span><span class="p">,</span> <span class="n">magenta</span><span class="p">,</span> <span class="n">yellow</span><span class="p">,</span> <span class="n">black</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">qcolor</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">_hsv2qcolor</span><span class="p">(</span><span class="n">hue</span><span class="p">,</span> <span class="n">lightness</span><span class="p">,</span> <span class="n">saturation</span><span class="p">,</span> <span class="n">a</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
        <span class="n">qcolor</span> <span class="o">=</span> <span class="n">QtGui</span><span class="o">.</span><span class="n">QColor</span><span class="p">()</span>
        <span class="n">qcolor</span><span class="o">.</span><span class="n">setHsv</span><span class="p">(</span><span class="n">hue</span><span class="p">,</span> <span class="n">lightness</span><span class="p">,</span> <span class="n">saturation</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">qcolor</span>

<div class="viewcode-block" id="BandInfoDialog.resetColorTable"><a class="viewcode-back" href="../../../api/gsdview.gdalbackend.widgets.html#gsdview.gdalbackend.widgets.BandInfoDialog.resetColorTable">[docs]</a>    <span class="k">def</span> <span class="nf">resetColorTable</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ctInterpretationValue</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">colorsNumberValue</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">)</span>
        <span class="n">qt4support</span><span class="o">.</span><span class="n">clearTable</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">colorTableWidget</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="BandInfoDialog.setColorTable"><a class="viewcode-back" href="../../../api/gsdview.gdalbackend.widgets.html#gsdview.gdalbackend.widgets.BandInfoDialog.setColorTable">[docs]</a>    <span class="k">def</span> <span class="nf">setColorTable</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">colortable</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">colortable</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">resetColorTable</span><span class="p">()</span>
            <span class="k">return</span>

        <span class="n">ncolors</span> <span class="o">=</span> <span class="n">colortable</span><span class="o">.</span><span class="n">GetCount</span><span class="p">()</span>
        <span class="n">colorint</span> <span class="o">=</span> <span class="n">colortable</span><span class="o">.</span><span class="n">GetPaletteInterpretation</span><span class="p">()</span>

        <span class="n">label</span> <span class="o">=</span> <span class="n">gdalsupport</span><span class="o">.</span><span class="n">colorinterpretations</span><span class="p">[</span><span class="n">colorint</span><span class="p">][</span><span class="s">&#39;label&#39;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ctInterpretationValue</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">label</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">colorsNumberValue</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">ncolors</span><span class="p">))</span>

        <span class="n">mapping</span> <span class="o">=</span> <span class="n">gdalsupport</span><span class="o">.</span><span class="n">colorinterpretations</span><span class="p">[</span><span class="n">colorint</span><span class="p">][</span><span class="s">&#39;inverse&#39;</span><span class="p">]</span>
        <span class="n">labels</span> <span class="o">=</span> <span class="p">[</span><span class="n">mapping</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">mapping</span><span class="o">.</span><span class="n">keys</span><span class="p">())]</span>
        <span class="n">labels</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">&#39;Color&#39;</span><span class="p">)</span>

        <span class="n">tablewidget</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">colorTableWidget</span>

        <span class="n">tablewidget</span><span class="o">.</span><span class="n">setRowCount</span><span class="p">(</span><span class="n">ncolors</span><span class="p">)</span>
        <span class="n">tablewidget</span><span class="o">.</span><span class="n">setColumnCount</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">labels</span><span class="p">))</span>

        <span class="n">tablewidget</span><span class="o">.</span><span class="n">setHorizontalHeaderLabels</span><span class="p">(</span><span class="n">labels</span><span class="p">)</span>
        <span class="n">tablewidget</span><span class="o">.</span><span class="n">setVerticalHeaderLabels</span><span class="p">([</span><span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">ncolors</span><span class="p">)])</span>

        <span class="n">colors</span> <span class="o">=</span> <span class="n">gdalsupport</span><span class="o">.</span><span class="n">colortable2numpy</span><span class="p">(</span><span class="n">colortable</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">colorint</span> <span class="o">==</span> <span class="n">gdal</span><span class="o">.</span><span class="n">GPI_RGB</span><span class="p">:</span>
            <span class="n">func</span> <span class="o">=</span> <span class="n">BandInfoDialog</span><span class="o">.</span><span class="n">_rgb2qcolor</span>
        <span class="k">elif</span> <span class="n">colorint</span> <span class="o">==</span> <span class="n">gdal</span><span class="o">.</span><span class="n">GPI_Gray</span><span class="p">:</span>
            <span class="n">func</span> <span class="o">=</span> <span class="n">BandInfoDialog</span><span class="o">.</span><span class="n">_gray2qcolor</span>
        <span class="k">elif</span> <span class="n">colorint</span> <span class="o">==</span> <span class="n">gdal</span><span class="o">.</span><span class="n">GPI_CMYK</span><span class="p">:</span>
            <span class="n">func</span> <span class="o">=</span> <span class="n">BandInfoDialog</span><span class="o">.</span><span class="n">_cmyk2qcolor</span>
        <span class="k">elif</span> <span class="n">colorint</span> <span class="o">==</span> <span class="n">gdal</span><span class="o">.</span><span class="n">GPI_HLS</span><span class="p">:</span>
            <span class="n">func</span> <span class="o">=</span> <span class="n">BandInfoDialog</span><span class="o">.</span><span class="n">_hsv2qcolor</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s">&#39;invalid color intepretatin: &quot;</span><span class="si">%s</span><span class="s">&quot;&#39;</span> <span class="o">%</span> <span class="n">colorint</span><span class="p">)</span>

        <span class="n">brush</span> <span class="o">=</span> <span class="n">QtGui</span><span class="o">.</span><span class="n">QBrush</span><span class="p">()</span>
        <span class="n">brush</span><span class="o">.</span><span class="n">setStyle</span><span class="p">(</span><span class="n">QtCore</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">SolidPattern</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">row</span><span class="p">,</span> <span class="n">color</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">colors</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">chan</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">color</span><span class="p">):</span>
                <span class="n">tablewidget</span><span class="o">.</span><span class="n">setItem</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="n">chan</span><span class="p">,</span>
                                    <span class="n">QtGui</span><span class="o">.</span><span class="n">QTableWidgetItem</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">value</span><span class="p">)))</span>
            <span class="n">qcolor</span> <span class="o">=</span> <span class="n">func</span><span class="p">(</span><span class="o">*</span><span class="n">color</span><span class="p">)</span>
            <span class="n">brush</span><span class="o">.</span><span class="n">setColor</span><span class="p">(</span><span class="n">qcolor</span><span class="p">)</span>
            <span class="n">item</span> <span class="o">=</span> <span class="n">QtGui</span><span class="o">.</span><span class="n">QTableWidgetItem</span><span class="p">()</span>
            <span class="n">item</span><span class="o">.</span><span class="n">setBackground</span><span class="p">(</span><span class="n">brush</span><span class="p">)</span>
            <span class="n">tablewidget</span><span class="o">.</span><span class="n">setItem</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="n">chan</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">item</span><span class="p">)</span>

        <span class="n">hheader</span> <span class="o">=</span> <span class="n">tablewidget</span><span class="o">.</span><span class="n">horizontalHeader</span><span class="p">()</span>
        <span class="n">hheader</span><span class="o">.</span><span class="n">resizeSections</span><span class="p">(</span><span class="n">QtGui</span><span class="o">.</span><span class="n">QHeaderView</span><span class="o">.</span><span class="n">ResizeToContents</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="BandInfoDialog.updateColorTable"><a class="viewcode-back" href="../../../api/gsdview.gdalbackend.widgets.html#gsdview.gdalbackend.widgets.BandInfoDialog.updateColorTable">[docs]</a>    <span class="k">def</span> <span class="nf">updateColorTable</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">band</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">resetColorTable</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">colortable</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">band</span><span class="o">.</span><span class="n">GetRasterColorTable</span><span class="p">()</span>

            <span class="k">if</span> <span class="n">colortable</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
                <span class="c"># Disable the color table tab</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">tabWidget</span><span class="o">.</span><span class="n">setTabEnabled</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="bp">False</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">tabWidget</span><span class="o">.</span><span class="n">setTabEnabled</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="bp">True</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">setColorTable</span><span class="p">(</span><span class="n">colortable</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="BandInfoDialog.updateOverviewInfo"><a class="viewcode-back" href="../../../api/gsdview.gdalbackend.widgets.html#gsdview.gdalbackend.widgets.BandInfoDialog.updateOverviewInfo">[docs]</a>    <span class="k">def</span> <span class="nf">updateOverviewInfo</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">band</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">overviewWidget</span><span class="o">.</span><span class="n">setItem</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">band</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">overviewWidget</span><span class="o">.</span><span class="n">reset</span><span class="p">()</span>

    <span class="c"># @TODO: check</span></div>
    <span class="nd">@QtCore.Slot</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">_computeStats</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_checkgdalobj</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">statsComputationRequest</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">band</span><span class="p">)</span>

        <span class="c">#~ logging.info(&#39;start statistics computation&#39;)</span>

        <span class="c">#~ band = self.band</span>
        <span class="c">#~ approx = self.approxStatsCheckBox.isChecked()</span>
        <span class="c">#~ band.ComputeStatistics(approx)#, callback=None, callback_data=None)</span>

        <span class="c">#~ # @COMPATIBILITY: workaround fo flagging statistics as computed</span>
        <span class="c">#~ # @SEALSO: ticket #3572 on GDAL Trac</span>
        <span class="c">#~ stats = band.GetStatistics(True, True)</span>
        <span class="c">#~ for name, value in zip(gdalsupport.GDAL_STATS_KEYS, stats):</span>
            <span class="c">#~ band.SetMetadataItem(name, str(value))</span>

        <span class="c">#~ # @TODO: check</span>
        <span class="c">#~ #if self.domainComboBox.currentText() == &#39;&#39;:</span>
        <span class="c">#~ #    self.updateMetadata()</span>
        <span class="c">#~ logging.debug(&#39;statistics computation completed&#39;)</span>
        <span class="c">#~ self.updateStatistics()</span>

    <span class="c"># @TODO: check</span>
    <span class="nd">@QtCore.Slot</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">_computeHistogram</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_checkgdalobj</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">histogramComputationRequest</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">band</span><span class="p">)</span>

        <span class="c">#~ band = self.band</span>
        <span class="c">#~ approx = self.approxStatsCheckBox.isChecked()</span>
        <span class="c">#~ if self.customHistogramCheckBox.isChecked():</span>
            <span class="c">#~ dialog = HistogramConfigDialog(self)</span>

            <span class="c">#~ # @COMPATIBILITY: bug in GDAL 1.6.x line</span>
            <span class="c">#~ # @WARNING: causes a crash in GDAL &lt; 1.6.4 (r18405)</span>
            <span class="c">#~ # @SEEALSO: http://trac.osgeo.org/gdal/ticket/3304</span>
            <span class="c">#~ if gdal.VersionInfo() &lt; &#39;1640&#39;:</span>
                <span class="c">#~ dialog.approxCheckBox.setChecked(True)</span>
                <span class="c">#~ dialog.approxCheckBox.setEnabled(False)</span>

            <span class="c">#~ from osgeo.gdal_array import GDALTypeCodeToNumericTypeCode</span>
            <span class="c">#~ try:</span>
                <span class="c">#~ dtype = GDALTypeCodeToNumericTypeCode(band.DataType)</span>
            <span class="c">#~ except KeyError:</span>
                <span class="c">#~ pass</span>
            <span class="c">#~ else:</span>
                <span class="c">#~ dialog.setLimits(dtype)</span>

            <span class="c">#~ tablewidget = self.histogramTableWidget</span>
            <span class="c">#~ if tablewidget.rowCount() &gt; 0:</span>
                <span class="c">#~ item = tablewidget.item(0, 0)</span>
                <span class="c">#~ vmin = float(item.text())</span>
                <span class="c">#~ item = tablewidget.item(tablewidget.rowCount() - 1 , 1)</span>
                <span class="c">#~ vmax = float(item.text())</span>

                <span class="c">#~ dialog.minSpinBox.setValue(vmin)</span>
                <span class="c">#~ dialog.maxSpinBox.setValue(vmax)</span>
                <span class="c">#~ dialog.nBucketsSpinBox.setValue(tablewidget.rowCount())</span>

            <span class="c">#~ done = False</span>
            <span class="c">#~ while not done:</span>
                <span class="c">#~ ret = dialog.exec_()</span>
                <span class="c">#~ if ret == QtGui.QDialog.Rejected:</span>
                    <span class="c">#~ return</span>
                <span class="c">#~ if dialog.validate() is False:</span>
                    <span class="c">#~ msg = self.tr(&#39;The histogram minimum have been set to a &#39;</span>
                                  <span class="c">#~ &#39;value that is greater or equal of the &#39;</span>
                                  <span class="c">#~ &#39;histogram maximum.\n&#39;</span>
                                  <span class="c">#~ &#39;Please fix it.&#39;)</span>
                    <span class="c">#~ QtGui.QMessageBox.warning(self, self.tr(&#39;WARNING!&#39;), msg)</span>
                <span class="c">#~ else:</span>
                    <span class="c">#~ done = True</span>

            <span class="c">#~ vmin = dialog.minSpinBox.value()</span>
            <span class="c">#~ vmax = dialog.maxSpinBox.value()</span>
            <span class="c">#~ nbuckets = dialog.nBucketsSpinBox.value()</span>
            <span class="c">#~ include_out_of_range = dialog.outOfRangeCheckBox.isChecked()</span>
            <span class="c">#~ approx = dialog.approxCheckBox.isChecked()</span>

            <span class="c">#~ # @TODO: use callback for progress reporting</span>
            <span class="c">#~ hist = qt4support.callExpensiveFunc(</span>
                                <span class="c">#~ band.GetHistogram,</span>
                                <span class="c">#~ vmin, vmax, nbuckets,</span>
                                <span class="c">#~ include_out_of_range, approx)</span>
                                <span class="c">#~ #callback=None, callback_data=None)</span>

        <span class="c">#~ else:</span>
            <span class="c">#~ # @TODO: use callback for progress reporting</span>
            <span class="c">#~ hist = qt4support.callExpensiveFunc(band.GetDefaultHistogram)</span>
                                                <span class="c">#~ #callback=None,</span>
                                                <span class="c">#~ #callback_data=None)</span>
            <span class="c">#~ vmin, vmax, nbuckets, hist = hist</span>

        <span class="c">#~ self.computeHistogramButton.setEnabled(False)</span>
        <span class="c">#~ self.setHistogram(vmin, vmax, nbuckets, hist)</span>
        <span class="c">#~ self.updateStatistics() # @TODO: check</span>

    <span class="nd">@QtCore.Slot</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">_computeOverviews</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_checkgdalobj</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">overviewComputationRequest</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">band</span><span class="p">)</span>

</div>
<span class="n">DatasetInfoDialogBase</span> <span class="o">=</span> <span class="n">qt4support</span><span class="o">.</span><span class="n">getuiform</span><span class="p">(</span><span class="s">&#39;datasetdialog&#39;</span><span class="p">,</span> <span class="n">__name__</span><span class="p">)</span>


<div class="viewcode-block" id="DatasetInfoDialog"><a class="viewcode-back" href="../../../api/gsdview.gdalbackend.widgets.html#gsdview.gdalbackend.widgets.DatasetInfoDialog">[docs]</a><span class="k">class</span> <span class="nc">DatasetInfoDialog</span><span class="p">(</span><span class="n">MajorObjectInfoDialog</span><span class="p">,</span> <span class="n">DatasetInfoDialogBase</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dataset</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                 <span class="n">flags</span><span class="o">=</span><span class="n">QtCore</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">WindowFlags</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">DatasetInfoDialog</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="n">dataset</span><span class="p">,</span> <span class="n">parent</span><span class="p">,</span> <span class="n">flags</span><span class="p">,</span>
                                                <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

        <span class="c"># Set icons</span>
        <span class="n">geticon</span> <span class="o">=</span> <span class="n">qt4support</span><span class="o">.</span><span class="n">geticon</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tabWidget</span><span class="o">.</span><span class="n">setTabIcon</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">geticon</span><span class="p">(</span><span class="s">&#39;info.svg&#39;</span><span class="p">,</span> <span class="s">&#39;gsdview&#39;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tabWidget</span><span class="o">.</span><span class="n">setTabIcon</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">geticon</span><span class="p">(</span><span class="s">&#39;metadata.svg&#39;</span><span class="p">,</span> <span class="n">__name__</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tabWidget</span><span class="o">.</span><span class="n">setTabIcon</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">geticon</span><span class="p">(</span><span class="s">&#39;gcp.svg&#39;</span><span class="p">,</span> <span class="n">__name__</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tabWidget</span><span class="o">.</span><span class="n">setTabIcon</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="n">geticon</span><span class="p">(</span><span class="s">&#39;driver.svg&#39;</span><span class="p">,</span> <span class="n">__name__</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tabWidget</span><span class="o">.</span><span class="n">setTabIcon</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="n">geticon</span><span class="p">(</span><span class="s">&#39;multiple-documents.svg&#39;</span><span class="p">,</span>
                                  <span class="n">__name__</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">driverMetadataWidget</span> <span class="o">=</span> <span class="n">MetadataWidget</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">driverMetadataWidget</span><span class="o">.</span><span class="n">enableDomains</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">driverMetadataWidget</span><span class="o">.</span><span class="n">enableButtons</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>
        <span class="n">layout</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">driverMetadataGroupBox</span><span class="o">.</span><span class="n">layout</span><span class="p">()</span>
        <span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">driverMetadataWidget</span><span class="p">)</span>

        <span class="c"># Context menu actions</span>
        <span class="n">qt4support</span><span class="o">.</span><span class="n">setViewContextActions</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gcpsTableWidget</span><span class="p">)</span>
        <span class="n">qt4support</span><span class="o">.</span><span class="n">setViewContextActions</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fileListWidget</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">gdal</span><span class="o">.</span><span class="n">Dataset</span><span class="p">,</span> <span class="s">&#39;GetFileList&#39;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">tabWidget</span><span class="o">.</span><span class="n">setTabEnabled</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="bp">False</span><span class="p">)</span>

        <span class="c"># Setup Tabs</span>
        <span class="k">if</span> <span class="n">dataset</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>

    <span class="nd">@property</span>
<div class="viewcode-block" id="DatasetInfoDialog.dataset"><a class="viewcode-back" href="../../../api/gsdview.gdalbackend.widgets.html#gsdview.gdalbackend.widgets.DatasetInfoDialog.dataset">[docs]</a>    <span class="k">def</span> <span class="nf">dataset</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_obj</span>
</div>
<div class="viewcode-block" id="DatasetInfoDialog.setDataset"><a class="viewcode-back" href="../../../api/gsdview.gdalbackend.widgets.html#gsdview.gdalbackend.widgets.DatasetInfoDialog.setDataset">[docs]</a>    <span class="k">def</span> <span class="nf">setDataset</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dataset</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_obj</span> <span class="o">=</span> <span class="n">dataset</span>
        <span class="k">if</span> <span class="n">dataset</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="c"># @TODO: check type</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">reset</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="DatasetInfoDialog.reset"><a class="viewcode-back" href="../../../api/gsdview.gdalbackend.widgets.html#gsdview.gdalbackend.widgets.DatasetInfoDialog.reset">[docs]</a>    <span class="k">def</span> <span class="nf">reset</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">DatasetInfoDialog</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">reset</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">resetInfoTab</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">resetDriverTab</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">resetGCPs</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">resetFilesTab</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="DatasetInfoDialog.update"><a class="viewcode-back" href="../../../api/gsdview.gdalbackend.widgets.html#gsdview.gdalbackend.widgets.DatasetInfoDialog.update">[docs]</a>    <span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">DatasetInfoDialog</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">updateInfoTab</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">updateDriverTab</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">updateGCPs</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">updateFilesTab</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="DatasetInfoDialog.resetImageStructure"><a class="viewcode-back" href="../../../api/gsdview.gdalbackend.widgets.html#gsdview.gdalbackend.widgets.DatasetInfoDialog.resetImageStructure">[docs]</a>    <span class="k">def</span> <span class="nf">resetImageStructure</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">_setupImageStructureInfo</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="p">{})</span>
</div>
<div class="viewcode-block" id="DatasetInfoDialog.setImageStructure"><a class="viewcode-back" href="../../../api/gsdview.gdalbackend.widgets.html#gsdview.gdalbackend.widgets.DatasetInfoDialog.setImageStructure">[docs]</a>    <span class="k">def</span> <span class="nf">setImageStructure</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">metadata</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">metadata</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">resetImageStructure</span><span class="p">()</span>

        <span class="n">_setupImageStructureInfo</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">metadata</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="DatasetInfoDialog.updateImageStructure"><a class="viewcode-back" href="../../../api/gsdview.gdalbackend.widgets.html#gsdview.gdalbackend.widgets.DatasetInfoDialog.updateImageStructure">[docs]</a>    <span class="k">def</span> <span class="nf">updateImageStructure</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">dataset</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">metadata</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dataset</span><span class="o">.</span><span class="n">GetMetadata</span><span class="p">(</span><span class="s">&#39;IMAGE_STRUCTURE&#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">metadata</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">setImageStructure</span><span class="p">(</span><span class="n">metadata</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="DatasetInfoDialog.resetInfoTab"><a class="viewcode-back" href="../../../api/gsdview.gdalbackend.widgets.html#gsdview.gdalbackend.widgets.DatasetInfoDialog.resetInfoTab">[docs]</a>    <span class="k">def</span> <span class="nf">resetInfoTab</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">descriptionValue</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rasterCountValue</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s">&#39;0&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">xSizeValue</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s">&#39;0&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ySizeValue</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s">&#39;0&#39;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">projectionValue</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">projectionRefValue</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">resetImageStructure</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">xOffsetValue</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s">&#39;0&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">yOffsetValue</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s">&#39;0&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">a11Value</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s">&#39;1&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">a12Value</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s">&#39;0&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">a21Value</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s">&#39;0&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">a22Value</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s">&#39;1&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="DatasetInfoDialog.updateInfoTab"><a class="viewcode-back" href="../../../api/gsdview.gdalbackend.widgets.html#gsdview.gdalbackend.widgets.DatasetInfoDialog.updateInfoTab">[docs]</a>    <span class="k">def</span> <span class="nf">updateInfoTab</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">dataset</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">resetInfoTab</span><span class="p">()</span>
            <span class="k">return</span>

        <span class="n">dataset</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dataset</span>
        <span class="n">description</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">dataset</span><span class="o">.</span><span class="n">GetDescription</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">descriptionValue</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">description</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">descriptionValue</span><span class="o">.</span><span class="n">setCursorPosition</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rasterCountValue</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">dataset</span><span class="o">.</span><span class="n">RasterCount</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">xSizeValue</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">dataset</span><span class="o">.</span><span class="n">RasterXSize</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ySizeValue</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">dataset</span><span class="o">.</span><span class="n">RasterYSize</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">projectionValue</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">dataset</span><span class="o">.</span><span class="n">GetProjection</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">projectionRefValue</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">dataset</span><span class="o">.</span><span class="n">GetProjectionRef</span><span class="p">())</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">updateImageStructure</span><span class="p">()</span>

        <span class="n">xoffset</span><span class="p">,</span> <span class="n">a11</span><span class="p">,</span> <span class="n">a12</span><span class="p">,</span> <span class="n">yoffset</span><span class="p">,</span> <span class="n">a21</span><span class="p">,</span> <span class="n">a22</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">GetGeoTransform</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">xOffsetValue</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">xoffset</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">yOffsetValue</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">yoffset</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">a11Value</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">a11</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">a12Value</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">a12</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">a21Value</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">a21</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">a22Value</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">a22</span><span class="p">))</span>
</div>
<div class="viewcode-block" id="DatasetInfoDialog.resetDriverTab"><a class="viewcode-back" href="../../../api/gsdview.gdalbackend.widgets.html#gsdview.gdalbackend.widgets.DatasetInfoDialog.resetDriverTab">[docs]</a>    <span class="k">def</span> <span class="nf">resetDriverTab</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">driverShortNameValue</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">driverLongNameValue</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">driverDescriptionValue</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">driverHelpTopicValue</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">driverMetadataWidget</span><span class="o">.</span><span class="n">resetMetadata</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="DatasetInfoDialog.setDriverTab"><a class="viewcode-back" href="../../../api/gsdview.gdalbackend.widgets.html#gsdview.gdalbackend.widgets.DatasetInfoDialog.setDriverTab">[docs]</a>    <span class="k">def</span> <span class="nf">setDriverTab</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">driver</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">resetDriverTab</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">driverShortNameValue</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">driver</span><span class="o">.</span><span class="n">ShortName</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">driverLongNameValue</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">driver</span><span class="o">.</span><span class="n">LongName</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">driverDescriptionValue</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">driver</span><span class="o">.</span><span class="n">GetDescription</span><span class="p">())</span>

        <span class="k">if</span> <span class="n">driver</span><span class="o">.</span><span class="n">HelpTopic</span><span class="p">:</span>
            <span class="n">link</span> <span class="o">=</span> <span class="s">&#39;&#39;&#39;&lt;!DOCTYPE HTML PUBLIC &quot;-//W3C//DTD HTML 4.0//EN&quot; &quot;http://www.w3.org/TR/REC-html40/strict.dtd&quot;&gt;</span>
<span class="s">&lt;html&gt;&lt;head&gt;&lt;meta name=&quot;qrichtext&quot; content=&quot;1&quot; /&gt;&lt;style type=&quot;text/css&quot;&gt;</span>
<span class="s">p, li { white-space: pre-wrap; }</span>
<span class="s">&lt;/style&gt;&lt;/head&gt;&lt;body style=&quot; font-family:&#39;DejaVu Sans&#39;; font-size:10pt; font-weight:400; font-style:normal;&quot;&gt;</span>
<span class="s">&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&lt;a href=&quot;http://www.gdal.org/</span><span class="si">%s</span><span class="s">&quot;&gt;&lt;span style=&quot; text-decoration: underline; color:#0000ff;&quot;&gt;</span><span class="si">%s</span><span class="s">&lt;/span&gt;&lt;/a&gt;&lt;/p&gt;&lt;/body&gt;&lt;/html&gt;&#39;&#39;&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">driver</span><span class="o">.</span><span class="n">HelpTopic</span><span class="p">,</span> <span class="n">driver</span><span class="o">.</span><span class="n">HelpTopic</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">link</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">driver</span><span class="o">.</span><span class="n">HelpTopic</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">driverHelpTopicValue</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">link</span><span class="p">)</span>

        <span class="n">metadatalist</span> <span class="o">=</span> <span class="n">driver</span><span class="o">.</span><span class="n">GetMetadata_List</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">metadatalist</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">driverMetadataWidget</span><span class="o">.</span><span class="n">setMetadata</span><span class="p">(</span><span class="n">metadatalist</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="DatasetInfoDialog.updateDriverTab"><a class="viewcode-back" href="../../../api/gsdview.gdalbackend.widgets.html#gsdview.gdalbackend.widgets.DatasetInfoDialog.updateDriverTab">[docs]</a>    <span class="k">def</span> <span class="nf">updateDriverTab</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">dataset</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">resetDriverTab</span><span class="p">()</span>
            <span class="k">return</span>

        <span class="n">driver</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dataset</span><span class="o">.</span><span class="n">GetDriver</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setDriverTab</span><span class="p">(</span><span class="n">driver</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="DatasetInfoDialog.resetGCPs"><a class="viewcode-back" href="../../../api/gsdview.gdalbackend.widgets.html#gsdview.gdalbackend.widgets.DatasetInfoDialog.resetGCPs">[docs]</a>    <span class="k">def</span> <span class="nf">resetGCPs</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">tablewidget</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gcpsTableWidget</span>
        <span class="n">qt4support</span><span class="o">.</span><span class="n">clearTable</span><span class="p">(</span><span class="n">tablewidget</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gcpsNumValue</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gcpsProjectionValue</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="DatasetInfoDialog.setGCPs"><a class="viewcode-back" href="../../../api/gsdview.gdalbackend.widgets.html#gsdview.gdalbackend.widgets.DatasetInfoDialog.setGCPs">[docs]</a>    <span class="k">def</span> <span class="nf">setGCPs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">gcplist</span><span class="p">,</span> <span class="n">projection</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">resetGCPs</span><span class="p">()</span>

        <span class="n">tablewidget</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gcpsTableWidget</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">gcpsProjectionValue</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">projection</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gcpsNumValue</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">gcplist</span><span class="p">)))</span>

        <span class="n">tablewidget</span><span class="o">.</span><span class="n">setRowCount</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">gcplist</span><span class="p">))</span>
        <span class="n">tablewidget</span><span class="o">.</span><span class="n">setVerticalHeaderLabels</span><span class="p">([</span><span class="nb">str</span><span class="p">(</span><span class="n">gcp</span><span class="o">.</span><span class="n">Id</span><span class="p">)</span> <span class="k">for</span> <span class="n">gcp</span> <span class="ow">in</span> <span class="n">gcplist</span><span class="p">])</span>
        <span class="n">sortingenabled</span> <span class="o">=</span> <span class="n">tablewidget</span><span class="o">.</span><span class="n">isSortingEnabled</span><span class="p">()</span>
        <span class="n">tablewidget</span><span class="o">.</span><span class="n">setSortingEnabled</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>

        <span class="n">Item</span> <span class="o">=</span> <span class="n">QtGui</span><span class="o">.</span><span class="n">QTableWidgetItem</span>
        <span class="k">for</span> <span class="n">row</span><span class="p">,</span> <span class="n">gcp</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">gcplist</span><span class="p">):</span>
            <span class="n">tablewidget</span><span class="o">.</span><span class="n">setItem</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">Item</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">gcp</span><span class="o">.</span><span class="n">GCPPixel</span><span class="p">)))</span>
            <span class="n">tablewidget</span><span class="o">.</span><span class="n">setItem</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">Item</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">gcp</span><span class="o">.</span><span class="n">GCPLine</span><span class="p">)))</span>
            <span class="n">tablewidget</span><span class="o">.</span><span class="n">setItem</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">Item</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">gcp</span><span class="o">.</span><span class="n">GCPX</span><span class="p">)))</span>
            <span class="n">tablewidget</span><span class="o">.</span><span class="n">setItem</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">Item</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">gcp</span><span class="o">.</span><span class="n">GCPY</span><span class="p">)))</span>
            <span class="n">tablewidget</span><span class="o">.</span><span class="n">setItem</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="n">Item</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">gcp</span><span class="o">.</span><span class="n">GCPZ</span><span class="p">)))</span>
            <span class="n">tablewidget</span><span class="o">.</span><span class="n">setItem</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="n">Item</span><span class="p">(</span><span class="n">gcp</span><span class="o">.</span><span class="n">Info</span><span class="p">))</span>
            <span class="c">#~ item.setToolTip(1, gcp.Info)</span>

        <span class="c"># Fix table header behaviour</span>
        <span class="n">tablewidget</span><span class="o">.</span><span class="n">setSortingEnabled</span><span class="p">(</span><span class="n">sortingenabled</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="DatasetInfoDialog.updateGCPs"><a class="viewcode-back" href="../../../api/gsdview.gdalbackend.widgets.html#gsdview.gdalbackend.widgets.DatasetInfoDialog.updateGCPs">[docs]</a>    <span class="k">def</span> <span class="nf">updateGCPs</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">dataset</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">resetGCPs</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c"># It seems there is a bug in GDAL that causes incorrect GCPs</span>
            <span class="c"># handling when a subdatast is opened (a dataset is aready open)</span>
            <span class="c"># @TODO: check and, if the case, file a ticket on</span>
            <span class="c">#        http://www.gdal.org</span>

            <span class="c">#self.setGCPs(dataset.GetGCPs(), dataset.GetGCPProjection())</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">gcplist</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dataset</span><span class="o">.</span><span class="n">GetGCPs</span><span class="p">()</span>
            <span class="k">except</span> <span class="ne">SystemError</span><span class="p">:</span>
                <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s">&#39;unable to read GCPs from dataset </span><span class="si">%s</span><span class="s">&#39;</span> <span class="o">%</span>
                                    <span class="bp">self</span><span class="o">.</span><span class="n">dataset</span><span class="o">.</span><span class="n">GetDescription</span><span class="p">())</span>
                                    <span class="c">#, exc_info=True)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">gcplist</span><span class="p">:</span>
                    <span class="c"># Disable the GCPs tab</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">tabWidget</span><span class="o">.</span><span class="n">setTabEnabled</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="bp">False</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">tabWidget</span><span class="o">.</span><span class="n">setTabEnabled</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="bp">True</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">setGCPs</span><span class="p">(</span><span class="n">gcplist</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dataset</span><span class="o">.</span><span class="n">GetGCPProjection</span><span class="p">())</span>
</div>
<div class="viewcode-block" id="DatasetInfoDialog.resetFilesTab"><a class="viewcode-back" href="../../../api/gsdview.gdalbackend.widgets.html#gsdview.gdalbackend.widgets.DatasetInfoDialog.resetFilesTab">[docs]</a>    <span class="k">def</span> <span class="nf">resetFilesTab</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c">#qt4support.clearTable(self.fileListWidget) # @TODO: check</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fileListWidget</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="DatasetInfoDialog.setFiles"><a class="viewcode-back" href="../../../api/gsdview.gdalbackend.widgets.html#gsdview.gdalbackend.widgets.DatasetInfoDialog.setFiles">[docs]</a>    <span class="k">def</span> <span class="nf">setFiles</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">files</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tabWidget</span><span class="o">.</span><span class="n">setTabEnabled</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="bp">True</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">filename</span> <span class="ow">in</span> <span class="n">files</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fileListWidget</span><span class="o">.</span><span class="n">addItem</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="DatasetInfoDialog.updateFilesTab"><a class="viewcode-back" href="../../../api/gsdview.gdalbackend.widgets.html#gsdview.gdalbackend.widgets.DatasetInfoDialog.updateFilesTab">[docs]</a>    <span class="k">def</span> <span class="nf">updateFilesTab</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">dataset</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">tabWidget</span><span class="o">.</span><span class="n">setTabEnabled</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="bp">True</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">setFiles</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dataset</span><span class="o">.</span><span class="n">GetFileList</span><span class="p">())</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">resetFilesTab</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">tabWidget</span><span class="o">.</span><span class="n">setTabEnabled</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="bp">False</span><span class="p">)</span>

<span class="c">#~ class SubDatasetInfoDialog(DatasetInfoDialog):</span>

    <span class="c">#~ def __init__(self, subdataset, parent=None,</span>
                 <span class="c">#~ flags=QtCore.Qt.WindowFlags(0)):</span>
        <span class="c">#~ assert dataset, &#39;a valid GDAL dataset expected&#39;</span>
        <span class="c">#~ DatasetInfoDialog.__init__(self, subdataset, parent, flags)</span></div></div>
</pre></div>

          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
    
            <p class="logo"><a href="../../../index.html">
              <img class="logo" src="../../../_static/logo.png" alt="Logo"/>
            </a></p>
    
    
    <p>
        <a href="http://sourceforge.net/projects/gsdview">
            <img src="http://sflogo.sourceforge.net/sflogo.php?group_id=226458&type=14" width="150" height="40" alt="Get GSDView at SourceForge.net. Fast, secure and Free Open Source software downloads" />
        </a>
    </p>
    

<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../../../search.html" method="get">
      <input type="text" name="q" size="18" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../py-modindex.html" title="Python Module Index"
             >modules</a></li>
        <li><a href="../../../index.html">GSDView</a> &raquo;</li>
          <li><a href="../../index.html" >Module code</a> &raquo;</li>
          <li><a href="../../gsdview.html" >gsdview</a> &raquo;</li>
          <li><a href="../gdalbackend.html" >gsdview.gdalbackend</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2008-2011, Antonio Valentino.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.0.7.
    </div>
  </body>
</html>