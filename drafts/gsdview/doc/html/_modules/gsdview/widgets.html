
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>gsdview.widgets &mdash; GSDView Open Edition Home Page</title>
    <link rel="stylesheet" href="../../_static/sourceforge.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '0.6.5',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <link rel="shortcut icon" href="../../_static/logo.ico"/>
    <link rel="top" title="GSDView Open Edition Home Page" href="../../index.html" />
    <link rel="up" title="gsdview" href="../gsdview.html" /> 
  </head>
  <body>
    
        
    
    
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a></li>
        <li><a href="../../index.html">GSDView</a> &raquo;</li>
          <li><a href="../index.html" >Module code</a> &raquo;</li>
          <li><a href="../gsdview.html" accesskey="U">gsdview</a> &raquo;</li> 
      </ul>
    </div>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <h1>Source code for gsdview.widgets</h1><div class="highlight"><pre>
<span class="c"># -*- coding: utf-8 -*-</span>

<span class="c">### Copyright (C) 2008-2011 Antonio Valentino &lt;a_valentino@users.sf.net&gt;</span>

<span class="c">### This file is part of GSDView.</span>

<span class="c">### GSDView is free software; you can redistribute it and/or modify</span>
<span class="c">### it under the terms of the GNU General Public License as published by</span>
<span class="c">### the Free Software Foundation; either version 2 of the License, or</span>
<span class="c">### (at your option) any later version.</span>

<span class="c">### GSDView is distributed in the hope that it will be useful,</span>
<span class="c">### but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="c">### MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<span class="c">### GNU General Public License for more details.</span>

<span class="c">### You should have received a copy of the GNU General Public License</span>
<span class="c">### along with GSDView; if not, write to the Free Software</span>
<span class="c">### Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA  02110-1301  USA.</span>


<span class="sd">&#39;&#39;&#39;Widgets and dialogs for GSDView.&#39;&#39;&#39;</span>


<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">import</span> <span class="nn">email</span>
<span class="kn">import</span> <span class="nn">logging</span>
<span class="kn">import</span> <span class="nn">platform</span>
<span class="kn">import</span> <span class="nn">traceback</span>

<span class="kn">from</span> <span class="nn">qt</span> <span class="kn">import</span> <span class="n">QtCore</span><span class="p">,</span> <span class="n">QtGui</span>

<span class="kn">from</span> <span class="nn">.</span> <span class="kn">import</span> <span class="n">info</span>
<span class="kn">from</span> <span class="nn">.</span> <span class="kn">import</span> <span class="n">utils</span>
<span class="kn">from</span> <span class="nn">.</span> <span class="kn">import</span> <span class="n">qt4support</span>


<span class="n">__author__</span> <span class="o">=</span> <span class="s">&#39;$Author: a_valentino $&#39;</span>
<span class="n">__date__</span> <span class="o">=</span> <span class="s">&#39;$Date: 2011-08-01 19:26:21 +0200 (lun, 01 ago 2011) $&#39;</span>
<span class="n">__revision__</span> <span class="o">=</span> <span class="s">&#39;$Revision: 997 $&#39;</span>


<div class="viewcode-block" id="get_mainwin"><a class="viewcode-back" href="../../api/gsdview.widgets.html#gsdview.widgets.get_mainwin">[docs]</a><span class="k">def</span> <span class="nf">get_mainwin</span><span class="p">():</span>
    <span class="c">#mainwin = QtGui.qApp.findChild(QtGui.QMainWindow,  &#39;gsdview-mainwin&#39;)</span>
    <span class="k">for</span> <span class="n">mainwin</span> <span class="ow">in</span> <span class="n">QtGui</span><span class="o">.</span><span class="n">QApplication</span><span class="o">.</span><span class="n">topLevelWidgets</span><span class="p">():</span>
        <span class="k">if</span> <span class="n">mainwin</span><span class="o">.</span><span class="n">objectName</span><span class="p">()</span> <span class="o">==</span> <span class="s">&#39;gsdview-mainwin&#39;</span><span class="p">:</span>
            <span class="k">break</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="c"># if no widget with the searched name is found then reset</span>
        <span class="n">mainwin</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="k">return</span> <span class="n">mainwin</span>

</div>
<div class="viewcode-block" id="get_filedialog"><a class="viewcode-back" href="../../api/gsdview.widgets.html#gsdview.widgets.get_filedialog">[docs]</a><span class="k">def</span> <span class="nf">get_filedialog</span><span class="p">(</span><span class="n">parent</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="c">#mainwin = QtGui.qApp.findChild(QtGui.QMainWindow,  &#39;gsdview-mainwin&#39;)</span>
        <span class="n">mainwin</span> <span class="o">=</span> <span class="n">get_mainwin</span><span class="p">()</span>
        <span class="n">dialog</span> <span class="o">=</span> <span class="n">mainwin</span><span class="o">.</span><span class="n">filedialog</span>
    <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s">&#39;unable to find the GDSView main window widget&#39;</span><span class="p">)</span>
        <span class="n">dialog</span> <span class="o">=</span> <span class="n">QtGui</span><span class="o">.</span><span class="n">QFileDialog</span><span class="p">(</span><span class="n">parent</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">dialog</span>

</div>
<span class="k">def</span> <span class="nf">_choosefile</span><span class="p">(</span><span class="n">filename</span><span class="o">=</span><span class="s">&#39;&#39;</span><span class="p">,</span> <span class="n">dialog</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">dialog</span><span class="p">:</span>
        <span class="n">dialog</span> <span class="o">=</span> <span class="n">get_filedialog</span><span class="p">()</span>

    <span class="n">oldmode</span> <span class="o">=</span> <span class="n">dialog</span><span class="o">.</span><span class="n">fileMode</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">filename</span><span class="p">:</span>
        <span class="n">dialog</span><span class="o">.</span><span class="n">setDirectory</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">filename</span><span class="p">)))</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">mode</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">dialog</span><span class="o">.</span><span class="n">setFileMode</span><span class="p">(</span><span class="n">mode</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">dialog</span><span class="o">.</span><span class="n">exec_</span><span class="p">():</span>
            <span class="n">filename</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">dialog</span><span class="o">.</span><span class="n">selectedFiles</span><span class="p">()[</span><span class="mi">0</span><span class="p">])</span>
    <span class="k">finally</span><span class="p">:</span>
        <span class="n">dialog</span><span class="o">.</span><span class="n">setFileMode</span><span class="p">(</span><span class="n">oldmode</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">filename</span>


<span class="k">def</span> <span class="nf">_choosedir</span><span class="p">(</span><span class="n">dirname</span><span class="p">,</span> <span class="n">dialog</span><span class="o">=</span><span class="bp">None</span><span class="p">,):</span>
    <span class="k">return</span> <span class="n">_choosefile</span><span class="p">(</span><span class="n">dirname</span><span class="p">,</span> <span class="n">dialog</span><span class="p">,</span> <span class="n">QtGui</span><span class="o">.</span><span class="n">QFileDialog</span><span class="o">.</span><span class="n">DirectoryOnly</span><span class="p">)</span>


<span class="n">AboutDialogBase</span> <span class="o">=</span> <span class="n">qt4support</span><span class="o">.</span><span class="n">getuiform</span><span class="p">(</span><span class="s">&#39;aboutdialog&#39;</span><span class="p">,</span> <span class="n">__name__</span><span class="p">)</span>


<div class="viewcode-block" id="AboutDialog"><a class="viewcode-back" href="../../api/gsdview.widgets.html#gsdview.widgets.AboutDialog">[docs]</a><span class="k">class</span> <span class="nc">AboutDialog</span><span class="p">(</span><span class="n">QtGui</span><span class="o">.</span><span class="n">QDialog</span><span class="p">,</span> <span class="n">AboutDialogBase</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">flags</span><span class="o">=</span><span class="n">QtCore</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">WindowFlags</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">AboutDialog</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">flags</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setupUi</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

        <span class="c"># Context menu actions</span>
        <span class="n">qt4support</span><span class="o">.</span><span class="n">setViewContextActions</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">versionsTableWidget</span><span class="p">)</span>

        <span class="c"># Set icons</span>
        <span class="n">logofile</span> <span class="o">=</span> <span class="n">qt4support</span><span class="o">.</span><span class="n">geticonfile</span><span class="p">(</span><span class="s">&#39;GSDView.png&#39;</span><span class="p">,</span> <span class="n">__name__</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setLogo</span><span class="p">(</span><span class="n">logofile</span><span class="p">)</span>

        <span class="c"># Set contents</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">titleLabel</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s">&#39;</span><span class="si">%s</span><span class="s"> v. </span><span class="si">%s</span><span class="s">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tr</span><span class="p">(</span><span class="n">info</span><span class="o">.</span><span class="n">name</span><span class="p">),</span>
                                              <span class="n">info</span><span class="o">.</span><span class="n">version</span><span class="p">))</span>

        <span class="n">description</span> <span class="o">=</span> <span class="s">&#39;&#39;&#39;&lt;p&gt;</span><span class="si">%s</span><span class="s">&lt;/p&gt;</span>
<span class="s">&lt;p&gt;Home Page: &lt;a href=&quot;</span><span class="si">%s</span><span class="s">&quot;&gt;</span><span class="si">%s</span><span class="s">&lt;/a&gt;</span>
<span class="s">&lt;BR&gt;</span>
<span class="s">Project Page: &lt;a href=&quot;http://sourceforge.net/projects/gsdview&quot;&gt;http://sourceforge.net/projects/gsdview&lt;/a&gt;&lt;/p&gt;</span>
<span class="s">&lt;par&gt;</span>
<span class="s">&lt;p&gt;&lt;span style=&quot;font-size:9pt; font-style:italic;&quot;&gt;</span><span class="si">%s</span><span class="s">&lt;/span&gt;&lt;/p&gt;</span>
<span class="s">&#39;&#39;&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tr</span><span class="p">(</span><span class="n">info</span><span class="o">.</span><span class="n">description</span><span class="p">),</span> <span class="n">info</span><span class="o">.</span><span class="n">website</span><span class="p">,</span> <span class="n">info</span><span class="o">.</span><span class="n">website_label</span><span class="p">,</span>
       <span class="n">info</span><span class="o">.</span><span class="n">copyright</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">aboutTextBrowser</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">description</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">setVersions</span><span class="p">()</span>

<div class="viewcode-block" id="AboutDialog.setLogo"><a class="viewcode-back" href="../../api/gsdview.widgets.html#gsdview.widgets.AboutDialog.setLogo">[docs]</a>    <span class="k">def</span> <span class="nf">setLogo</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">logofile</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gsdviewLogoLabel</span><span class="o">.</span><span class="n">setPixmap</span><span class="p">(</span><span class="n">QtGui</span><span class="o">.</span><span class="n">QPixmap</span><span class="p">(</span><span class="n">logofile</span><span class="p">))</span>
</div>
<div class="viewcode-block" id="AboutDialog.setVersions"><a class="viewcode-back" href="../../api/gsdview.widgets.html#gsdview.widgets.AboutDialog.setVersions">[docs]</a>    <span class="k">def</span> <span class="nf">setVersions</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">platformValue</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">platform</span><span class="o">.</span><span class="n">platform</span><span class="p">())</span>
        <span class="n">tablewidget</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">versionsTableWidget</span>
        <span class="n">tablewidget</span><span class="o">.</span><span class="n">verticalHeader</span><span class="p">()</span><span class="o">.</span><span class="n">hide</span><span class="p">()</span>
        <span class="n">tablewidget</span><span class="o">.</span><span class="n">horizontalHeader</span><span class="p">()</span><span class="o">.</span><span class="n">setStretchLastSection</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>
        <span class="n">tablewidget</span><span class="o">.</span><span class="n">setRowCount</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">info</span><span class="o">.</span><span class="n">all_versions</span><span class="p">))</span>
        <span class="k">for</span> <span class="n">row</span><span class="p">,</span> <span class="p">(</span><span class="n">sw</span><span class="p">,</span> <span class="n">version</span><span class="p">,</span> <span class="n">link</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">info</span><span class="o">.</span><span class="n">all_versions</span><span class="p">):</span>
            <span class="n">tablewidget</span><span class="o">.</span><span class="n">setItem</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">QtGui</span><span class="o">.</span><span class="n">QTableWidgetItem</span><span class="p">(</span><span class="n">sw</span><span class="p">))</span>
            <span class="n">tablewidget</span><span class="o">.</span><span class="n">setItem</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">QtGui</span><span class="o">.</span><span class="n">QTableWidgetItem</span><span class="p">(</span><span class="n">version</span><span class="p">))</span>
            <span class="n">tablewidget</span><span class="o">.</span><span class="n">setItem</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">QtGui</span><span class="o">.</span><span class="n">QTableWidgetItem</span><span class="p">(</span><span class="n">link</span><span class="p">))</span>
</div>
<div class="viewcode-block" id="AboutDialog.addSoftwareVersion"><a class="viewcode-back" href="../../api/gsdview.widgets.html#gsdview.widgets.AboutDialog.addSoftwareVersion">[docs]</a>    <span class="k">def</span> <span class="nf">addSoftwareVersion</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sw</span><span class="p">,</span> <span class="n">version</span><span class="p">,</span> <span class="n">link</span><span class="o">=</span><span class="s">&#39;&#39;</span><span class="p">):</span>
        <span class="n">tablewidget</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">versionsTableWidget</span>
        <span class="n">index</span> <span class="o">=</span> <span class="n">tablewidget</span><span class="o">.</span><span class="n">rowCount</span><span class="p">()</span>
        <span class="n">tablewidget</span><span class="o">.</span><span class="n">setRowCount</span><span class="p">(</span><span class="n">index</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>

        <span class="n">tablewidget</span><span class="o">.</span><span class="n">setItem</span><span class="p">(</span><span class="n">index</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">QtGui</span><span class="o">.</span><span class="n">QTableWidgetItem</span><span class="p">(</span><span class="n">sw</span><span class="p">))</span>
        <span class="n">tablewidget</span><span class="o">.</span><span class="n">setItem</span><span class="p">(</span><span class="n">index</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">QtGui</span><span class="o">.</span><span class="n">QTableWidgetItem</span><span class="p">(</span><span class="n">version</span><span class="p">))</span>
        <span class="n">tablewidget</span><span class="o">.</span><span class="n">setItem</span><span class="p">(</span><span class="n">index</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">QtGui</span><span class="o">.</span><span class="n">QTableWidgetItem</span><span class="p">(</span><span class="n">link</span><span class="p">))</span>

</div></div>
<div class="viewcode-block" id="FileEntryWidget"><a class="viewcode-back" href="../../api/gsdview.widgets.html#gsdview.widgets.FileEntryWidget">[docs]</a><span class="k">class</span> <span class="nc">FileEntryWidget</span><span class="p">(</span><span class="n">QtGui</span><span class="o">.</span><span class="n">QWidget</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">contents</span><span class="o">=</span><span class="s">&#39;&#39;</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="n">QtGui</span><span class="o">.</span><span class="n">QFileDialog</span><span class="o">.</span><span class="n">AnyFile</span><span class="p">,</span>
                 <span class="n">dialog</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">flags</span><span class="o">=</span><span class="n">QtCore</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">WindowFlags</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
                 <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">QtGui</span><span class="o">.</span><span class="n">QWidget</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">,</span> <span class="n">flags</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">__completer</span> <span class="o">=</span> <span class="n">QtGui</span><span class="o">.</span><span class="n">QCompleter</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="c"># @TODO: use QFileSystemModel instraed</span>
        <span class="c">#model = QtGui.QFileSystemModel(self.__completer)</span>
        <span class="n">model</span> <span class="o">=</span> <span class="n">QtGui</span><span class="o">.</span><span class="n">QDirModel</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__completer</span><span class="p">)</span>
        <span class="c">#model.setFilter(QtCore.QDir.AllEntries)</span>
        <span class="c">#self.completer.setCompletionMode(QtGui.QCompleter.InlineCompletion)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__completer</span><span class="o">.</span><span class="n">setModel</span><span class="p">(</span><span class="n">model</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">lineEdit</span> <span class="o">=</span> <span class="n">QtGui</span><span class="o">.</span><span class="n">QLineEdit</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">lineEdit</span><span class="o">.</span><span class="n">setCompleter</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__completer</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">contents</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">lineEdit</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">contents</span><span class="p">)</span>

        <span class="n">icon</span> <span class="o">=</span> <span class="n">qt4support</span><span class="o">.</span><span class="n">geticon</span><span class="p">(</span><span class="s">&#39;open.svg&#39;</span><span class="p">,</span> <span class="n">__name__</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">button</span> <span class="o">=</span> <span class="n">QtGui</span><span class="o">.</span><span class="n">QPushButton</span><span class="p">(</span><span class="n">icon</span><span class="p">,</span> <span class="s">&#39;&#39;</span><span class="p">,</span>
                                <span class="n">toolTip</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">tr</span><span class="p">(</span><span class="s">&#39;select from file dialog&#39;</span><span class="p">))</span>

        <span class="n">layout</span> <span class="o">=</span> <span class="n">QtGui</span><span class="o">.</span><span class="n">QHBoxLayout</span><span class="p">()</span>
        <span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">lineEdit</span><span class="p">)</span>
        <span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">button</span><span class="p">)</span>
        <span class="n">layout</span><span class="o">.</span><span class="n">setContentsMargins</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setLayout</span><span class="p">(</span><span class="n">layout</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_mode</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mode</span> <span class="o">=</span> <span class="n">mode</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dialog</span> <span class="o">=</span> <span class="n">dialog</span>

        <span class="c">#~ if not self.dialog:</span>
            <span class="c">#~ self.dialog = get_filedialog(self)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">button</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">choose</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_get_mode</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_mode</span>

    <span class="k">def</span> <span class="nf">_set_mode</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mode</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">mode</span> <span class="o">==</span> <span class="n">QtGui</span><span class="o">.</span><span class="n">QFileDialog</span><span class="o">.</span><span class="n">ExistingFiles</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s">&#39;&quot;QtGui.QFileDialog.ExistingFiles&quot;: multiple &#39;</span>
                             <span class="s">&#39;files selection not allowed&#39;</span><span class="p">)</span>
        <span class="n">model</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">lineEdit</span><span class="o">.</span><span class="n">completer</span><span class="p">()</span><span class="o">.</span><span class="n">model</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">mode</span> <span class="ow">in</span> <span class="p">(</span><span class="n">QtGui</span><span class="o">.</span><span class="n">QFileDialog</span><span class="o">.</span><span class="n">AnyFile</span><span class="p">,</span> <span class="n">QtGui</span><span class="o">.</span><span class="n">QFileDialog</span><span class="o">.</span><span class="n">ExistingFile</span><span class="p">):</span>
            <span class="n">model</span><span class="o">.</span><span class="n">setFilter</span><span class="p">(</span><span class="n">QtCore</span><span class="o">.</span><span class="n">QDir</span><span class="o">.</span><span class="n">AllEntries</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">mode</span> <span class="ow">in</span> <span class="p">(</span><span class="n">QtGui</span><span class="o">.</span><span class="n">QFileDialog</span><span class="o">.</span><span class="n">Directory</span><span class="p">,</span>
                      <span class="n">QtGui</span><span class="o">.</span><span class="n">QFileDialog</span><span class="o">.</span><span class="n">DirectoryOnly</span><span class="p">):</span>
            <span class="n">model</span><span class="o">.</span><span class="n">setFilter</span><span class="p">(</span><span class="n">QtCore</span><span class="o">.</span><span class="n">QDir</span><span class="o">.</span><span class="n">Dirs</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s">&#39;invalid mode: &quot;</span><span class="si">%d</span><span class="s">&quot;&#39;</span> <span class="o">%</span> <span class="n">mode</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_mode</span> <span class="o">=</span> <span class="n">mode</span>

    <span class="n">mode</span> <span class="o">=</span> <span class="nb">property</span><span class="p">(</span><span class="n">_get_mode</span><span class="p">,</span> <span class="n">_set_mode</span><span class="p">)</span>

    <span class="nd">@QtCore.Slot</span><span class="p">()</span>
<div class="viewcode-block" id="FileEntryWidget.choose"><a class="viewcode-back" href="../../api/gsdview.widgets.html#gsdview.widgets.FileEntryWidget.choose">[docs]</a>    <span class="k">def</span> <span class="nf">choose</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">filename</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">lineEdit</span><span class="o">.</span><span class="n">text</span><span class="p">()</span>
        <span class="n">filename</span> <span class="o">=</span> <span class="n">_choosefile</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dialog</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">mode</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">filename</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">lineEdit</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="FileEntryWidget.text"><a class="viewcode-back" href="../../api/gsdview.widgets.html#gsdview.widgets.FileEntryWidget.text">[docs]</a>    <span class="k">def</span> <span class="nf">text</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">lineEdit</span><span class="o">.</span><span class="n">text</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="FileEntryWidget.setText"><a class="viewcode-back" href="../../api/gsdview.widgets.html#gsdview.widgets.FileEntryWidget.setText">[docs]</a>    <span class="k">def</span> <span class="nf">setText</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">lineEdit</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>

</div></div>
<span class="n">GeneralPreferencesPageBase</span> <span class="o">=</span> <span class="n">qt4support</span><span class="o">.</span><span class="n">getuiform</span><span class="p">(</span><span class="s">&#39;general-page&#39;</span><span class="p">,</span> <span class="n">__name__</span><span class="p">)</span>


<div class="viewcode-block" id="GeneralPreferencesPage"><a class="viewcode-back" href="../../api/gsdview.widgets.html#gsdview.widgets.GeneralPreferencesPage">[docs]</a><span class="k">class</span> <span class="nc">GeneralPreferencesPage</span><span class="p">(</span><span class="n">QtGui</span><span class="o">.</span><span class="n">QWidget</span><span class="p">,</span> <span class="n">GeneralPreferencesPageBase</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">flags</span><span class="o">=</span><span class="n">QtCore</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">WindowFlags</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">GeneralPreferencesPage</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">flags</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setupUi</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

        <span class="c"># Avoid promoted widgets</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cachedirEntryWidget</span> <span class="o">=</span> <span class="n">FileEntryWidget</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cachedirEntryWidget</span><span class="o">.</span><span class="n">setToolTip</span><span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">tr</span><span class="p">(</span><span class="s">&#39;Location of the directory for file cache.</span><span class="se">\n</span><span class="s">&#39;</span>
                            <span class="s">&#39;Default: &quot;$HOME/.gsdview&quot;.&#39;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">preferencesGridLayout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cachedirEntryWidget</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">workdirEntryWidget</span> <span class="o">=</span> <span class="n">FileEntryWidget</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">workdirEntryWidget</span><span class="o">.</span><span class="n">setToolTip</span><span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">tr</span><span class="p">(</span><span class="s">&#39;Base directory for files and directories &#39;</span>
                            <span class="s">&#39;selection.</span><span class="se">\n</span><span class="s">Default: &quot;$HOME&quot;.&#39;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fileDialogHorizontalLayout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">workdirEntryWidget</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">loglevelComboBox</span><span class="o">.</span><span class="n">setFocus</span><span class="p">()</span>

        <span class="c"># Log level</span>
        <span class="n">logger</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">()</span>  <span class="c"># @TODO: fix</span>
        <span class="n">level</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLevelName</span><span class="p">(</span><span class="n">logger</span><span class="o">.</span><span class="n">level</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setLoglevel</span><span class="p">(</span><span class="n">level</span><span class="p">)</span>

        <span class="c"># Work directory</span>
        <span class="n">dialog</span> <span class="o">=</span> <span class="n">get_filedialog</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">workdirEntryWidget</span><span class="o">.</span><span class="n">dialog</span> <span class="o">=</span> <span class="n">dialog</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">workdirEntryWidget</span><span class="o">.</span><span class="n">mode</span> <span class="o">=</span> <span class="n">QtGui</span><span class="o">.</span><span class="n">QFileDialog</span><span class="o">.</span><span class="n">Directory</span>
        <span class="c">#self.workdirEntryWidget.mode = QtGui.QFileDialog.DirectoryOnly</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cachedirEntryWidget</span><span class="o">.</span><span class="n">dialog</span> <span class="o">=</span> <span class="n">dialog</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cachedirEntryWidget</span><span class="o">.</span><span class="n">mode</span> <span class="o">=</span> <span class="n">QtGui</span><span class="o">.</span><span class="n">QFileDialog</span><span class="o">.</span><span class="n">Directory</span>
        <span class="c">#self.cachedirEntryWidget.mode = QtGui.QFileDialog.DirectoryOnly</span>

<div class="viewcode-block" id="GeneralPreferencesPage.load"><a class="viewcode-back" href="../../api/gsdview.widgets.html#gsdview.widgets.GeneralPreferencesPage.load">[docs]</a>    <span class="k">def</span> <span class="nf">load</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">settings</span><span class="p">):</span>
        <span class="c"># general</span>
        <span class="n">settings</span><span class="o">.</span><span class="n">beginGroup</span><span class="p">(</span><span class="s">&#39;preferences&#39;</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="c"># log level</span>
            <span class="n">level</span> <span class="o">=</span> <span class="n">settings</span><span class="o">.</span><span class="n">value</span><span class="p">(</span><span class="s">&#39;loglevel&#39;</span><span class="p">)</span>
            <span class="n">index</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">loglevelComboBox</span><span class="o">.</span><span class="n">findText</span><span class="p">(</span><span class="n">level</span><span class="p">)</span>
            <span class="k">if</span> <span class="mi">0</span> <span class="o">&lt;=</span> <span class="n">index</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">loglevelComboBox</span><span class="o">.</span><span class="n">count</span><span class="p">():</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">loglevelComboBox</span><span class="o">.</span><span class="n">setCurrentIndex</span><span class="p">(</span><span class="n">index</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s">&#39;invalid log level: &quot;</span><span class="si">%s</span><span class="s">&quot;&#39;</span> <span class="o">%</span> <span class="n">level</span><span class="p">)</span>

            <span class="c"># cache directory</span>
            <span class="n">cachedir</span> <span class="o">=</span> <span class="n">settings</span><span class="o">.</span><span class="n">value</span><span class="p">(</span><span class="s">&#39;cachedir&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">cachedirEntryWidget</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">cachedir</span><span class="p">)</span>
        <span class="k">finally</span><span class="p">:</span>
            <span class="n">settings</span><span class="o">.</span><span class="n">endGroup</span><span class="p">()</span>

        <span class="c"># filedialog</span>
        <span class="n">settings</span><span class="o">.</span><span class="n">beginGroup</span><span class="p">(</span><span class="s">&#39;filedialog&#39;</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="c"># workdir</span>
            <span class="n">workdir</span> <span class="o">=</span> <span class="n">settings</span><span class="o">.</span><span class="n">value</span><span class="p">(</span><span class="s">&#39;workdir&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">workdirEntryWidget</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">workdir</span><span class="p">)</span>
        <span class="k">finally</span><span class="p">:</span>
            <span class="n">settings</span><span class="o">.</span><span class="n">endGroup</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="GeneralPreferencesPage.save"><a class="viewcode-back" href="../../api/gsdview.widgets.html#gsdview.widgets.GeneralPreferencesPage.save">[docs]</a>    <span class="k">def</span> <span class="nf">save</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">settings</span><span class="p">):</span>
        <span class="c"># general</span>
        <span class="n">settings</span><span class="o">.</span><span class="n">beginGroup</span><span class="p">(</span><span class="s">&#39;preferences&#39;</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="c"># log level</span>
            <span class="n">settings</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="s">&#39;loglevel&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">loglevelComboBox</span><span class="o">.</span><span class="n">currentText</span><span class="p">())</span>

            <span class="c"># cache directory</span>
            <span class="n">cachedir</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cachedirEntryWidget</span><span class="o">.</span><span class="n">text</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">cachedir</span><span class="p">:</span>
                <span class="n">settings</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="s">&#39;cachedir&#39;</span><span class="p">,</span> <span class="n">cachedir</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">settings</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="s">&#39;cachedir&#39;</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">cachedirEntryWidget</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">cachedir</span><span class="p">)</span>

        <span class="k">finally</span><span class="p">:</span>
            <span class="n">settings</span><span class="o">.</span><span class="n">endGroup</span><span class="p">()</span>

        <span class="c"># file dialog</span>
        <span class="n">settings</span><span class="o">.</span><span class="n">beginGroup</span><span class="p">(</span><span class="s">&#39;filedialog&#39;</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="c"># @TODO: clear state</span>

            <span class="c"># workdir</span>
            <span class="n">workdir</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">workdirEntryWidget</span><span class="o">.</span><span class="n">text</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">workdir</span><span class="p">:</span>
                <span class="n">workdir</span> <span class="o">=</span> <span class="n">settings</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="s">&#39;workdir&#39;</span><span class="p">,</span> <span class="n">workdir</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">settings</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="s">&#39;workdir&#39;</span><span class="p">)</span>

            <span class="c"># @TODO: clear history</span>
        <span class="k">finally</span><span class="p">:</span>
            <span class="n">settings</span><span class="o">.</span><span class="n">endGroup</span><span class="p">()</span>

    <span class="c"># Log level</span></div>
<div class="viewcode-block" id="GeneralPreferencesPage.setLoglevel"><a class="viewcode-back" href="../../api/gsdview.widgets.html#gsdview.widgets.GeneralPreferencesPage.setLoglevel">[docs]</a>    <span class="k">def</span> <span class="nf">setLoglevel</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">level</span><span class="o">=</span><span class="s">&#39;INFO&#39;</span><span class="p">):</span>
        <span class="n">index</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">loglevelComboBox</span><span class="o">.</span><span class="n">findText</span><span class="p">(</span><span class="n">level</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">loglevelComboBox</span><span class="o">.</span><span class="n">setCurrentIndex</span><span class="p">(</span><span class="n">index</span><span class="p">)</span>

</div></div>
<span class="n">PreferencesDialogBase</span> <span class="o">=</span> <span class="n">qt4support</span><span class="o">.</span><span class="n">getuiform</span><span class="p">(</span><span class="s">&#39;preferences&#39;</span><span class="p">,</span> <span class="n">__name__</span><span class="p">)</span>


<div class="viewcode-block" id="PreferencesDialog"><a class="viewcode-back" href="../../api/gsdview.widgets.html#gsdview.widgets.PreferencesDialog">[docs]</a><span class="k">class</span> <span class="nc">PreferencesDialog</span><span class="p">(</span><span class="n">QtGui</span><span class="o">.</span><span class="n">QDialog</span><span class="p">,</span> <span class="n">PreferencesDialogBase</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;Extendible preferences dialogg for GSDView.</span>

<span class="sd">    :SIGNALS:</span>

<span class="sd">    * :attr:`apply`</span>

<span class="sd">    &#39;&#39;&#39;</span>

    <span class="c">#: SIGNAL: it is emitted when modifications are applied</span>
    <span class="c">#:</span>
    <span class="c">#: :C++ signature: `void apply()`</span>
    <span class="nb">apply</span> <span class="o">=</span> <span class="n">QtCore</span><span class="o">.</span><span class="n">Signal</span><span class="p">()</span>

    <span class="c"># @TODO: also look at</span>
    <span class="c"># .../python-qt4-doc/examples/tools/settingseditor/settingseditor.py</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">flags</span><span class="o">=</span><span class="n">QtCore</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">WindowFlags</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">PreferencesDialog</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">flags</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setupUi</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">setWindowIcon</span><span class="p">(</span><span class="n">qt4support</span><span class="o">.</span><span class="n">geticon</span><span class="p">(</span><span class="s">&#39;preferences.svg&#39;</span><span class="p">,</span> <span class="n">__name__</span><span class="p">))</span>

        <span class="c"># remove empty page</span>
        <span class="n">page</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">stackedWidget</span><span class="o">.</span><span class="n">widget</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stackedWidget</span><span class="o">.</span><span class="n">removeWidget</span><span class="p">(</span><span class="n">page</span><span class="p">)</span>

        <span class="c"># app pages</span>
        <span class="n">icon</span> <span class="o">=</span> <span class="n">qt4support</span><span class="o">.</span><span class="n">geticon</span><span class="p">(</span><span class="s">&#39;preferences.svg&#39;</span><span class="p">,</span> <span class="n">__name__</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">addPage</span><span class="p">(</span><span class="n">GeneralPreferencesPage</span><span class="p">(),</span> <span class="n">icon</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">tr</span><span class="p">(</span><span class="s">&#39;General&#39;</span><span class="p">))</span>

        <span class="c">#~ icon = qt4support.geticon(&#39;harddisk.svg&#39;, __name__)</span>
        <span class="c">#~ self.addPage(CachePreferencesPage(), icon, self.tr(&#39;Cache&#39;))</span>

        <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">listWidget</span><span class="o">.</span><span class="n">count</span><span class="p">()</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">stackedWidget</span><span class="o">.</span><span class="n">count</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">listWidget</span><span class="o">.</span><span class="n">currentItemChanged</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">changePage</span><span class="p">)</span>

        <span class="n">applybutton</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">buttonBox</span><span class="o">.</span><span class="n">button</span><span class="p">(</span><span class="n">QtGui</span><span class="o">.</span><span class="n">QDialogButtonBox</span><span class="o">.</span><span class="n">Apply</span><span class="p">)</span>
        <span class="n">applybutton</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">apply</span><span class="p">)</span>

    <span class="c"># @TODO: check</span>
    <span class="c">#@QtCore.Slot(QtGui.QListWidgetItem, QtGui.QListWidgetItem)</span>
<div class="viewcode-block" id="PreferencesDialog.changePage"><a class="viewcode-back" href="../../api/gsdview.widgets.html#gsdview.widgets.PreferencesDialog.changePage">[docs]</a>    <span class="k">def</span> <span class="nf">changePage</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">current</span><span class="p">,</span> <span class="n">previous</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">current</span><span class="p">:</span>
            <span class="n">current</span> <span class="o">=</span> <span class="n">previous</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">stackedWidget</span><span class="o">.</span><span class="n">setCurrentIndex</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">listWidget</span><span class="o">.</span><span class="n">row</span><span class="p">(</span><span class="n">current</span><span class="p">))</span>
</div>
<div class="viewcode-block" id="PreferencesDialog.addPage"><a class="viewcode-back" href="../../api/gsdview.widgets.html#gsdview.widgets.PreferencesDialog.addPage">[docs]</a>    <span class="k">def</span> <span class="nf">addPage</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">page</span><span class="p">,</span> <span class="n">icon</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="nb">hasattr</span><span class="p">(</span><span class="n">page</span><span class="p">,</span> <span class="s">&#39;load&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">page</span><span class="p">,</span> <span class="s">&#39;save&#39;</span><span class="p">)):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s">&#39;preference pages must have both &quot;load&quot; and &#39;</span>
                            <span class="s">&#39;&quot;save&quot; methods&#39;</span><span class="p">)</span>
        <span class="n">index</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">stackedWidget</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">page</span><span class="p">)</span>
        <span class="n">item</span> <span class="o">=</span> <span class="n">QtGui</span><span class="o">.</span><span class="n">QListWidgetItem</span><span class="p">(</span><span class="n">icon</span><span class="p">,</span> <span class="n">label</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">listWidget</span><span class="o">.</span><span class="n">addItem</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
        <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">listWidget</span><span class="o">.</span><span class="n">row</span><span class="p">(</span><span class="n">item</span><span class="p">)</span> <span class="o">==</span> <span class="n">index</span>
</div>
<div class="viewcode-block" id="PreferencesDialog.removePageIndex"><a class="viewcode-back" href="../../api/gsdview.widgets.html#gsdview.widgets.PreferencesDialog.removePageIndex">[docs]</a>    <span class="k">def</span> <span class="nf">removePageIndex</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
        <span class="k">if</span> <span class="mi">0</span> <span class="o">&lt;=</span> <span class="n">index</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">stackedWidget</span><span class="o">.</span><span class="n">count</span><span class="p">():</span>
            <span class="n">page</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">stackedWidget</span><span class="o">.</span><span class="n">widget</span><span class="p">(</span><span class="n">index</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">stackedWidget</span><span class="o">.</span><span class="n">removeWidget</span><span class="p">(</span><span class="n">page</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">listWidget</span><span class="o">.</span><span class="n">model</span><span class="p">()</span><span class="o">.</span><span class="n">removeRow</span><span class="p">(</span><span class="n">index</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="PreferencesDialog.removePage"><a class="viewcode-back" href="../../api/gsdview.widgets.html#gsdview.widgets.PreferencesDialog.removePage">[docs]</a>    <span class="k">def</span> <span class="nf">removePage</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">page</span><span class="p">):</span>
        <span class="n">index</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">stackedWidget</span><span class="o">.</span><span class="n">indexOf</span><span class="p">(</span><span class="n">page</span><span class="p">)</span>
        <span class="k">if</span> <span class="mi">0</span> <span class="o">&lt;=</span> <span class="n">index</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">stackedWidget</span><span class="o">.</span><span class="n">count</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">stackedWidget</span><span class="o">.</span><span class="n">removeWidget</span><span class="p">(</span><span class="n">page</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">listWidget</span><span class="o">.</span><span class="n">model</span><span class="p">()</span><span class="o">.</span><span class="n">removeRow</span><span class="p">(</span><span class="n">index</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="PreferencesDialog.load"><a class="viewcode-back" href="../../api/gsdview.widgets.html#gsdview.widgets.PreferencesDialog.load">[docs]</a>    <span class="k">def</span> <span class="nf">load</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">settings</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">index</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">stackedWidget</span><span class="o">.</span><span class="n">count</span><span class="p">()):</span>
            <span class="n">page</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">stackedWidget</span><span class="o">.</span><span class="n">widget</span><span class="p">(</span><span class="n">index</span><span class="p">)</span>
            <span class="n">page</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">settings</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="PreferencesDialog.save"><a class="viewcode-back" href="../../api/gsdview.widgets.html#gsdview.widgets.PreferencesDialog.save">[docs]</a>    <span class="k">def</span> <span class="nf">save</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">settings</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">index</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">stackedWidget</span><span class="o">.</span><span class="n">count</span><span class="p">()):</span>
            <span class="n">page</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">stackedWidget</span><span class="o">.</span><span class="n">widget</span><span class="p">(</span><span class="n">index</span><span class="p">)</span>
            <span class="n">page</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">settings</span><span class="p">)</span>

</div></div>
<span class="n">ExceptionDialogBase</span> <span class="o">=</span> <span class="n">qt4support</span><span class="o">.</span><span class="n">getuiform</span><span class="p">(</span><span class="s">&#39;exceptiondialog&#39;</span><span class="p">,</span> <span class="n">__name__</span><span class="p">)</span>


<div class="viewcode-block" id="ExceptionDialog"><a class="viewcode-back" href="../../api/gsdview.widgets.html#gsdview.widgets.ExceptionDialog">[docs]</a><span class="k">class</span> <span class="nc">ExceptionDialog</span><span class="p">(</span><span class="n">QtGui</span><span class="o">.</span><span class="n">QDialog</span><span class="p">,</span> <span class="n">ExceptionDialogBase</span><span class="p">):</span>

    <span class="c"># @TODO: traceback highlighting</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">exctype</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">excvalue</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">tracebackobj</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                 <span class="n">parent</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">flags</span><span class="o">=</span><span class="n">QtCore</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">WindowFlags</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span> <span class="n">fill</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
                 <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">ExceptionDialog</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">flags</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setupUi</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

        <span class="n">title</span> <span class="o">=</span> <span class="s">&#39;Critical error: unhandled exception occurred&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setWindowTitle</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tr</span><span class="p">(</span><span class="n">title</span><span class="p">))</span>

        <span class="n">closebutton</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">buttonBox</span><span class="o">.</span><span class="n">button</span><span class="p">(</span><span class="n">QtGui</span><span class="o">.</span><span class="n">QDialogButtonBox</span><span class="o">.</span><span class="n">Close</span><span class="p">)</span>
        <span class="n">closebutton</span><span class="o">.</span><span class="n">setDefault</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>

        <span class="n">style</span> <span class="o">=</span> <span class="n">QtGui</span><span class="o">.</span><span class="n">QApplication</span><span class="o">.</span><span class="n">style</span><span class="p">()</span>

        <span class="n">icon</span> <span class="o">=</span> <span class="n">style</span><span class="o">.</span><span class="n">standardIcon</span><span class="p">(</span><span class="n">style</span><span class="o">.</span><span class="n">SP_CommandLink</span><span class="p">)</span>
        <span class="n">sendbutton</span> <span class="o">=</span> <span class="n">QtGui</span><span class="o">.</span><span class="n">QPushButton</span><span class="p">(</span>
                            <span class="n">icon</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">tr</span><span class="p">(</span><span class="s">&#39;Send&#39;</span><span class="p">),</span>
                            <span class="n">toolTip</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">tr</span><span class="p">(</span><span class="s">&#39;Send the bug-report via email.&#39;</span><span class="p">),</span>
                            <span class="n">autoDefault</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
                            <span class="n">clicked</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">sendBugReport</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sendbutton</span> <span class="o">=</span> <span class="n">sendbutton</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">buttonBox</span><span class="o">.</span><span class="n">addButton</span><span class="p">(</span><span class="n">sendbutton</span><span class="p">,</span> <span class="n">QtGui</span><span class="o">.</span><span class="n">QDialogButtonBox</span><span class="o">.</span><span class="n">ActionRole</span><span class="p">)</span>

        <span class="n">icon</span> <span class="o">=</span> <span class="n">style</span><span class="o">.</span><span class="n">standardIcon</span><span class="p">(</span><span class="n">style</span><span class="o">.</span><span class="n">SP_DialogSaveButton</span><span class="p">)</span>
        <span class="n">savebutton</span> <span class="o">=</span> <span class="n">QtGui</span><span class="o">.</span><span class="n">QPushButton</span><span class="p">(</span>
                            <span class="n">icon</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">tr</span><span class="p">(</span><span class="s">&#39;&amp;Save&#39;</span><span class="p">),</span>
                            <span class="n">toolTip</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">tr</span><span class="p">(</span><span class="s">&#39;Save the bug-report on file.&#39;</span><span class="p">),</span>
                            <span class="n">autoDefault</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
                            <span class="n">clicked</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">saveBugReport</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">savebutton</span> <span class="o">=</span> <span class="n">savebutton</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">buttonBox</span><span class="o">.</span><span class="n">addButton</span><span class="p">(</span><span class="n">savebutton</span><span class="p">,</span> <span class="n">QtGui</span><span class="o">.</span><span class="n">QDialogButtonBox</span><span class="o">.</span><span class="n">ActionRole</span><span class="p">)</span>

        <span class="n">pixmap</span> <span class="o">=</span> <span class="n">style</span><span class="o">.</span><span class="n">standardPixmap</span><span class="p">(</span><span class="n">style</span><span class="o">.</span><span class="n">SP_MessageBoxCritical</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">iconLabel</span><span class="o">.</span><span class="n">setPixmap</span><span class="p">(</span><span class="n">pixmap</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">exctype</span> <span class="o">=</span> <span class="n">exctype</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">excvalue</span> <span class="o">=</span> <span class="n">excvalue</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tracebackobj</span> <span class="o">=</span> <span class="n">tracebackobj</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">textLabel</span><span class="o">.</span><span class="n">linkActivated</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_linkActivated</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">fill</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_excInfoSet</span><span class="p">():</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">setExcInfo</span><span class="p">(</span><span class="o">*</span><span class="n">sys</span><span class="o">.</span><span class="n">exc_info</span><span class="p">())</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_fill</span><span class="p">()</span>

    <span class="nd">@QtCore.Slot</span><span class="p">(</span><span class="nb">str</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">_linkActivated</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">link</span><span class="p">):</span>
        <span class="c"># @TODO: better url parsing</span>
        <span class="k">if</span> <span class="s">&#39;mailto&#39;</span> <span class="ow">in</span> <span class="nb">str</span><span class="p">(</span><span class="n">link</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">sendBugReport</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">QtGui</span><span class="o">.</span><span class="n">QDesktopServices</span><span class="o">.</span><span class="n">openUrl</span><span class="p">(</span><span class="n">QtCore</span><span class="o">.</span><span class="n">QUrl</span><span class="p">(</span><span class="n">link</span><span class="p">))</span>

<div class="viewcode-block" id="ExceptionDialog.errorMsg"><a class="viewcode-back" href="../../api/gsdview.widgets.html#gsdview.widgets.ExceptionDialog.errorMsg">[docs]</a>    <span class="k">def</span> <span class="nf">errorMsg</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">errormsgLabel</span><span class="o">.</span><span class="n">text</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="ExceptionDialog.setErrorMsg"><a class="viewcode-back" href="../../api/gsdview.widgets.html#gsdview.widgets.ExceptionDialog.setErrorMsg">[docs]</a>    <span class="k">def</span> <span class="nf">setErrorMsg</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="p">):</span>
        <span class="c">#errormsg = traceback.format_exception_only(exctype, excvalue)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">errorMsgLabel</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="ExceptionDialog.traceback"><a class="viewcode-back" href="../../api/gsdview.widgets.html#gsdview.widgets.ExceptionDialog.traceback">[docs]</a>    <span class="k">def</span> <span class="nf">traceback</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">tracebackTextEdit</span><span class="o">.</span><span class="n">document</span><span class="p">()</span><span class="o">.</span><span class="n">toPlainText</span><span class="p">()</span>
</div>
    <span class="k">def</span> <span class="nf">_setTracebackText</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tracebackTextEdit</span><span class="o">.</span><span class="n">document</span><span class="p">()</span><span class="o">.</span><span class="n">setPlainText</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>

<div class="viewcode-block" id="ExceptionDialog.setTraceback"><a class="viewcode-back" href="../../api/gsdview.widgets.html#gsdview.widgets.ExceptionDialog.setTraceback">[docs]</a>    <span class="k">def</span> <span class="nf">setTraceback</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tb</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">tb</span><span class="p">,</span> <span class="nb">basestring</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">tracebackobj</span> <span class="o">=</span> <span class="n">tb</span>
            <span class="n">tb</span> <span class="o">=</span> <span class="s">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">traceback</span><span class="o">.</span><span class="n">format_tb</span><span class="p">(</span><span class="n">tb</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>  <span class="c"># @TODO: check</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">resetExcInfo</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_setTracebackText</span><span class="p">(</span><span class="n">tb</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="ExceptionDialog.timeStamp"><a class="viewcode-back" href="../../api/gsdview.widgets.html#gsdview.widgets.ExceptionDialog.timeStamp">[docs]</a>    <span class="k">def</span> <span class="nf">timeStamp</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">timestampLabel</span><span class="o">.</span><span class="n">text</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="ExceptionDialog.setTimeStamp"><a class="viewcode-back" href="../../api/gsdview.widgets.html#gsdview.widgets.ExceptionDialog.setTimeStamp">[docs]</a>    <span class="k">def</span> <span class="nf">setTimeStamp</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">timestamp</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">timestamp</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">timestamp</span> <span class="o">=</span> <span class="n">email</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">formatdate</span><span class="p">(</span><span class="n">localtime</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">timestampLabel</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">timestamp</span><span class="p">)</span>
</div>
    <span class="k">def</span> <span class="nf">_fill</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_excInfoSet</span><span class="p">():</span>
            <span class="n">lines</span> <span class="o">=</span> <span class="n">traceback</span><span class="o">.</span><span class="n">format_exception_only</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">exctype</span><span class="p">,</span>
                                                    <span class="bp">self</span><span class="o">.</span><span class="n">excvalue</span><span class="p">)</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">lines</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">setErrorMsg</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">setTraceback</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tracebackobj</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">setTimeStamp</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">setErrorMsg</span><span class="p">(</span><span class="s">&#39;None&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_setTracebackText</span><span class="p">(</span><span class="s">&#39;None&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">setTimeStamp</span><span class="p">(</span><span class="s">&#39;None&#39;</span><span class="p">)</span>

<div class="viewcode-block" id="ExceptionDialog.setExcInfo"><a class="viewcode-back" href="../../api/gsdview.widgets.html#gsdview.widgets.ExceptionDialog.setExcInfo">[docs]</a>    <span class="k">def</span> <span class="nf">setExcInfo</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">exctype</span><span class="p">,</span> <span class="n">excvalue</span><span class="p">,</span> <span class="n">tracebackobj</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">exctype</span> <span class="o">=</span> <span class="n">exctype</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">excvalue</span> <span class="o">=</span> <span class="n">excvalue</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tracebackobj</span> <span class="o">=</span> <span class="n">tracebackobj</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_fill</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="ExceptionDialog.resetExcInfo"><a class="viewcode-back" href="../../api/gsdview.widgets.html#gsdview.widgets.ExceptionDialog.resetExcInfo">[docs]</a>    <span class="k">def</span> <span class="nf">resetExcInfo</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setExcInfo</span><span class="p">(</span><span class="bp">None</span><span class="p">,</span> <span class="bp">None</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="ExceptionDialog.text"><a class="viewcode-back" href="../../api/gsdview.widgets.html#gsdview.widgets.ExceptionDialog.text">[docs]</a>    <span class="k">def</span> <span class="nf">text</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">textLabel</span><span class="o">.</span><span class="n">text</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="ExceptionDialog.setText"><a class="viewcode-back" href="../../api/gsdview.widgets.html#gsdview.widgets.ExceptionDialog.setText">[docs]</a>    <span class="k">def</span> <span class="nf">setText</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">textLabel</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
</div>
    <span class="k">def</span> <span class="nf">_excInfoSet</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">all</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">exctype</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">excvalue</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">tracebackobj</span><span class="p">))</span>

    <span class="nd">@QtCore.Slot</span><span class="p">()</span>
<div class="viewcode-block" id="ExceptionDialog.sendBugReport"><a class="viewcode-back" href="../../api/gsdview.widgets.html#gsdview.widgets.ExceptionDialog.sendBugReport">[docs]</a>    <span class="k">def</span> <span class="nf">sendBugReport</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_excInfoSet</span><span class="p">():</span>
            <span class="n">exctype</span><span class="p">,</span> <span class="n">excvalue</span><span class="p">,</span> <span class="n">tracebackobj</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">exc_info</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">exctype</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">exctype</span>
            <span class="n">excvalue</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">excvalue</span>
            <span class="n">tracebackobj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tracebackobj</span>

        <span class="n">error</span> <span class="o">=</span> <span class="n">traceback</span><span class="o">.</span><span class="n">format_exception_only</span><span class="p">(</span><span class="n">exctype</span><span class="p">,</span> <span class="n">excvalue</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
        <span class="n">appname</span> <span class="o">=</span> <span class="n">QtGui</span><span class="o">.</span><span class="n">QApplication</span><span class="o">.</span><span class="n">applicationName</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">appname</span><span class="p">:</span>
            <span class="n">subject</span> <span class="o">=</span> <span class="s">&#39;[</span><span class="si">%s</span><span class="s">] Bug report - </span><span class="si">%s</span><span class="s">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">appname</span><span class="p">,</span> <span class="n">error</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">subject</span> <span class="o">=</span> <span class="s">&#39;Bug report - </span><span class="si">%s</span><span class="s">&#39;</span> <span class="o">%</span> <span class="n">error</span>
        <span class="n">body</span> <span class="o">=</span> <span class="s">&#39;[Please instest your comments and additinal info here.]&#39;</span>
        <span class="n">body</span> <span class="o">+=</span> <span class="s">&#39;</span><span class="se">\n\n</span><span class="s">&#39;</span> <span class="o">+</span> <span class="s">&#39;-&#39;</span> <span class="o">*</span> <span class="mi">80</span> <span class="o">+</span> <span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span>
        <span class="n">body</span> <span class="o">+=</span> <span class="s">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">utils</span><span class="o">.</span><span class="n">foramt_bugreport</span><span class="p">(</span><span class="n">exctype</span><span class="p">,</span> <span class="n">excvalue</span><span class="p">,</span>
                                               <span class="n">tracebackobj</span><span class="p">))</span>

        <span class="n">url</span> <span class="o">=</span> <span class="n">QtCore</span><span class="o">.</span><span class="n">QUrl</span><span class="p">(</span><span class="s">&#39;mailto:</span><span class="si">%s</span><span class="s"> &lt;</span><span class="si">%s</span><span class="s">&gt;&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">info</span><span class="o">.</span><span class="n">author</span><span class="p">,</span> <span class="n">info</span><span class="o">.</span><span class="n">author_email</span><span class="p">))</span>
        <span class="n">url</span><span class="o">.</span><span class="n">addQueryItem</span><span class="p">(</span><span class="s">&#39;subject&#39;</span><span class="p">,</span> <span class="n">subject</span><span class="p">)</span>
        <span class="n">url</span><span class="o">.</span><span class="n">addQueryItem</span><span class="p">(</span><span class="s">&#39;body&#39;</span><span class="p">,</span> <span class="n">body</span><span class="p">)</span>

        <span class="n">ret</span> <span class="o">=</span> <span class="n">QtGui</span><span class="o">.</span><span class="n">QDesktopServices</span><span class="o">.</span><span class="n">openUrl</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">ret</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tr</span><span class="p">(</span><span class="s">&#39;Unable to send the bug-report.</span><span class="se">\n</span><span class="s">&#39;</span>
                          <span class="s">&#39;Please save the bug-report on file and send it &#39;</span>
                          <span class="s">&#39;manually.&#39;</span><span class="p">)</span>
            <span class="n">QtGui</span><span class="o">.</span><span class="n">QMessageBox</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">tr</span><span class="p">(</span><span class="s">&#39;WARNING&#39;</span><span class="p">),</span> <span class="n">msg</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="ExceptionDialog.saveBugReport"><a class="viewcode-back" href="../../api/gsdview.widgets.html#gsdview.widgets.ExceptionDialog.saveBugReport">[docs]</a>    <span class="k">def</span> <span class="nf">saveBugReport</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_excInfoSet</span><span class="p">():</span>
            <span class="n">exctype</span><span class="p">,</span> <span class="n">excvalue</span><span class="p">,</span> <span class="n">tracebackobj</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">exc_info</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">exctype</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">exctype</span>
            <span class="n">excvalue</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">excvalue</span>
            <span class="n">tracebackobj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tracebackobj</span>

        <span class="n">lines</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">foramt_bugreport</span><span class="p">(</span><span class="n">exctype</span><span class="p">,</span> <span class="n">excvalue</span><span class="p">,</span> <span class="n">tracebackobj</span><span class="p">)</span>
        <span class="n">report</span> <span class="o">=</span> <span class="s">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">lines</span><span class="p">)</span>
        <span class="n">filename</span> <span class="o">=</span> <span class="n">QtGui</span><span class="o">.</span><span class="n">QFileDialog</span><span class="o">.</span><span class="n">getSaveFileName</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">filename</span><span class="p">:</span>
            <span class="n">fd</span> <span class="o">=</span> <span class="nb">file</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="s">&#39;w&#39;</span><span class="p">)</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">fd</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">report</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span><span class="p">,</span> <span class="n">e</span><span class="p">:</span>
                <span class="n">msg</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tr</span><span class="p">(</span><span class="s">&#39;Unable to save the bug-report:</span><span class="se">\n</span><span class="si">%s</span><span class="s">&#39;</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
                <span class="n">QtGui</span><span class="o">.</span><span class="n">QMessageBox</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">tr</span><span class="p">(</span><span class="s">&#39;WARNING&#39;</span><span class="p">),</span> <span class="n">msg</span><span class="p">)</span>
            <span class="k">finally</span><span class="p">:</span>
                <span class="n">fd</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</div></div>
<span class="k">try</span><span class="p">:</span>
    <span class="kn">import</span> <span class="nn">qt</span>
    <span class="k">if</span> <span class="n">qt</span><span class="o">.</span><span class="n">qt_api</span> <span class="o">!=</span> <span class="s">&#39;pyqt&#39;</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ImportError</span>

    <span class="kn">from</span> <span class="nn">PyQt4</span> <span class="kn">import</span> <span class="n">Qsci</span>

<div class="viewcode-block" id="QsciExceptionDialog"><a class="viewcode-back" href="../../api/gsdview.widgets.html#gsdview.widgets.QsciExceptionDialog">[docs]</a>    <span class="k">class</span> <span class="nc">QsciExceptionDialog</span><span class="p">(</span><span class="n">ExceptionDialog</span><span class="p">):</span>

        <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">exctype</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">excvalue</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">tracebackobj</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                     <span class="n">parent</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">flags</span><span class="o">=</span><span class="n">QtCore</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">WindowFlags</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>

            <span class="nb">super</span><span class="p">(</span><span class="n">QsciExceptionDialog</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="n">exctype</span><span class="p">,</span> <span class="n">excvalue</span><span class="p">,</span>
                                                      <span class="n">tracebackobj</span><span class="p">,</span>
                                                      <span class="n">parent</span><span class="p">,</span> <span class="n">flags</span><span class="p">,</span> <span class="bp">False</span><span class="p">,</span>
                                                      <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">groupboxVerticalLayout</span><span class="o">.</span><span class="n">removeWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tracebackTextEdit</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">tracebackTextEdit</span><span class="o">.</span><span class="n">setParent</span><span class="p">(</span><span class="bp">None</span><span class="p">)</span>
            <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">tracebackTextEdit</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">tracebackTextEdit</span> <span class="o">=</span> <span class="n">Qsci</span><span class="o">.</span><span class="n">QsciScintilla</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">groupboxVerticalLayout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tracebackTextEdit</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">tracebackTextEdit</span><span class="o">.</span><span class="n">setMarginLineNumbers</span><span class="p">(</span>
                                        <span class="n">Qsci</span><span class="o">.</span><span class="n">QsciScintilla</span><span class="o">.</span><span class="n">NumberMargin</span><span class="p">,</span> <span class="bp">True</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">tracebackTextEdit</span><span class="o">.</span><span class="n">setMarginWidth</span><span class="p">(</span>
                                        <span class="n">Qsci</span><span class="o">.</span><span class="n">QsciScintilla</span><span class="o">.</span><span class="n">NumberMargin</span><span class="p">,</span> <span class="mi">30</span><span class="p">)</span>

            <span class="n">lexer</span> <span class="o">=</span> <span class="n">Qsci</span><span class="o">.</span><span class="n">QsciLexerPython</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">tracebackTextEdit</span><span class="o">.</span><span class="n">setLexer</span><span class="p">(</span><span class="n">lexer</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">tracebackTextEdit</span><span class="o">.</span><span class="n">recolor</span><span class="p">()</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">tracebackTextEdit</span><span class="o">.</span><span class="n">setReadOnly</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">tracebackGroupBox</span><span class="o">.</span><span class="n">toggled</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span>
                                            <span class="bp">self</span><span class="o">.</span><span class="n">tracebackTextEdit</span><span class="o">.</span><span class="n">setVisible</span><span class="p">)</span>

            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_excInfoSet</span><span class="p">():</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">setExcInfo</span><span class="p">(</span><span class="o">*</span><span class="n">sys</span><span class="o">.</span><span class="n">exc_info</span><span class="p">())</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_fill</span><span class="p">()</span>

<div class="viewcode-block" id="QsciExceptionDialog.traceback"><a class="viewcode-back" href="../../api/gsdview.widgets.html#gsdview.widgets.QsciExceptionDialog.traceback">[docs]</a>        <span class="k">def</span> <span class="nf">traceback</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">tracebackTextEdit</span><span class="o">.</span><span class="n">text</span><span class="p">()</span>
</div>
        <span class="k">def</span> <span class="nf">_setTracebackText</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">tracebackTextEdit</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
</div>
    <span class="n">GSDViewExceptionDialogBase</span> <span class="o">=</span> <span class="n">QsciExceptionDialog</span>

<span class="k">except</span> <span class="ne">ImportError</span><span class="p">:</span>
    <span class="n">GSDViewExceptionDialogBase</span> <span class="o">=</span> <span class="n">ExceptionDialog</span>


<div class="viewcode-block" id="GSDViewExceptionDialog"><a class="viewcode-back" href="../../api/gsdview.widgets.html#gsdview.widgets.GSDViewExceptionDialog">[docs]</a><span class="k">class</span> <span class="nc">GSDViewExceptionDialog</span><span class="p">(</span><span class="n">GSDViewExceptionDialogBase</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">GSDViewExceptionDialog</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="n">text</span> <span class="o">=</span> <span class="p">(</span><span class="s">&#39;Please file a bug report at &#39;</span>
            <span class="s">&#39;&lt;a href=&quot;</span><span class="si">%(website)s</span><span class="s">&quot;&gt;</span><span class="si">%(website_label)s</span><span class="s">&lt;/a&gt; &#39;</span>
            <span class="s">&#39;or report the problem via email to &#39;</span>
            <span class="s">&#39;&lt;a href=&quot;mailto:$(author_email)s?subject=[gsdview] Bug report&quot;&gt;&#39;</span>
                <span class="s">&#39;</span><span class="si">%(author)s</span><span class="s">&#39;</span>
            <span class="s">&#39;&lt;/a&gt;.&#39;</span><span class="p">)</span>
        <span class="n">text</span> <span class="o">=</span> <span class="n">text</span> <span class="o">%</span> <span class="n">info</span><span class="o">.</span><span class="n">__dict__</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tr</span><span class="p">(</span><span class="n">text</span><span class="p">))</span></div>
</pre></div>

          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
    
            <p class="logo"><a href="../../index.html">
              <img class="logo" src="../../_static/logo.png" alt="Logo"/>
            </a></p>
    
    
    <p>
        <a href="http://sourceforge.net/projects/gsdview">
            <img src="http://sflogo.sourceforge.net/sflogo.php?group_id=226458&type=14" width="150" height="40" alt="Get GSDView at SourceForge.net. Fast, secure and Free Open Source software downloads" />
        </a>
    </p>
    

<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" size="18" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a></li>
        <li><a href="../../index.html">GSDView</a> &raquo;</li>
          <li><a href="../index.html" >Module code</a> &raquo;</li>
          <li><a href="../gsdview.html" >gsdview</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2008-2011, Antonio Valentino.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.0.7.
    </div>
  </body>
</html>